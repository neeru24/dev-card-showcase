<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emotional Reactivity Score - Dev Card Showcase</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../css/emotional-reactivity-score.css">
    <link rel="icon" href="../assets/favicon/favicon.ico" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <!-- Include navbar -->
    <div id="navbar-container"></div>

    <div class="container">
        <header class="page-header">
            <h1><i data-lucide="brain"></i> Emotional Reactivity Score</h1>
            <p>Measure the intensity of your emotional responses and track reactivity patterns over time to improve self-regulation.</p>
        </header>

        <div class="tracker-grid">
            <!-- Reaction Logger -->
            <section class="tracker-section reaction-logger">
                <h2><i data-lucide="plus-circle"></i> Log Emotional Reaction</h2>
                <form id="reactivityForm" class="reactivity-form">
                    <div class="form-group">
                        <label for="reactionDate">Date & Time</label>
                        <input type="datetime-local" id="reactionDate" required>
                    </div>
                    <div class="form-group">
                        <label for="triggerType">Trigger Type</label>
                        <select id="triggerType" required>
                            <option value="">Select trigger</option>
                            <option value="stress">Work/Academic Stress</option>
                            <option value="conflict">Personal Conflict</option>
                            <option value="criticism">Criticism/Feedback</option>
                            <option value="failure">Failure/Setback</option>
                            <option value="uncertainty">Uncertainty/Change</option>
                            <option value="time_pressure">Time Pressure</option>
                            <option value="social">Social Situation</option>
                            <option value="physical">Physical Discomfort</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="reactionIntensity">Reaction Intensity (1-10)</label>
                        <div class="intensity-input">
                            <input type="range" id="reactionIntensity" min="1" max="10" value="5">
                            <div class="intensity-display">
                                <span class="intensity-value" id="intensityValue">5</span>
                                <span class="intensity-text" id="intensityText">Moderate</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="reactionDuration">Reaction Duration (minutes)</label>
                        <input type="number" id="reactionDuration" min="1" max="1440" placeholder="How long did the reaction last?" required>
                    </div>
                    <div class="form-group">
                        <label for="emotionalState">Primary Emotion</label>
                        <select id="emotionalState" required>
                            <option value="">Select emotion</option>
                            <option value="anger">Anger</option>
                            <option value="frustration">Frustration</option>
                            <option value="anxiety">Anxiety</option>
                            <option value="sadness">Sadness</option>
                            <option value="fear">Fear</option>
                            <option value="irritation">Irritation</option>
                            <option value="overwhelm">Overwhelm</option>
                            <option value="disappointment">Disappointment</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="triggerDescription">Trigger Description</label>
                        <textarea id="triggerDescription" placeholder="What specifically triggered this reaction?" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="copingResponse">Coping Response (optional)</label>
                        <textarea id="copingResponse" placeholder="How did you respond or cope with this reaction?"></textarea>
                    </div>
                    <button type="submit" class="btn-primary">
                        <i data-lucide="check-circle"></i> Log Reaction
                    </button>
                </form>
            </section>

            <!-- Reactivity Dashboard -->
            <section class="tracker-section reactivity-dashboard">
                <h2><i data-lucide="bar-chart-3"></i> Reactivity Metrics</h2>
                <div class="metrics-grid">
                    <div class="metric-item">
                        <div class="metric-value" id="avgIntensity">--</div>
                        <div class="metric-label">Avg Intensity</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="avgDuration">--</div>
                        <div class="metric-label">Avg Duration</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="totalReactions">0</div>
                        <div class="metric-label">Total Reactions</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="reactivityScore">--</div>
                        <div class="metric-label">Reactivity Score</div>
                    </div>
                </div>
                <div class="reactivity-indicator">
                    <h3>Current Reactivity Level</h3>
                    <div id="reactivityLevel" class="reactivity-level">
                        <div class="reactivity-bar">
                            <div class="reactivity-fill" id="reactivityFill"></div>
                        </div>
                        <div class="reactivity-label" id="reactivityLabel">No data available</div>
                    </div>
                </div>
            </section>

            <!-- Stability Trends -->
            <section class="tracker-section stability-trends">
                <h2><i data-lucide="trending-down"></i> Reactivity Stability Trends</h2>
                <div class="chart-controls">
                    <select id="timeRange">
                        <option value="7">Last 7 days</option>
                        <option value="30">Last 30 days</option>
                        <option value="90">Last 90 days</option>
                        <option value="all">All Time</option>
                    </select>
                    <button id="refreshChart" class="btn-secondary">
                        <i data-lucide="refresh-cw"></i> Refresh
                    </button>
                </div>
                <div class="trends-chart">
                    <canvas id="reactivityChart"></canvas>
                </div>
            </section>

            <!-- Reaction History -->
            <section class="tracker-section reaction-history">
                <h2><i data-lucide="calendar"></i> Reaction History</h2>
                <div class="history-controls">
                    <button id="viewRecent" class="btn-secondary active">Recent</button>
                    <button id="viewAll" class="btn-secondary">All Time</button>
                </div>
                <div class="history-list" id="reactionHistory">
                    <!-- Dynamic content -->
                </div>
            </section>

            <!-- Reactivity Insights -->
            <section class="tracker-section reactivity-insights">
                <h2><i data-lucide="lightbulb"></i> Reactivity Insights</h2>
                <div class="insights-grid">
                    <div class="insight-card">
                        <h3>Pattern Analysis</h3>
                        <div class="insight-content" id="patternAnalysis">
                            <p>Analysis of your emotional reactivity patterns.</p>
                        </div>
                    </div>
                    <div class="insight-card">
                        <h3>Trigger Sensitivity</h3>
                        <div class="insight-content" id="triggerSensitivity">
                            <p>Your sensitivity to different types of triggers.</p>
                        </div>
                    </div>
                    <div class="insight-card">
                        <h3>Regulation Progress</h3>
                        <div class="insight-content" id="regulationProgress">
                            <p>Trends in your emotional regulation over time.</p>
                        </div>
                    </div>
                </div>
                <div class="tips-list" id="tips">
                    <!-- Dynamic content -->
                </div>
            </section>
        </div>

        <!-- Reactivity Benchmarks -->
        <section class="reactivity-benchmarks">
            <h2><i data-lucide="target"></i> Emotional Reactivity Benchmarks</h2>
            <div class="benchmarks-grid" id="benchmarks">
                <!-- Dynamic content -->
            </div>
        </section>
    </div>

    <script src="../js/emotional-reactivity-score.js"></script>
    <script>
        // Load navbar
        fetch('../navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar-container').innerHTML = data;
                // Re-initialize Lucide icons after navbar is loaded
                if (window.lucide) {
                    lucide.createIcons();
                }
            })
            .catch(error => console.error('Error loading navbar:', error));
    </script>
</body>
</html>