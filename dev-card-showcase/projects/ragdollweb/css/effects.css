/**
 * RagdollWeb - Visual Effects Styles
 * Defines advanced visual effects, shadows, glows, and string rendering
 */

/* ============================================
   STRING VISUALIZATION
   ============================================ */

.string-line {
    position: absolute;
    width: 2px;
    background: linear-gradient(180deg,
            rgba(99, 102, 241, 0.8) 0%,
            rgba(99, 102, 241, 0.4) 50%,
            rgba(99, 102, 241, 0.2) 100%);
    transform-origin: top center;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
}

.string-line.visible {
    opacity: 0.6;
}

.string-line.highlight {
    opacity: 1;
    background: linear-gradient(180deg,
            rgba(236, 72, 153, 1) 0%,
            rgba(236, 72, 153, 0.6) 50%,
            rgba(236, 72, 153, 0.3) 100%);
    box-shadow: 0 0 20px rgba(236, 72, 153, 0.8);
}

/* ============================================
   SHADOW EFFECTS
   ============================================ */

/* Elevated shadow for hanging elements */
.hanging-element {
    filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.4)) drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

/* Dynamic shadow based on element state */
.state-hanging {
    filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.4)) drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

.state-falling {
    filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.6)) drop-shadow(0 6px 12px rgba(0, 0, 0, 0.4)) blur(1px);
}

.state-landed {
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* ============================================
   GLOW EFFECTS
   ============================================ */

/* Ambient glow for interactive elements */
.interactive-btn {
    box-shadow:
        0 4px 16px rgba(0, 0, 0, 0.4),
        0 0 20px rgba(99, 102, 241, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.interactive-btn:hover {
    box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.5),
        0 0 40px rgba(99, 102, 241, 0.5),
        0 0 60px rgba(99, 102, 241, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

/* Decorative element glow */
.decorative {
    filter: drop-shadow(0 0 10px rgba(99, 102, 241, 0.6)) drop-shadow(0 0 20px rgba(99, 102, 241, 0.4)) drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

/* ============================================
   GRADIENT OVERLAYS
   ============================================ */

/* Gradient overlay for depth */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at center,
            transparent 0%,
            rgba(10, 14, 39, 0.3) 70%,
            rgba(10, 14, 39, 0.6) 100%);
    pointer-events: none;
    z-index: 0;
}

/* Vignette effect */
body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at center,
            transparent 0%,
            rgba(0, 0, 0, 0.4) 100%);
    pointer-events: none;
    z-index: 0;
}

/* ============================================
   PARTICLE EFFECTS
   ============================================ */

.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: radial-gradient(circle,
            rgba(99, 102, 241, 1) 0%,
            rgba(99, 102, 241, 0.6) 50%,
            transparent 100%);
    border-radius: 50%;
    pointer-events: none;
    box-shadow:
        0 0 4px rgba(99, 102, 241, 0.8),
        0 0 8px rgba(99, 102, 241, 0.4);
}

.particle.pink {
    background: radial-gradient(circle,
            rgba(236, 72, 153, 1) 0%,
            rgba(236, 72, 153, 0.6) 50%,
            transparent 100%);
    box-shadow:
        0 0 4px rgba(236, 72, 153, 0.8),
        0 0 8px rgba(236, 72, 153, 0.4);
}

.particle.purple {
    background: radial-gradient(circle,
            rgba(139, 92, 246, 1) 0%,
            rgba(139, 92, 246, 0.6) 50%,
            transparent 100%);
    box-shadow:
        0 0 4px rgba(139, 92, 246, 0.8),
        0 0 8px rgba(139, 92, 246, 0.4);
}

/* ============================================
   BACKDROP BLUR EFFECTS
   ============================================ */

.image-box {
    backdrop-filter: blur(10px) saturate(180%);
    -webkit-backdrop-filter: blur(10px) saturate(180%);
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.15),
            rgba(139, 92, 246, 0.15));
}

#collision-footer {
    backdrop-filter: blur(20px) saturate(150%);
    -webkit-backdrop-filter: blur(20px) saturate(150%);
}

/* ============================================
   BORDER GLOW EFFECTS
   ============================================ */

.image-box {
    border: 2px solid transparent;
    background-image:
        linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2)),
        linear-gradient(135deg, rgba(99, 102, 241, 0.6), rgba(139, 92, 246, 0.6));
    background-origin: border-box;
    background-clip: padding-box, border-box;
}

.image-box:hover {
    background-image:
        linear-gradient(135deg, rgba(99, 102, 241, 0.3), rgba(139, 92, 246, 0.3)),
        linear-gradient(135deg, rgba(99, 102, 241, 1), rgba(139, 92, 246, 1));
}

/* ============================================
   TEXT GLOW EFFECTS
   ============================================ */

h1.hanging-element {
    text-shadow:
        0 0 10px rgba(99, 102, 241, 0.5),
        0 0 20px rgba(99, 102, 241, 0.3),
        0 4px 8px rgba(0, 0, 0, 0.4);
}

h2.hanging-element {
    text-shadow:
        0 0 8px rgba(160, 176, 216, 0.4),
        0 2px 6px rgba(0, 0, 0, 0.3);
}

h3.hanging-element {
    text-shadow:
        0 0 6px rgba(160, 176, 216, 0.3),
        0 2px 4px rgba(0, 0, 0, 0.2);
}

/* ============================================
   REFLECTION EFFECTS
   ============================================ */

.hanging-element::after {
    content: '';
    position: absolute;
    bottom: -20px;
    left: 0;
    width: 100%;
    height: 20px;
    background: linear-gradient(180deg,
            rgba(99, 102, 241, 0.1) 0%,
            transparent 100%);
    opacity: 0.3;
    pointer-events: none;
    filter: blur(4px);
}

/* ============================================
   LIGHT STREAK EFFECTS
   ============================================ */

@keyframes light-streak {
    0% {
        transform: translateX(-100%) translateY(-100%) rotate(45deg);
        opacity: 0;
    }

    50% {
        opacity: 0.3;
    }

    100% {
        transform: translateX(100%) translateY(100%) rotate(45deg);
        opacity: 0;
    }
}

.hanging-element::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg,
            transparent 0%,
            rgba(255, 255, 255, 0.1) 45%,
            rgba(255, 255, 255, 0.2) 50%,
            rgba(255, 255, 255, 0.1) 55%,
            transparent 100%);
    pointer-events: none;
    animation: light-streak 8s ease-in-out infinite;
    opacity: 0;
}

.hanging-element:hover::before {
    animation: light-streak 2s ease-in-out infinite;
}

/* ============================================
   DEPTH LAYERS
   ============================================ */

/* Create depth perception with layered shadows */
.hanging-element[data-string-length="110"],
.hanging-element[data-string-length="120"],
.hanging-element[data-string-length="130"] {
    filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.35));
    z-index: 12;
}

.hanging-element[data-string-length="140"],
.hanging-element[data-string-length="150"],
.hanging-element[data-string-length="160"] {
    filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.4));
    z-index: 11;
}

.hanging-element[data-string-length="170"],
.hanging-element[data-string-length="180"],
.hanging-element[data-string-length="190"],
.hanging-element[data-string-length="200"] {
    filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.45));
    z-index: 10;
}

/* ============================================
   CURSOR TRAIL EFFECT
   ============================================ */

.cursor-trail {
    position: fixed;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: radial-gradient(circle,
            rgba(99, 102, 241, 0.4) 0%,
            transparent 70%);
    pointer-events: none;
    z-index: 9999;
    mix-blend-mode: screen;
    transition: transform 0.1s ease-out;
}

/* ============================================
   CUTTING INDICATOR
   ============================================ */

.cutting-indicator {
    position: fixed;
    width: 3px;
    height: 100%;
    background: linear-gradient(180deg,
            transparent 0%,
            rgba(236, 72, 153, 0.8) 50%,
            transparent 100%);
    pointer-events: none;
    z-index: 999;
    box-shadow:
        0 0 10px rgba(236, 72, 153, 0.6),
        0 0 20px rgba(236, 72, 153, 0.4);
    opacity: 0;
    transition: opacity 0.2s ease;
}

.cutting-indicator.active {
    opacity: 1;
}

/* ============================================
   IMPACT WAVE EFFECT
   ============================================ */

@keyframes impact-wave {
    0% {
        transform: scale(0);
        opacity: 1;
    }

    100% {
        transform: scale(3);
        opacity: 0;
    }
}

.impact-wave {
    position: absolute;
    width: 50px;
    height: 50px;
    border: 3px solid rgba(99, 102, 241, 0.8);
    border-radius: 50%;
    pointer-events: none;
    animation: impact-wave 0.6s ease-out forwards;
}

/* ============================================
   FOOTER GLOW
   ============================================ */

#collision-footer {
    box-shadow:
        0 -4px 20px rgba(0, 0, 0, 0.5),
        0 -2px 40px rgba(99, 102, 241, 0.1),
        inset 0 1px 0 rgba(99, 102, 241, 0.2);
}

/* ============================================
   LANDED ZONE EFFECTS
   ============================================ */

#landed-zone {
    background:
        linear-gradient(135deg, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.1) 100%),
        repeating-linear-gradient(45deg,
            transparent,
            transparent 10px,
            rgba(99, 102, 241, 0.05) 10px,
            rgba(99, 102, 241, 0.05) 20px);
    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* ============================================
   PERFORMANCE OPTIMIZATIONS
   ============================================ */

/* Use will-change for animated properties */
.hanging-element,
.particle,
.string-line {
    will-change: transform, opacity;
}

/* Disable expensive effects on mobile */
@media (max-width: 768px) {

    .hanging-element::before,
    .hanging-element::after,
    body::before,
    body::after {
        display: none;
    }

    .image-box,
    #collision-footer {
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
    }
}

/* ============================================
   ACCESSIBILITY - HIGH CONTRAST MODE
   ============================================ */

@media (prefers-contrast: high) {
    .string-line {
        background: #00ffff;
        box-shadow: none;
    }

    .particle {
        background: #00ffff;
        box-shadow: none;
    }

    .hanging-element {
        filter: none;
        border: 2px solid #00ffff;
    }
}