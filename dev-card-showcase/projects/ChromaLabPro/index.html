<html lang="en" data-color-scheme="dark">

<head>
    <!-- Primary Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">

    <title>ChromaLab Pro: Free Online Color Tool for Developers & Designers | Oathan Rex</title>

    <meta name="description"
        content="Professional color toolkit: Convert HEX/RGB/HSL/CMYK, generate palettes, create gradients, check WCAG contrast. Free, no signup required. Built by Oathan Rex.">

    <meta name="keywords"
        content="color converter, palette generator, gradient maker, contrast checker, hex to rgb, color tool, web design tool, developer tool, free online tool">

    <link rel="canonical" href="https://oathanrex.github.io/chromalab-pro">

    <!-- SEO Meta Tags -->
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="author" content="Oathan Rex">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="color-scheme" content="dark light">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://oathanrex.github.io/chromalab-pro">
    <meta property="og:title" content="ChromaLab Pro: Free Online Color Toolkit">
    <meta property="og:description"
        content="Convert colors, generate palettes, create gradients, check contrast. Professional tool for developers & designers.">
    <meta property="og:image" content="https://oathanrex.github.io/assets/chromalab-pro-og.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="ChromaLab Pro Color Tool Interface">
    <meta property="og:site_name" content="Oathan Rex Portfolio">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:creator" content="@OathanRex">
    <meta name="twitter:site" content="@OathanRex">
    <meta name="twitter:url" content="https://oathanrex.github.io/chromalab-pro">
    <meta name="twitter:title" content="ChromaLab Pro: Free Color Toolkit">
    <meta name="twitter:description"
        content="Professional color conversion, palette generation, gradient creation, and WCAG contrast checking.">
    <meta name="twitter:image" content="https://oathanrex.github.io/assets/chromalab-pro-twitter.png">
    <meta name="twitter:image:alt" content="ChromaLab Pro tool screenshot showing color conversion interface">

    <!-- iOS/Android App Capable -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- Preload Critical Resources -->
    <link rel="preload" as="style"
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">

    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: rgba(20, 20, 20, 0.7);
            --text-primary: #e0e0e0;
            --text-secondary: #909090;
            --text-tertiary: #606060;
            --primary-gradient: linear-gradient(135deg, #1e90ff 0%, #4a9eff 100%);
            --border-color: rgba(255, 255, 255, 0.1);
            --success: #34a853;
            --error: #ea4335;
            --warning: #fbbc05;
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.2);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.4);
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 0.75rem;
            --spacing-lg: 1rem;
            --spacing-xl: 1.5rem;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",
                "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            min-height: 100vh;
        }

        /* Animated Background */
        .animated-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }

        .gradient-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
        }

        .orb-1 {
            width: min(500px, 80vw);
            height: min(500px, 80vw);
            background: radial-gradient(circle, rgba(30, 144, 255, 0.4) 0%, transparent 70%);
            top: -10%;
            left: -10%;
            animation: float1 20s infinite ease-in-out;
        }

        .orb-2 {
            width: min(400px, 60vw);
            height: min(400px, 60vw);
            background: radial-gradient(circle, rgba(251, 188, 5, 0.3) 0%, transparent 70%);
            bottom: -10%;
            right: -10%;
            animation: float2 20s infinite ease-in-out 7s;
        }

        .orb-3 {
            width: min(350px, 50vw);
            height: min(350px, 50vw);
            background: radial-gradient(circle, rgba(52, 168, 83, 0.3) 0%, transparent 70%);
            top: 50%;
            left: 50%;
            animation: float3 20s infinite ease-in-out 14s;
        }

        @keyframes float1 {

            0%,
            100% {
                transform: translate(0, 0) scale(1);
            }

            33% {
                transform: translate(30px, -30px) scale(1.05);
            }

            66% {
                transform: translate(-20px, 20px) scale(0.95);
            }
        }

        @keyframes float2 {

            0%,
            100% {
                transform: translate(0, 0) scale(1);
            }

            33% {
                transform: translate(-30px, 30px) scale(1.05);
            }

            66% {
                transform: translate(20px, -20px) scale(0.95);
            }
        }

        @keyframes float3 {

            0%,
            100% {
                transform: translate(-50%, -50%) scale(1);
            }

            33% {
                transform: translate(calc(-50% + 30px), calc(-50% - 30px)) scale(1.05);
            }

            66% {
                transform: translate(calc(-50% - 20px), calc(-50% + 20px)) scale(0.95);
            }
        }

        /* Main Container */
        .main-container {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            padding: var(--spacing-xl);
        }

        /* Header */
        .header {
            max-width: 900px;
            margin: 0 auto var(--spacing-xl) auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-lg) var(--spacing-xl);
            background: var(--bg-secondary);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-xl);
            animation: fadeInUp 0.6s ease-out;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            stroke: #4a9eff;
            stroke-width: 1.5;
        }

        .logo-text h1 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #ffffff;
            letter-spacing: -0.02em;
        }

        .logo-text p {
            font-size: 0.7rem;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Card */
        .card {
            background: var(--bg-secondary);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-lg);
            animation: fadeInUp 0.8s ease-out;
        }

        /* Tabs */
        .tabs-container {
            max-width: 900px;
            margin: 0 auto var(--spacing-xl) auto;
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            padding: var(--spacing-md);
            background: var(--bg-secondary);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            animation: fadeInUp 0.7s ease-out;
        }

        .tab-btn {
            padding: var(--spacing-sm) var(--spacing-lg);
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-secondary);
            background: transparent;
            border: 1px solid transparent;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .tab-btn:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.05);
        }

        .tab-btn.active {
            background: var(--primary-gradient);
            color: white;
            border-color: var(--border-color);
            box-shadow: 0 2px 8px rgba(30, 144, 255, 0.3);
        }

        /* Content Area */
        .content-area {
            max-width: 900px;
            margin: 0 auto;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Section Title */
        .section-title {
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: var(--spacing-lg);
        }

        /* Input Field */
        .input-field {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: var(--spacing-md) var(--spacing-lg);
            font-size: 0.9rem;
            color: var(--text-primary);
            transition: all 0.2s;
            width: 100%;
            font-family: inherit;
        }

        .input-field:focus {
            outline: none;
            border-color: #4a9eff;
            box-shadow: 0 0 0 3px rgba(74, 158, 255, 0.15);
        }

        .input-field::placeholder {
            color: #505050;
        }

        .input-field[type="number"]::-webkit-outer-spin-button,
        .input-field[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .input-field[type="number"] {
            -moz-appearance: textfield;
        }

        /* Buttons */
        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(30, 144, 255, 0.3);
            font-family: inherit;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(30, 144, 255, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: #b0b0b0;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        /* Color Preview */
        .color-preview-wrapper {
            width: 100%;
            height: 120px;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            margin-bottom: var(--spacing-xl);
            overflow: hidden;
            background-image:
                linear-gradient(45deg, #2a2a2a 25%, transparent 25%),
                linear-gradient(-45deg, #2a2a2a 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #2a2a2a 75%),
                linear-gradient(-45deg, transparent 75%, #2a2a2a 75%);
            background-size: 16px 16px;
            background-position: 0 0, 0 8px, 8px -8px, -8px 0px;
            background-color: #1a1a1a;
        }

        .color-preview-inner {
            width: 100%;
            height: 100%;
            border-radius: calc(var(--radius-lg) - 1px);
            transition: background 0.2s ease;
        }

        /* Color Output */
        .color-output {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            padding: 0.875rem var(--spacing-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }

        .color-output:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .color-output-label {
            font-size: 0.7rem;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }

        .color-output-value {
            font-size: 0.9rem;
            font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
            color: var(--text-primary);
        }

        /* Copy Button */
        .copy-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            padding: var(--spacing-xs) var(--spacing-md);
            font-size: 0.75rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
            min-width: 60px;
        }

        .copy-btn:hover {
            background: var(--primary-gradient);
            color: white;
            border-color: transparent;
        }

        .copy-btn.copied {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        /* Grid Layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-xl);
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-md);
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--spacing-md);
        }

        .grid-5 {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: var(--spacing-md);
        }

        .grid-10 {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: var(--spacing-sm);
        }

        /* Slider */
        .slider-track {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            cursor: pointer;
        }

        .slider-track::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #4a9eff;
            cursor: pointer;
            border: 2px solid var(--bg-primary);
            box-shadow: 0 2px 8px rgba(74, 158, 255, 0.4);
            transition: transform 0.15s ease;
        }

        .slider-track::-webkit-slider-thumb:hover {
            transform: scale(1.1);
        }

        .slider-track::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #4a9eff;
            cursor: pointer;
            border: 2px solid var(--bg-primary);
            box-shadow: 0 2px 8px rgba(74, 158, 255, 0.4);
        }

        /* Color Input Native */
        .color-input-native {
            width: 48px;
            height: 40px;
            border-radius: var(--radius-md);
            cursor: pointer;
            border: 1px solid var(--border-color);
            background: transparent;
            padding: 0;
        }

        .color-input-native::-webkit-color-swatch-wrapper {
            padding: 2px;
        }

        .color-input-native::-webkit-color-swatch {
            border-radius: calc(var(--radius-md) - 2px);
            border: none;
        }

        .color-input-native::-moz-color-swatch {
            border-radius: calc(var(--radius-md) - 2px);
            border: none;
        }

        /* Select */
        select {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: var(--spacing-md) 2rem var(--spacing-md) var(--spacing-lg);
            font-size: 0.9rem;
            color: var(--text-primary);
            cursor: pointer;
            appearance: none;
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23909090' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            background-size: 16px;
            font-family: inherit;
        }

        select:focus {
            outline: none;
            border-color: #4a9eff;
        }

        select option {
            background: #1a1a1a;
            color: var(--text-primary);
        }

        /* Divider */
        .divider {
            height: 1px;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
            margin: var(--spacing-xl) 0;
        }

        /* History Swatch */
        .history-swatch {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .history-swatch:hover {
            border-color: #4a9eff;
            transform: scale(1.05);
        }

        /* Palette Swatch */
        .palette-swatch {
            border-radius: 10px;
            transition: all 0.2s;
            cursor: pointer;
            border: 1px solid var(--border-color);
        }

        .palette-swatch:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        /* Contrast Badge */
        .contrast-badge {
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
        }

        .contrast-pass {
            background: rgba(52, 168, 83, 0.2);
            color: var(--success);
            border: 1px solid rgba(52, 168, 83, 0.3);
        }

        .contrast-fail {
            background: rgba(234, 67, 53, 0.2);
            color: var(--error);
            border: 1px solid rgba(234, 67, 53, 0.3);
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            color: white;
            padding: 0.875rem 1.25rem;
            border-radius: 10px;
            font-size: 0.9rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-lg);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
            pointer-events: none;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* Footer */
        .footer {
            max-width: 900px;
            margin: var(--spacing-xl) auto 0 auto;
            padding: var(--spacing-lg);
            text-align: center;
            color: #505050;
            font-size: 0.8rem;
        }

        /* Utility Classes */
        .input-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-sm);
            display: block;
        }

        .input-sublabel {
            font-size: 0.7rem;
            color: var(--text-tertiary);
            margin-bottom: 0.25rem;
            display: block;
        }

        .input-group {
            margin-bottom: 0;
        }

        .space-y-3>*+* {
            margin-top: var(--spacing-md);
        }

        .space-y-4>*+* {
            margin-top: var(--spacing-lg);
        }

        .space-y-6>*+* {
            margin-top: var(--spacing-xl);
        }

        .mt-4 {
            margin-top: var(--spacing-lg);
        }

        .mt-6 {
            margin-top: var(--spacing-xl);
        }

        .mb-2 {
            margin-bottom: var(--spacing-sm);
        }

        .mb-4 {
            margin-bottom: var(--spacing-lg);
        }

        .mb-6 {
            margin-bottom: var(--spacing-xl);
        }

        .gap-2 {
            gap: var(--spacing-sm);
        }

        .gap-3 {
            gap: var(--spacing-md);
        }

        .gap-4 {
            gap: var(--spacing-lg);
        }

        .flex {
            display: flex;
        }

        .flex-wrap {
            flex-wrap: wrap;
        }

        .items-center {
            align-items: center;
        }

        .items-end {
            align-items: flex-end;
        }

        .justify-between {
            justify-content: space-between;
        }

        .flex-1 {
            flex: 1;
        }

        .w-full {
            width: 100%;
        }

        .h-12 {
            height: 3rem;
        }

        .h-14 {
            height: 3.5rem;
        }

        .h-20 {
            height: 5rem;
        }

        .h-10 {
            height: 2.5rem;
        }

        .h-40 {
            height: 10rem;
        }

        .h-48 {
            height: 12rem;
        }

        .text-center {
            text-align: center;
        }

        .text-sm {
            font-size: 0.875rem;
        }

        .text-xs {
            font-size: 0.75rem;
        }

        .text-xl {
            font-size: 1.25rem;
        }

        .text-3xl {
            font-size: 1.875rem;
        }

        .font-bold {
            font-weight: 700;
        }

        .font-medium {
            font-weight: 500;
        }

        .hidden {
            display: none !important;
        }

        .rounded-lg {
            border-radius: var(--radius-md);
        }

        .overflow-hidden {
            overflow: hidden;
        }

        .break-all {
            word-break: break-all;
        }

        .info-box {
            background: linear-gradient(135deg, rgba(30, 144, 255, 0.08) 0%, rgba(52, 168, 83, 0.06) 100%);
            border: 1px solid rgba(30, 144, 255, 0.15);
            border-radius: 10px;
            padding: var(--spacing-lg);
        }

        .info-box h3 {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-md);
        }

        .info-box ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .info-box li {
            font-size: 0.85rem;
            color: #b0b0b0;
            padding: 0.25rem 0;
        }

        .info-box li span {
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Clear button */
        .clear-btn {
            color: var(--text-tertiary);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.8rem;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 4px;
            transition: all 0.2s;
            font-family: inherit;
        }

        .clear-btn:hover {
            color: var(--error);
            background: rgba(234, 67, 53, 0.1);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }

            .grid-4 {
                grid-template-columns: repeat(2, 1fr);
            }

            .grid-5 {
                grid-template-columns: repeat(2, 1fr);
            }

            .grid-10 {
                grid-template-columns: repeat(5, 1fr);
            }

            .header {
                flex-direction: column;
                gap: var(--spacing-lg);
                text-align: center;
            }

            .tabs-container {
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .main-container {
                padding: var(--spacing-lg);
            }

            .card {
                padding: var(--spacing-lg);
            }

            .grid-3 {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
    <!-- Deferred CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
        media="print" onload="this.media='all'">

    <!-- Deferred JavaScript -->
    <script defer>
        // Load non-critical resources
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').catch(console.log);
            });
        }

        // Lazy load images
        document.addEventListener('DOMContentLoaded', function () {
            const lazyImages = [].slice.call(document.querySelectorAll('img.lazy'));
            if ('IntersectionObserver' in window) {
                const lazyImageObserver = new IntersectionObserver((entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            const lazyImage = entry.target;
                            lazyImage.src = lazyImage.dataset.src;
                            lazyImage.classList.remove('lazy');
                            lazyImageObserver.unobserve(lazyImage);
                        }
                    });
                });
                lazyImages.forEach((lazyImage) => lazyImageObserver.observe(lazyImage));
            }
        });
    </script>
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebApplication",
      "@id": "https://oathanrex.github.io/chromalab-pro#webapp",
      "name": "ChromaLab Pro",
      "description": "A professional, front-end color toolkit for developers and designers. Convert between HEX, RGB, HSL, CMYK formats, generate color palettes, create CSS gradients, and check WCAG contrast ratios.",
      "url": "https://oathanrex.github.io/chromalab-pro",
      "applicationCategory": "DesignApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": [
        "Color format converter (HEX, RGB, HSL, CMYK)",
        "Advanced color picker with RGB sliders",
        "Palette generator (analogous, complementary, triadic, etc.)",
        "CSS gradient maker with code export",
        "WCAG 2.1 contrast checker",
        "Color history with local storage",
        "No installation or signup required"
      ],
      "screenshot": {
        "@type": "ImageObject",
        "url": "https://oathanrex.github.io/assets/chromalab-pro-screenshot.png",
        "caption": "ChromaLab Pro user interface"
      },
      "author": {
        "@type": "Person",
        "@id": "https://oathanrex.github.io/#person"
      },
      "publisher": {
        "@type": "Person",
        "@id": "https://oathanrex.github.io/#person"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "150",
        "bestRating": "5",
        "worstRating": "1"
      },
      "keywords": "color tool, web design, developer tool, palette generator, gradient maker, contrast checker"
    },
    {
      "@type": "SoftwareApplication",
      "@id": "https://oathanrex.github.io/chromalab-pro#software",
      "name": "ChromaLab Pro",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Web Browser",
      "browserRequirements": "Requires JavaScript",
      "description": "Online color manipulation tool for web developers and designers.",
      "url": "https://oathanrex.github.io/chromalab-pro",
      "license": "https://github.com/OathanRex/oathanrex.github.io/blob/main/LICENSE",
      "datePublished": "2024-01-01",
      "softwareVersion": "2.0.0",
      "author": {
        "@type": "Person",
        "name": "Oathan Rex",
        "url": "https://oathanrex.github.io"
      }
    },
    {
      "@type": "Person",
      "@id": "https://oathanrex.github.io/#person",
      "name": "Oathan Rex",
      "url": "https://oathanrex.github.io",
      "sameAs": [
        "https://github.com/OathanRex",
        "https://linkedin.com/in/oathanrex"
      ],
      "jobTitle": "Full-Stack Developer",
      "knowsAbout": [
        "Web Development",
        "Color Theory",
        "UI/UX Design",
        "Frontend Engineering",
        "Web Performance"
      ],
      "description": "Developer and creator of ChromaLab Pro and other web tools."
    },
    {
      "@type": "WebSite",
      "@id": "https://oathanrex.github.io/#website",
      "url": "https://oathanrex.github.io",
      "name": "Oathan Rex | Developer & Creator",
      "description": "Portfolio and tools by Oathan Rex, including ChromaLab Pro.",
      "publisher": {
        "@id": "https://oathanrex.github.io/#person"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "https://oathanrex.github.io/search?q={search_term_string}"
        },
        "query-input": "required name=search_term_string"
      }
    }
  ]
}
</script>
</head>

<body>
    <!-- Animated Background -->
    <div class="animated-background">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast" role="alert" aria-live="polite"></div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path
                        d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"
                        stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <div class="logo-text">
                    <h1>ChromaLab Pro</h1>
                    <p>Ultimate Color Toolkit</p>
                </div>
            </div>
        </header>

        <!-- Tabs -->
        <div class="tabs-container" role="tablist">
            <button id="tab-converter" class="tab-btn active" role="tab" aria-selected="true"
                aria-controls="converter">Converter</button>
            <button id="tab-picker" class="tab-btn" role="tab" aria-selected="false" aria-controls="picker">Color
                Picker</button>
            <button id="tab-palette" class="tab-btn" role="tab" aria-selected="false" aria-controls="palette">Palette
                Generator</button>
            <button id="tab-gradient" class="tab-btn" role="tab" aria-selected="false" aria-controls="gradient">Gradient
                Maker</button>
            <button id="tab-contrast" class="tab-btn" role="tab" aria-selected="false" aria-controls="contrast">Contrast
                Checker</button>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Converter Tab -->
            <div id="converter" class="tab-content active" role="tabpanel" aria-labelledby="tab-converter">
                <div class="grid-2">
                    <!-- Input Section -->
                    <div class="card">
                        <h2 class="section-title">Color Input</h2>

                        <!-- Color Preview -->
                        <div class="color-preview-wrapper">
                            <div id="colorPreview" class="color-preview-inner" style="background: #4a9eff;"></div>
                        </div>

                        <!-- Input Type Selector -->
                        <div class="flex flex-wrap gap-2 mb-4">
                            <button id="inputTypeHex" class="btn-primary">HEX</button>
                            <button id="inputTypeRgb" class="btn-secondary">RGB</button>
                            <button id="inputTypeHsl" class="btn-secondary">HSL</button>
                            <button id="inputTypeCmyk" class="btn-secondary">CMYK</button>
                        </div>

                        <!-- HEX Input -->
                        <div id="hexInput" class="input-group">
                            <label for="hexValue" class="input-label">HEX Color</label>
                            <div class="flex gap-3">
                                <input type="text" id="hexValue" value="#4a9eff" placeholder="#RRGGBB"
                                    class="input-field flex-1">
                                <input type="color" id="colorPicker" value="#4a9eff" class="color-input-native"
                                    aria-label="Color picker">
                            </div>
                        </div>

                        <!-- RGB Input -->
                        <div id="rgbInput" class="input-group hidden">
                            <label class="input-label">RGB Color</label>
                            <div class="grid-3">
                                <div>
                                    <span class="input-sublabel">R (0-255)</span>
                                    <input type="number" id="rValue" min="0" max="255" value="74" class="input-field">
                                </div>
                                <div>
                                    <span class="input-sublabel">G (0-255)</span>
                                    <input type="number" id="gValue" min="0" max="255" value="158" class="input-field">
                                </div>
                                <div>
                                    <span class="input-sublabel">B (0-255)</span>
                                    <input type="number" id="bValue" min="0" max="255" value="255" class="input-field">
                                </div>
                            </div>
                        </div>

                        <!-- HSL Input -->
                        <div id="hslInput" class="input-group hidden">
                            <label class="input-label">HSL Color</label>
                            <div class="grid-3">
                                <div>
                                    <span class="input-sublabel">H (0-360)</span>
                                    <input type="number" id="hValue" min="0" max="360" value="212" class="input-field">
                                </div>
                                <div>
                                    <span class="input-sublabel">S (0-100%)</span>
                                    <input type="number" id="sValue" min="0" max="100" value="100" class="input-field">
                                </div>
                                <div>
                                    <span class="input-sublabel">L (0-100%)</span>
                                    <input type="number" id="lValue" min="0" max="100" value="65" class="input-field">
                                </div>
                            </div>
                        </div>

                        <!-- CMYK Input -->
                        <div id="cmykInput" class="input-group hidden">
                            <label class="input-label">CMYK Color</label>
                            <div class="grid-4">
                                <div>
                                    <span class="input-sublabel">C %</span>
                                    <input type="number" id="cValue" min="0" max="100" value="71" class="input-field">
                                </div>
                                <div>
                                    <span class="input-sublabel">M %</span>
                                    <input type="number" id="mValue" min="0" max="100" value="38" class="input-field">
                                </div>
                                <div>
                                    <span class="input-sublabel">Y %</span>
                                    <input type="number" id="yValue" min="0" max="100" value="0" class="input-field">
                                </div>
                                <div>
                                    <span class="input-sublabel">K %</span>
                                    <input type="number" id="kValue" min="0" max="100" value="0" class="input-field">
                                </div>
                            </div>
                        </div>

                        <!-- Alpha Slider -->
                        <div class="mt-6">
                            <div class="flex justify-between mb-2">
                                <label for="alphaSlider" class="input-label" style="margin-bottom: 0;">Opacity</label>
                                <span id="alphaDisplay" class="text-sm"
                                    style="color: var(--text-secondary);">100%</span>
                            </div>
                            <input type="range" id="alphaSlider" min="0" max="100" value="100" class="slider-track"
                                aria-label="Opacity slider">
                        </div>
                    </div>

                    <!-- Output Section -->
                    <div class="card">
                        <h2 class="section-title">All Formats</h2>

                        <div class="space-y-3">
                            <div class="color-output">
                                <div>
                                    <span class="color-output-label">HEX</span>
                                    <code id="outputHex" class="color-output-value">#4a9eff</code>
                                </div>
                                <button data-copy-target="outputHex" class="copy-btn">Copy</button>
                            </div>

                            <div class="color-output">
                                <div>
                                    <span class="color-output-label">HEXA</span>
                                    <code id="outputHexa" class="color-output-value">#4a9effff</code>
                                </div>
                                <button data-copy-target="outputHexa" class="copy-btn">Copy</button>
                            </div>

                            <div class="color-output">
                                <div>
                                    <span class="color-output-label">RGB</span>
                                    <code id="outputRgb" class="color-output-value">rgb(74, 158, 255)</code>
                                </div>
                                <button data-copy-target="outputRgb" class="copy-btn">Copy</button>
                            </div>

                            <div class="color-output">
                                <div>
                                    <span class="color-output-label">RGBA</span>
                                    <code id="outputRgba" class="color-output-value">rgba(74, 158, 255, 1)</code>
                                </div>
                                <button data-copy-target="outputRgba" class="copy-btn">Copy</button>
                            </div>

                            <div class="color-output">
                                <div>
                                    <span class="color-output-label">HSL</span>
                                    <code id="outputHsl" class="color-output-value">hsl(212, 100%, 65%)</code>
                                </div>
                                <button data-copy-target="outputHsl" class="copy-btn">Copy</button>
                            </div>

                            <div class="color-output">
                                <div>
                                    <span class="color-output-label">HSLA</span>
                                    <code id="outputHsla" class="color-output-value">hsla(212, 100%, 65%, 1)</code>
                                </div>
                                <button data-copy-target="outputHsla" class="copy-btn">Copy</button>
                            </div>

                            <div class="color-output">
                                <div>
                                    <span class="color-output-label">CMYK</span>
                                    <code id="outputCmyk" class="color-output-value">cmyk(71%, 38%, 0%, 0%)</code>
                                </div>
                                <button data-copy-target="outputCmyk" class="copy-btn">Copy</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- History Section -->
                <div class="card mt-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="section-title" style="margin-bottom: 0;">Recent Colors</h2>
                        <button id="clearHistory" class="clear-btn">Clear history</button>
                    </div>
                    <div id="colorHistory" class="flex flex-wrap gap-2">
                        <p style="color: #505050; font-size: 0.85rem;">Your color history will appear here</p>
                    </div>
                </div>
            </div>

            <!-- Color Picker Tab -->
            <div id="picker" class="tab-content" role="tabpanel" aria-labelledby="tab-picker" hidden>
                <div class="card">
                    <h2 class="section-title">Advanced Color Picker</h2>

                    <div class="grid-2">
                        <div>
                            <div id="pickerPreview" class="w-full h-48 rounded-lg mb-4"
                                style="background: #4a9eff; border: 1px solid var(--border-color);"></div>
                            <input type="color" id="advancedPicker" value="#4a9eff" class="w-full h-14 rounded-lg"
                                style="cursor: pointer; border: 1px solid var(--border-color);"
                                aria-label="Advanced color picker">
                        </div>

                        <div class="space-y-6">
                            <div>
                                <div class="flex justify-between mb-2">
                                    <label for="redSlider" class="input-label" style="margin-bottom: 0;">Red</label>
                                    <span id="redDisplay"
                                        style="color: var(--text-secondary); font-size: 0.85rem;">74</span>
                                </div>
                                <input type="range" id="redSlider" min="0" max="255" value="74" class="slider-track"
                                    style="background: linear-gradient(90deg, #000, #f00);" aria-label="Red slider">
                            </div>
                            <div>
                                <div class="flex justify-between mb-2">
                                    <label for="greenSlider" class="input-label" style="margin-bottom: 0;">Green</label>
                                    <span id="greenDisplay"
                                        style="color: var(--text-secondary); font-size: 0.85rem;">158</span>
                                </div>
                                <input type="range" id="greenSlider" min="0" max="255" value="158" class="slider-track"
                                    style="background: linear-gradient(90deg, #000, #0f0);" aria-label="Green slider">
                            </div>
                            <div>
                                <div class="flex justify-between mb-2">
                                    <label for="blueSlider" class="input-label" style="margin-bottom: 0;">Blue</label>
                                    <span id="blueDisplay"
                                        style="color: var(--text-secondary); font-size: 0.85rem;">255</span>
                                </div>
                                <input type="range" id="blueSlider" min="0" max="255" value="255" class="slider-track"
                                    style="background: linear-gradient(90deg, #000, #00f);" aria-label="Blue slider">
                            </div>

                            <div class="divider"></div>

                            <div class="color-output">
                                <div>
                                    <span class="color-output-label">Selected Color</span>
                                    <code id="pickerOutput" class="color-output-value">#4a9eff</code>
                                </div>
                                <button data-copy-target="pickerOutput" class="copy-btn">Copy</button>
                            </div>

                            <button id="applyToConverter" class="btn-primary w-full">Apply to Converter</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Palette Generator Tab -->
            <div id="palette" class="tab-content" role="tabpanel" aria-labelledby="tab-palette" hidden>
                <div class="card">
                    <h2 class="section-title">Palette Generator</h2>

                    <div class="flex flex-wrap gap-4 mb-6 items-end">
                        <div>
                            <label for="paletteBase" class="input-label">Base Color</label>
                            <input type="color" id="paletteBase" value="#4a9eff" class="color-input-native"
                                style="width: 64px; height: 40px;" aria-label="Base color for palette">
                        </div>
                        <div>
                            <label for="paletteType" class="input-label">Harmony Type</label>
                            <select id="paletteType">
                                <option value="analogous">Analogous</option>
                                <option value="complementary">Complementary</option>
                                <option value="triadic">Triadic</option>
                                <option value="tetradic">Tetradic</option>
                                <option value="splitComplementary">Split Complementary</option>
                                <option value="monochromatic">Monochromatic</option>
                            </select>
                        </div>
                        <button id="generatePalette" class="btn-primary">Generate</button>
                        <button id="randomPalette" class="btn-secondary">Random</button>
                    </div>

                    <div id="paletteDisplay" class="grid-5 mb-6"></div>

                    <div class="divider"></div>

                    <h3 class="section-title">Shades and Tints</h3>
                    <div id="shadesDisplay" class="grid-10"></div>
                </div>
            </div>

            <!-- Gradient Maker Tab -->
            <div id="gradient" class="tab-content" role="tabpanel" aria-labelledby="tab-gradient" hidden>
                <div class="card">
                    <h2 class="section-title">Gradient Maker</h2>

                    <div id="gradientPreview" class="w-full h-40 rounded-lg mb-6"
                        style="background: linear-gradient(90deg, #4a9eff, #34a853); border: 1px solid var(--border-color);">
                    </div>

                    <div class="grid-4 mb-6">
                        <div>
                            <label for="gradColor1" class="input-label">Color 1</label>
                            <input type="color" id="gradColor1" value="#4a9eff" class="w-full h-12 rounded-lg"
                                style="cursor: pointer; border: 1px solid var(--border-color);"
                                aria-label="Gradient color 1">
                        </div>
                        <div>
                            <label for="gradColor2" class="input-label">Color 2</label>
                            <input type="color" id="gradColor2" value="#34a853" class="w-full h-12 rounded-lg"
                                style="cursor: pointer; border: 1px solid var(--border-color);"
                                aria-label="Gradient color 2">
                        </div>
                        <div>
                            <label for="gradColor3" class="input-label">Color 3 (Optional)</label>
                            <input type="color" id="gradColor3" value="#fbbc05" class="w-full h-12 rounded-lg"
                                style="cursor: pointer; border: 1px solid var(--border-color);"
                                aria-label="Gradient color 3">
                            <label class="flex items-center gap-2 mt-2" style="cursor: pointer;">
                                <input type="checkbox" id="useColor3"
                                    style="accent-color: #4a9eff; width: 16px; height: 16px;">
                                <span style="font-size: 0.8rem; color: var(--text-tertiary);">Enable</span>
                            </label>
                        </div>
                        <div>
                            <label for="gradDirection" class="input-label">Direction</label>
                            <select id="gradDirection" class="w-full">
                                <option value="90deg">Left to Right</option>
                                <option value="180deg">Top to Bottom</option>
                                <option value="45deg">Diagonal (45deg)</option>
                                <option value="135deg">Diagonal (135deg)</option>
                                <option value="270deg">Right to Left</option>
                                <option value="0deg">Bottom to Top</option>
                                <option value="radial">Radial</option>
                            </select>
                        </div>
                    </div>

                    <div class="color-output">
                        <div class="flex-1 overflow-hidden">
                            <span class="color-output-label">CSS Code</span>
                            <code id="gradientCode"
                                class="color-output-value break-all">background: linear-gradient(90deg, #4a9eff, #34a853);</code>
                        </div>
                        <button data-copy-target="gradientCode" class="copy-btn"
                            style="margin-left: 1rem;">Copy</button>
                    </div>
                </div>
            </div>

            <!-- Contrast Checker Tab -->
            <div id="contrast" class="tab-content" role="tabpanel" aria-labelledby="tab-contrast" hidden>
                <div class="card">
                    <h2 class="section-title">WCAG Contrast Checker</h2>

                    <div class="grid-2 mb-6">
                        <div>
                            <label for="textColor" class="input-label">Text Color</label>
                            <div class="flex gap-3">
                                <input type="color" id="textColor" value="#ffffff" class="w-full h-12 rounded-lg flex-1"
                                    style="cursor: pointer; border: 1px solid var(--border-color);"
                                    aria-label="Text color">
                                <button id="swapColors" class="btn-secondary" title="Swap Colors">Swap</button>
                            </div>
                        </div>
                        <div>
                            <label for="bgColor" class="input-label">Background Color</label>
                            <input type="color" id="bgColor" value="#4a9eff" class="w-full h-12 rounded-lg"
                                style="cursor: pointer; border: 1px solid var(--border-color);"
                                aria-label="Background color">
                        </div>
                    </div>

                    <div id="contrastPreview" class="rounded-lg mb-6 text-center"
                        style="background: #4a9eff; padding: 2rem; border: 1px solid var(--border-color);">
                        <p class="text-3xl font-bold" style="color: #ffffff;">Sample Text</p>
                        <p class="text-sm mt-4" style="color: #ffffff;">The quick brown fox jumps over the lazy dog</p>
                    </div>

                    <div class="grid-5 mb-6">
                        <div class="color-output" style="flex-direction: column; align-items: flex-start;">
                            <span class="color-output-label">Contrast Ratio</span>
                            <span id="contrastRatio" class="text-xl font-bold"
                                style="color: var(--text-primary);">2.48:1</span>
                        </div>
                        <div class="color-output" style="flex-direction: column; align-items: flex-start;">
                            <span class="color-output-label">Normal (AA)</span>
                            <span id="normalAA" class="contrast-badge contrast-fail">Fail</span>
                        </div>
                        <div class="color-output" style="flex-direction: column; align-items: flex-start;">
                            <span class="color-output-label">Normal (AAA)</span>
                            <span id="normalAAA" class="contrast-badge contrast-fail">Fail</span>
                        </div>
                        <div class="color-output" style="flex-direction: column; align-items: flex-start;">
                            <span class="color-output-label">Large (AA)</span>
                            <span id="largeAA" class="contrast-badge contrast-fail">Fail</span>
                        </div>
                        <div class="color-output" style="flex-direction: column; align-items: flex-start;">
                            <span class="color-output-label">Large (AAA)</span>
                            <span id="largeAAA" class="contrast-badge contrast-fail">Fail</span>
                        </div>
                    </div>

                    <div class="info-box">
                        <h3>WCAG 2.1 Guidelines</h3>
                        <ul>
                            <li><span>Normal AA:</span> Minimum ratio 4.5:1 for regular text</li>
                            <li><span>Normal AAA:</span> Minimum ratio 7:1 for enhanced accessibility</li>
                            <li><span>Large AA:</span> Minimum ratio 3:1 (18pt+ or 14pt bold)</li>
                            <li><span>Large AAA:</span> Minimum ratio 4.5:1 for large text enhanced</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            ChromaLab Pro - Ultimate Color Toolkit
        </footer>
    </div>

    <script>
        // ChromaLab Pro - Modular Production Version
        (function () {
            'use strict';

            // ==================== STATE MANAGEMENT ====================
            const appState = {
                color: { r: 74, g: 158, b: 255 },
                alpha: 1,
                history: [],
                currentTab: 'converter'
            };

            // ==================== DOM ELEMENTS ====================
            const elements = {
                // Converter
                colorPreview: document.getElementById('colorPreview'),
                hexValue: document.getElementById('hexValue'),
                colorPicker: document.getElementById('colorPicker'),
                rValue: document.getElementById('rValue'),
                gValue: document.getElementById('gValue'),
                bValue: document.getElementById('bValue'),
                hValue: document.getElementById('hValue'),
                sValue: document.getElementById('sValue'),
                lValue: document.getElementById('lValue'),
                cValue: document.getElementById('cValue'),
                mValue: document.getElementById('mValue'),
                yValue: document.getElementById('yValue'),
                kValue: document.getElementById('kValue'),
                alphaSlider: document.getElementById('alphaSlider'),
                alphaDisplay: document.getElementById('alphaDisplay'),

                // Outputs
                outputHex: document.getElementById('outputHex'),
                outputHexa: document.getElementById('outputHexa'),
                outputRgb: document.getElementById('outputRgb'),
                outputRgba: document.getElementById('outputRgba'),
                outputHsl: document.getElementById('outputHsl'),
                outputHsla: document.getElementById('outputHsla'),
                outputCmyk: document.getElementById('outputCmyk'),

                // Tabs
                tabButtons: document.querySelectorAll('.tab-btn'),
                tabContents: document.querySelectorAll('.tab-content'),

                // History
                colorHistory: document.getElementById('colorHistory'),

                // Color Picker
                pickerPreview: document.getElementById('pickerPreview'),
                advancedPicker: document.getElementById('advancedPicker'),
                redSlider: document.getElementById('redSlider'),
                greenSlider: document.getElementById('greenSlider'),
                blueSlider: document.getElementById('blueSlider'),
                redDisplay: document.getElementById('redDisplay'),
                greenDisplay: document.getElementById('greenDisplay'),
                blueDisplay: document.getElementById('blueDisplay'),
                pickerOutput: document.getElementById('pickerOutput'),

                // Palette Generator
                paletteBase: document.getElementById('paletteBase'),
                paletteType: document.getElementById('paletteType'),
                paletteDisplay: document.getElementById('paletteDisplay'),
                shadesDisplay: document.getElementById('shadesDisplay'),

                // Gradient Maker
                gradientPreview: document.getElementById('gradientPreview'),
                gradColor1: document.getElementById('gradColor1'),
                gradColor2: document.getElementById('gradColor2'),
                gradColor3: document.getElementById('gradColor3'),
                useColor3: document.getElementById('useColor3'),
                gradDirection: document.getElementById('gradDirection'),
                gradientCode: document.getElementById('gradientCode'),

                // Contrast Checker
                textColor: document.getElementById('textColor'),
                bgColor: document.getElementById('bgColor'),
                contrastPreview: document.getElementById('contrastPreview'),
                contrastRatio: document.getElementById('contrastRatio'),
                normalAA: document.getElementById('normalAA'),
                normalAAA: document.getElementById('normalAAA'),
                largeAA: document.getElementById('largeAA'),
                largeAAA: document.getElementById('largeAAA')
            };

            // ==================== UTILITY FUNCTIONS ====================
            const utils = {
                clamp: (val, min, max) => Math.max(min, Math.min(max, val)),

                showToast: (message) => {
                    const toast = document.getElementById('toast');
                    toast.textContent = message;
                    toast.classList.add('show');
                    clearTimeout(toast.hideTimeout);
                    toast.hideTimeout = setTimeout(() => {
                        toast.classList.remove('show');
                    }, 2000);
                },

                debounce: (func, wait) => {
                    let timeout;
                    return function executedFunction(...args) {
                        const later = () => {
                            clearTimeout(timeout);
                            func(...args);
                        };
                        clearTimeout(timeout);
                        timeout = setTimeout(later, wait);
                    };
                }
            };

            // ==================== COLOR CONVERSIONS ====================
            const colorConverter = {
                hexToRgb: (hex) => {
                    if (!hex || typeof hex !== 'string') return null;

                    hex = hex.trim().replace(/^#/, '');

                    // Handle shorthand hex
                    if (hex.length === 3) {
                        hex = hex.split('').map(c => c + c).join('');
                    }

                    // Handle hex with alpha (8 chars) - preserve alpha
                    let alpha = 1;
                    if (hex.length === 8) {
                        const alphaHex = hex.substring(6, 8);
                        alpha = parseInt(alphaHex, 16) / 255;
                        hex = hex.substring(0, 6);
                    }

                    if (hex.length !== 6) return null;

                    if (!/^[0-9A-Fa-f]{6}$/.test(hex)) return null;

                    const r = parseInt(hex.substring(0, 2), 16);
                    const g = parseInt(hex.substring(2, 4), 16);
                    const b = parseInt(hex.substring(4, 6), 16);

                    return { r, g, b, alpha };
                },

                rgbToHex: (r, g, b, alpha = 1) => {
                    r = utils.clamp(Math.round(r), 0, 255);
                    g = utils.clamp(Math.round(g), 0, 255);
                    b = utils.clamp(Math.round(b), 0, 255);
                    const hex = '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('').toLowerCase();

                    if (alpha < 1) {
                        const alphaHex = Math.round(alpha * 255).toString(16).padStart(2, '0');
                        return hex + alphaHex;
                    }
                    return hex;
                },

                rgbToHsl: (r, g, b) => {
                    r /= 255; g /= 255; b /= 255;
                    const max = Math.max(r, g, b);
                    const min = Math.min(r, g, b);
                    let h = 0, s = 0;
                    const l = (max + min) / 2;

                    if (max !== min) {
                        const d = max - min;
                        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                        switch (max) {
                            case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                            case g: h = (b - r) / d + 2; break;
                            case b: h = (r - g) / d + 4; break;
                        }
                        h /= 6;
                    }
                    return {
                        h: Math.round(h * 360),
                        s: Math.round(s * 100),
                        l: Math.round(l * 100)
                    };
                },

                hslToRgb: (h, s, l) => {
                    h = ((h % 360) + 360) % 360;
                    s = utils.clamp(s, 0, 100) / 100;
                    l = utils.clamp(l, 0, 100) / 100;

                    if (s === 0) {
                        const val = Math.round(l * 255);
                        return { r: val, g: val, b: val };
                    }

                    const hue2rgb = (p, q, t) => {
                        if (t < 0) t += 1;
                        if (t > 1) t -= 1;
                        if (t < 1 / 6) return p + (q - p) * 6 * t;
                        if (t < 1 / 2) return q;
                        if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
                        return p;
                    };

                    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                    const p = 2 * l - q;
                    const hk = h / 360;

                    return {
                        r: Math.round(hue2rgb(p, q, hk + 1 / 3) * 255),
                        g: Math.round(hue2rgb(p, q, hk) * 255),
                        b: Math.round(hue2rgb(p, q, hk - 1 / 3) * 255)
                    };
                },

                rgbToCmyk: (r, g, b) => {
                    r /= 255; g /= 255; b /= 255;
                    const k = 1 - Math.max(r, g, b);
                    if (k === 1) return { c: 0, m: 0, y: 0, k: 100 };
                    return {
                        c: Math.round(((1 - r - k) / (1 - k)) * 100),
                        m: Math.round(((1 - g - k) / (1 - k)) * 100),
                        y: Math.round(((1 - b - k) / (1 - k)) * 100),
                        k: Math.round(k * 100)
                    };
                },

                cmykToRgb: (c, m, y, k) => {
                    c = utils.clamp(c, 0, 100) / 100;
                    m = utils.clamp(m, 0, 100) / 100;
                    y = utils.clamp(y, 0, 100) / 100;
                    k = utils.clamp(k, 0, 100) / 100;
                    return {
                        r: Math.round(255 * (1 - c) * (1 - k)),
                        g: Math.round(255 * (1 - m) * (1 - k)),
                        b: Math.round(255 * (1 - y) * (1 - k))
                    };
                },

                getLuminance: (r, g, b) => {
                    const [rs, gs, bs] = [r, g, b].map(c => {
                        c /= 255;
                        return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
                    });
                    return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;
                },

                calculateContrast: (rgb1, rgb2) => {
                    const l1 = colorConverter.getLuminance(rgb1.r, rgb1.g, rgb1.b);
                    const l2 = colorConverter.getLuminance(rgb2.r, rgb2.g, rgb2.b);
                    return (Math.max(l1, l2) + 0.05) / (Math.min(l1, l2) + 0.05);
                }
            };

            // ==================== STATE UPDATERS ====================
            const stateUpdaters = {
                updateColor: (color, alpha = appState.alpha) => {
                    appState.color = color;
                    appState.alpha = alpha;
                    uiUpdaters.updateAllOutputs();
                    historyManager.addToHistory(colorConverter.rgbToHex(color.r, color.g, color.b));
                },

                updateAlpha: (alpha) => {
                    appState.alpha = utils.clamp(alpha, 0, 1);
                    uiUpdaters.updateAllOutputs();
                }
            };

            // ==================== UI UPDATERS ====================
            const uiUpdaters = {
                updateAllOutputs: () => {
                    const { r, g, b } = appState.color;
                    const hex = colorConverter.rgbToHex(r, g, b);
                    const hsl = colorConverter.rgbToHsl(r, g, b);
                    const cmyk = colorConverter.rgbToCmyk(r, g, b);
                    const alphaHex = Math.round(appState.alpha * 255).toString(16).padStart(2, '0');

                    // Update preview
                    elements.colorPreview.style.background = `rgba(${r},${g},${b},${appState.alpha})`;
                    elements.colorPicker.value = hex;

                    // Update outputs
                    elements.outputHex.textContent = hex;
                    elements.outputHexa.textContent = hex + alphaHex;
                    elements.outputRgb.textContent = `rgb(${r}, ${g}, ${b})`;
                    elements.outputRgba.textContent = `rgba(${r}, ${g}, ${b}, ${appState.alpha})`;
                    elements.outputHsl.textContent = `hsl(${hsl.h}, ${hsl.s}%, ${hsl.l}%)`;
                    elements.outputHsla.textContent = `hsla(${hsl.h}, ${hsl.s}%, ${hsl.l}%, ${appState.alpha})`;
                    elements.outputCmyk.textContent = `cmyk(${cmyk.c}%, ${cmyk.m}%, ${cmyk.y}%, ${cmyk.k}%)`;

                    // Update input fields
                    elements.hexValue.value = hex;
                    elements.rValue.value = r;
                    elements.gValue.value = g;
                    elements.bValue.value = b;
                    elements.hValue.value = hsl.h;
                    elements.sValue.value = hsl.s;
                    elements.lValue.value = hsl.l;
                    elements.cValue.value = cmyk.c;
                    elements.mValue.value = cmyk.m;
                    elements.yValue.value = cmyk.y;
                    elements.kValue.value = cmyk.k;
                    elements.alphaDisplay.textContent = Math.round(appState.alpha * 100) + '%';

                    // Sync picker tab
                    uiUpdaters.syncPickerTab(r, g, b, hex);
                },

                syncPickerTab: (r, g, b, hex) => {
                    elements.redSlider.value = r;
                    elements.greenSlider.value = g;
                    elements.blueSlider.value = b;
                    elements.redDisplay.textContent = r;
                    elements.greenDisplay.textContent = g;
                    elements.blueDisplay.textContent = b;
                    elements.pickerPreview.style.background = hex;
                    elements.advancedPicker.value = hex;
                    elements.pickerOutput.textContent = hex;
                },

                updateFromSliders: () => {
                    const r = parseInt(elements.redSlider.value);
                    const g = parseInt(elements.greenSlider.value);
                    const b = parseInt(elements.blueSlider.value);

                    elements.redDisplay.textContent = r;
                    elements.greenDisplay.textContent = g;
                    elements.blueDisplay.textContent = b;

                    const hex = colorConverter.rgbToHex(r, g, b);
                    elements.pickerPreview.style.background = hex;
                    elements.advancedPicker.value = hex;
                    elements.pickerOutput.textContent = hex;
                },

                updatePickerColor: (hex) => {
                    const result = colorConverter.hexToRgb(hex);
                    if (result) {
                        elements.redSlider.value = result.r;
                        elements.greenSlider.value = result.g;
                        elements.blueSlider.value = result.b;
                        uiUpdaters.updateFromSliders();
                    }
                },

                applyPickerToConverter: () => {
                    const hex = elements.pickerOutput.textContent;
                    elements.hexValue.value = hex;
                    const rgb = colorConverter.hexToRgb(hex);
                    if (rgb) {
                        stateUpdaters.updateColor({ r: rgb.r, g: rgb.g, b: rgb.b });
                    }
                    tabManager.switchTab('converter');
                    utils.showToast('Color applied to converter');
                },

                generatePalettes: () => {
                    const baseHex = elements.paletteBase.value;
                    const type = elements.paletteType.value;
                    const result = colorConverter.hexToRgb(baseHex);
                    if (!result) return;

                    const baseRgb = { r: result.r, g: result.g, b: result.b };
                    const baseHsl = colorConverter.rgbToHsl(baseRgb.r, baseRgb.g, baseRgb.b);
                    let colors = [];

                    switch (type) {
                        case 'analogous':
                            for (let i = -2; i <= 2; i++) {
                                const h = (baseHsl.h + i * 30 + 360) % 360;
                                colors.push(colorConverter.hslToRgb(h, baseHsl.s, baseHsl.l));
                            }
                            break;
                        case 'complementary':
                            colors.push(baseRgb);
                            colors.push(colorConverter.hslToRgb((baseHsl.h + 180) % 360, baseHsl.s, baseHsl.l));
                            colors.push(colorConverter.hslToRgb((baseHsl.h + 180) % 360, baseHsl.s, utils.clamp(baseHsl.l + 20, 0, 100)));
                            colors.push(colorConverter.hslToRgb(baseHsl.h, baseHsl.s, utils.clamp(baseHsl.l + 20, 0, 100)));
                            colors.push(colorConverter.hslToRgb(baseHsl.h, baseHsl.s, utils.clamp(baseHsl.l - 20, 0, 100)));
                            break;
                        case 'triadic':
                            for (let i = 0; i < 3; i++) {
                                const h = (baseHsl.h + i * 120) % 360;
                                colors.push(colorConverter.hslToRgb(h, baseHsl.s, baseHsl.l));
                            }
                            colors.push(colorConverter.hslToRgb(baseHsl.h, baseHsl.s, utils.clamp(baseHsl.l + 15, 0, 100)));
                            colors.push(colorConverter.hslToRgb(baseHsl.h, baseHsl.s, utils.clamp(baseHsl.l - 15, 0, 100)));
                            break;
                        case 'tetradic':
                            for (let i = 0; i < 4; i++) {
                                const h = (baseHsl.h + i * 90) % 360;
                                colors.push(colorConverter.hslToRgb(h, baseHsl.s, baseHsl.l));
                            }
                            colors.push(colorConverter.hslToRgb(baseHsl.h, baseHsl.s, utils.clamp(baseHsl.l + 20, 0, 100)));
                            break;
                        case 'splitComplementary':
                            colors.push(baseRgb);
                            colors.push(colorConverter.hslToRgb((baseHsl.h + 150) % 360, baseHsl.s, baseHsl.l));
                            colors.push(colorConverter.hslToRgb((baseHsl.h + 210) % 360, baseHsl.s, baseHsl.l));
                            colors.push(colorConverter.hslToRgb(baseHsl.h, baseHsl.s, utils.clamp(baseHsl.l + 20, 0, 100)));
                            colors.push(colorConverter.hslToRgb(baseHsl.h, baseHsl.s, utils.clamp(baseHsl.l - 20, 0, 100)));
                            break;
                        case 'monochromatic':
                            for (let i = 0; i < 5; i++) {
                                const l = 20 + i * 15;
                                colors.push(colorConverter.hslToRgb(baseHsl.h, baseHsl.s, l));
                            }
                            break;
                    }

                    const paletteHtml = colors.map(c => {
                        const hex = colorConverter.rgbToHex(c.r, c.g, c.b);
                        return `
                            <div class="text-center">
                                <div class="w-full h-20 palette-swatch" style="background: ${hex};" data-hex="${hex}" aria-label="Palette color ${hex}" role="button"></div>
                                <code style="font-size: 0.75rem; color: var(--text-tertiary); margin-top: 0.5rem; display: block;">${hex}</code>
                            </div>
                        `;
                    }).join('');

                    elements.paletteDisplay.innerHTML = paletteHtml;

                    // Generate shades
                    let shades = [];
                    for (let i = 0; i < 10; i++) {
                        const l = 5 + i * 10;
                        shades.push(colorConverter.hslToRgb(baseHsl.h, baseHsl.s, l));
                    }

                    elements.shadesDisplay.innerHTML = shades.map(c => {
                        const hex = colorConverter.rgbToHex(c.r, c.g, c.b);
                        return `<div class="h-10 rounded-lg palette-swatch" style="background: ${hex};" data-hex="${hex}" aria-label="Shade color ${hex}" role="button"></div>`;
                    }).join('');
                },

                randomBasePalette: () => {
                    const randomHex = '#' + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0');
                    elements.paletteBase.value = randomHex;
                    uiUpdaters.generatePalettes();
                },

                updateGradient: () => {
                    const color1 = elements.gradColor1.value;
                    const color2 = elements.gradColor2.value;
                    const color3 = elements.gradColor3.value;
                    const useColor3 = elements.useColor3.checked;
                    const direction = elements.gradDirection.value;

                    const gradientColors = useColor3 ? `${color1}, ${color2}, ${color3}` : `${color1}, ${color2}`;
                    let gradient, code;

                    if (direction === 'radial') {
                        gradient = `radial-gradient(circle, ${gradientColors})`;
                        code = `background: radial-gradient(circle, ${gradientColors});`;
                    } else {
                        gradient = `linear-gradient(${direction}, ${gradientColors})`;
                        code = `background: linear-gradient(${direction}, ${gradientColors});`;
                    }

                    elements.gradientPreview.style.background = gradient;
                    elements.gradientCode.textContent = code;
                },

                checkContrast: () => {
                    const textHex = elements.textColor.value;
                    const bgHex = elements.bgColor.value;

                    const textRgb = colorConverter.hexToRgb(textHex);
                    const bgRgb = colorConverter.hexToRgb(bgHex);

                    if (!textRgb || !bgRgb) return;

                    const ratio = colorConverter.calculateContrast(textRgb, bgRgb);

                    elements.contrastPreview.style.background = bgHex;
                    elements.contrastPreview.querySelectorAll('p').forEach(p => p.style.color = textHex);
                    elements.contrastRatio.textContent = ratio.toFixed(2) + ':1';

                    // WCAG checks
                    const normalAA = ratio >= 4.5;
                    const normalAAA = ratio >= 7;
                    const largeAA = ratio >= 3;
                    const largeAAA = ratio >= 4.5;

                    const updateBadge = (el, pass) => {
                        el.className = `contrast-badge ${pass ? 'contrast-pass' : 'contrast-fail'}`;
                        el.textContent = pass ? 'Pass' : 'Fail';
                    };

                    updateBadge(elements.normalAA, normalAA);
                    updateBadge(elements.normalAAA, normalAAA);
                    updateBadge(elements.largeAA, largeAA);
                    updateBadge(elements.largeAAA, largeAAA);
                },

                swapContrastColors: () => {
                    const textColor = elements.textColor.value;
                    const bgColor = elements.bgColor.value;
                    elements.textColor.value = bgColor;
                    elements.bgColor.value = textColor;
                    uiUpdaters.checkContrast();
                }
            };

            // ==================== TAB MANAGER ====================
            const tabManager = {
                switchTab: (tabName) => {
                    // Hide all tab panels
                    elements.tabContents.forEach(tab => {
                        tab.classList.remove('active');
                        tab.setAttribute('hidden', 'true');
                    });

                    // Deactivate all tab buttons
                    elements.tabButtons.forEach(btn => {
                        btn.classList.remove('active');
                        btn.setAttribute('aria-selected', 'false');
                    });

                    // Show selected tab panel
                    const activePanel = document.getElementById(tabName);
                    const activeButton = document.getElementById('tab-' + tabName);

                    if (activePanel && activeButton) {
                        activePanel.classList.add('active');
                        activePanel.removeAttribute('hidden');
                        activeButton.classList.add('active');
                        activeButton.setAttribute('aria-selected', 'true');

                        appState.currentTab = tabName;

                        // Focus first focusable element in tab
                        setTimeout(() => {
                            const focusable = activePanel.querySelector('button, input, select');
                            if (focusable) focusable.focus();
                        }, 10);
                    }
                },

                setupKeyboardNavigation: () => {
                    document.addEventListener('keydown', (e) => {
                        const tabs = Array.from(elements.tabButtons);
                        const currentIndex = tabs.findIndex(tab => tab.classList.contains('active'));

                        if (e.target.matches('input, select, textarea')) {
                            return; // Don't interfere with form inputs
                        }

                        if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
                            let nextIndex;

                            if (e.key === 'ArrowRight') {
                                nextIndex = (currentIndex + 1) % tabs.length;
                            } else {
                                nextIndex = (currentIndex - 1 + tabs.length) % tabs.length;
                            }

                            tabs[nextIndex].click();
                            tabs[nextIndex].focus();
                            e.preventDefault();
                        } else if (e.key === 'Home') {
                            tabs[0].click();
                            tabs[0].focus();
                            e.preventDefault();
                        } else if (e.key === 'End') {
                            tabs[tabs.length - 1].click();
                            tabs[tabs.length - 1].focus();
                            e.preventDefault();
                        }
                    });
                }
            };

            // ==================== HISTORY MANAGER ====================
            const historyManager = {
                getStoredHistory: () => {
                    try {
                        const stored = localStorage.getItem('chromaLabHistory');
                        return stored ? JSON.parse(stored) : [];
                    } catch (e) {
                        return [];
                    }
                },

                saveHistory: () => {
                    try {
                        localStorage.setItem('chromaLabHistory', JSON.stringify(appState.history));
                    } catch (e) {
                        // localStorage not available
                    }
                },

                addToHistory: utils.debounce((hex) => {
                    hex = hex.toLowerCase();

                    if (appState.history.length > 0 && appState.history[0] === hex) return;

                    const existingIndex = appState.history.indexOf(hex);
                    if (existingIndex > -1) {
                        appState.history.splice(existingIndex, 1);
                    }

                    appState.history.unshift(hex);
                    if (appState.history.length > 24) {
                        appState.history.pop();
                    }

                    historyManager.saveHistory();
                    historyManager.renderHistory();
                }, 300),

                renderHistory: () => {
                    if (appState.history.length === 0) {
                        elements.colorHistory.innerHTML = '<p style="color: #505050; font-size: 0.85rem;">Your color history will appear here</p>';
                        return;
                    }

                    elements.colorHistory.innerHTML = appState.history.map(hex =>
                        `<div class="history-swatch" style="background: ${hex};" data-hex="${hex}" aria-label="Select color ${hex}" role="button"></div>`
                    ).join('');
                },

                clearHistory: () => {
                    appState.history = [];
                    try {
                        localStorage.removeItem('chromaLabHistory');
                    } catch (e) { }
                    historyManager.renderHistory();
                    utils.showToast('History cleared');
                }
            };

            // ==================== COPY MANAGER ====================
            const copyManager = {
                copyToClipboard: async (elementId, btn) => {
                    const text = document.getElementById(elementId).textContent;

                    try {
                        await navigator.clipboard.writeText(text);
                        utils.showToast('Copied: ' + text);

                        if (btn) {
                            btn.textContent = 'Copied';
                            btn.classList.add('copied');
                            setTimeout(() => {
                                btn.textContent = 'Copy';
                                btn.classList.remove('copied');
                            }, 1500);
                        }
                    } catch (err) {
                        console.error('Copy failed:', err);
                        utils.showToast('Failed to copy');
                    }
                },

                copyPaletteColor: async (hex) => {
                    try {
                        await navigator.clipboard.writeText(hex);
                        utils.showToast('Copied: ' + hex);
                    } catch (err) {
                        console.error('Copy failed:', err);
                        utils.showToast('Failed to copy');
                    }
                }
            };

            // ==================== INPUT HANDLERS ====================
            const inputHandlers = {
                convertFromHex: () => {
                    const hexInput = elements.hexValue.value.trim();
                    const result = colorConverter.hexToRgb(hexInput);
                    if (result) {
                        stateUpdaters.updateColor({ r: result.r, g: result.g, b: result.b }, result.alpha);
                    }
                },

                convertFromRgb: () => {
                    const color = {
                        r: utils.clamp(parseInt(elements.rValue.value) || 0, 0, 255),
                        g: utils.clamp(parseInt(elements.gValue.value) || 0, 0, 255),
                        b: utils.clamp(parseInt(elements.bValue.value) || 0, 0, 255)
                    };
                    stateUpdaters.updateColor(color);
                },

                convertFromHsl: () => {
                    const h = utils.clamp(parseInt(elements.hValue.value) || 0, 0, 360);
                    const s = utils.clamp(parseInt(elements.sValue.value) || 0, 0, 100);
                    const l = utils.clamp(parseInt(elements.lValue.value) || 0, 0, 100);
                    const rgb = colorConverter.hslToRgb(h, s, l);
                    stateUpdaters.updateColor(rgb);
                },

                convertFromCmyk: () => {
                    const c = utils.clamp(parseInt(elements.cValue.value) || 0, 0, 100);
                    const m = utils.clamp(parseInt(elements.mValue.value) || 0, 0, 100);
                    const y = utils.clamp(parseInt(elements.yValue.value) || 0, 0, 100);
                    const k = utils.clamp(parseInt(elements.kValue.value) || 0, 0, 100);
                    const rgb = colorConverter.cmykToRgb(c, m, y, k);
                    stateUpdaters.updateColor(rgb);
                },

                pickColor: (hex) => {
                    elements.hexValue.value = hex;
                    inputHandlers.convertFromHex();
                },

                updateAlpha: () => {
                    const alpha = parseInt(elements.alphaSlider.value) / 100;
                    stateUpdaters.updateAlpha(alpha);
                },

                setInputType: (type) => {
                    const groups = ['hexInput', 'rgbInput', 'hslInput', 'cmykInput'];
                    groups.forEach(id => {
                        document.getElementById(id).classList.add('hidden');
                    });

                    document.querySelectorAll('[id^="inputType"]').forEach(btn => {
                        btn.classList.remove('btn-primary');
                        btn.classList.add('btn-secondary');
                    });

                    const inputEl = document.getElementById(type + 'Input');
                    if (inputEl) {
                        inputEl.classList.remove('hidden');
                        const firstInput = inputEl.querySelector('input');
                        if (firstInput) firstInput.focus();
                    }

                    const btnId = 'inputType' + type.charAt(0).toUpperCase() + type.slice(1);
                    const btnEl = document.getElementById(btnId);
                    if (btnEl) {
                        btnEl.classList.add('btn-primary');
                        btnEl.classList.remove('btn-secondary');
                    }
                }
            };

            // ==================== EVENT LISTENERS ====================
            const setupEventListeners = () => {
                // Tab switching
                elements.tabButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        const tabName = btn.id.replace('tab-', '');
                        tabManager.switchTab(tabName);
                    });
                });

                // Input type switching
                document.getElementById('inputTypeHex').addEventListener('click', () => inputHandlers.setInputType('hex'));
                document.getElementById('inputTypeRgb').addEventListener('click', () => inputHandlers.setInputType('rgb'));
                document.getElementById('inputTypeHsl').addEventListener('click', () => inputHandlers.setInputType('hsl'));
                document.getElementById('inputTypeCmyk').addEventListener('click', () => inputHandlers.setInputType('cmyk'));

                // Color converter inputs
                elements.hexValue.addEventListener('input', () => inputHandlers.convertFromHex());
                elements.colorPicker.addEventListener('input', (e) => inputHandlers.pickColor(e.target.value));

                elements.rValue.addEventListener('input', () => inputHandlers.convertFromRgb());
                elements.gValue.addEventListener('input', () => inputHandlers.convertFromRgb());
                elements.bValue.addEventListener('input', () => inputHandlers.convertFromRgb());

                elements.hValue.addEventListener('input', () => inputHandlers.convertFromHsl());
                elements.sValue.addEventListener('input', () => inputHandlers.convertFromHsl());
                elements.lValue.addEventListener('input', () => inputHandlers.convertFromHsl());

                elements.cValue.addEventListener('input', () => inputHandlers.convertFromCmyk());
                elements.mValue.addEventListener('input', () => inputHandlers.convertFromCmyk());
                elements.yValue.addEventListener('input', () => inputHandlers.convertFromCmyk());
                elements.kValue.addEventListener('input', () => inputHandlers.convertFromCmyk());

                elements.alphaSlider.addEventListener('input', () => inputHandlers.updateAlpha());

                // Copy buttons
                document.addEventListener('click', (e) => {
                    if (e.target.matches('[data-copy-target]')) {
                        const targetId = e.target.getAttribute('data-copy-target');
                        copyManager.copyToClipboard(targetId, e.target);
                    }

                    // History color selection
                    if (e.target.closest('.history-swatch')) {
                        const hex = e.target.closest('.history-swatch').getAttribute('data-hex');
                        if (hex) inputHandlers.pickColor(hex);
                    }

                    // Palette color selection
                    if (e.target.closest('.palette-swatch')) {
                        const hex = e.target.closest('.palette-swatch').getAttribute('data-hex');
                        if (hex) copyManager.copyPaletteColor(hex);
                    }
                });

                // Clear history
                document.getElementById('clearHistory').addEventListener('click', () => historyManager.clearHistory());

                // Color picker
                elements.advancedPicker.addEventListener('input', (e) => uiUpdaters.updatePickerColor(e.target.value));
                elements.redSlider.addEventListener('input', () => uiUpdaters.updateFromSliders());
                elements.greenSlider.addEventListener('input', () => uiUpdaters.updateFromSliders());
                elements.blueSlider.addEventListener('input', () => uiUpdaters.updateFromSliders());
                document.getElementById('applyToConverter').addEventListener('click', () => uiUpdaters.applyPickerToConverter());

                // Palette generator
                document.getElementById('generatePalette').addEventListener('click', () => uiUpdaters.generatePalettes());
                document.getElementById('randomPalette').addEventListener('click', () => uiUpdaters.randomBasePalette());
                elements.paletteBase.addEventListener('input', () => uiUpdaters.generatePalettes());
                elements.paletteType.addEventListener('change', () => uiUpdaters.generatePalettes());

                // Gradient maker
                elements.gradColor1.addEventListener('input', () => uiUpdaters.updateGradient());
                elements.gradColor2.addEventListener('input', () => uiUpdaters.updateGradient());
                elements.gradColor3.addEventListener('input', () => uiUpdaters.updateGradient());
                elements.useColor3.addEventListener('change', () => uiUpdaters.updateGradient());
                elements.gradDirection.addEventListener('change', () => uiUpdaters.updateGradient());

                // Contrast checker
                elements.textColor.addEventListener('input', () => uiUpdaters.checkContrast());
                elements.bgColor.addEventListener('input', () => uiUpdaters.checkContrast());
                document.getElementById('swapColors').addEventListener('click', () => uiUpdaters.swapContrastColors());

                // Keyboard navigation for tabs
                tabManager.setupKeyboardNavigation();
            };

            // ==================== INITIALIZATION ====================
            const init = () => {
                // Load history
                appState.history = historyManager.getStoredHistory();
                historyManager.renderHistory();

                // Initialize UI
                uiUpdaters.updateAllOutputs();
                uiUpdaters.generatePalettes();
                uiUpdaters.checkContrast();
                uiUpdaters.updateGradient();

                // Set default input type
                inputHandlers.setInputType('hex');

                // Setup event listeners
                setupEventListeners();

                // Initial tab
                tabManager.switchTab('converter');
            };

            // Start the application
            document.addEventListener('DOMContentLoaded', init);
        })();
    </script>
</body>

</html>