<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Focusly | Adaptive Focus Training</title>
    <meta name="description" content="Premium focus endurance training system.">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/focus.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
</head>

<body class="theme-dark">
    <div id="app" class="app-container">
        <!-- Background Effects Layer -->
        <div id="ambient-layer" class="ambient-layer"></div>
        <div id="distraction-layer" class="distraction-layer"></div>

        <!-- Navigation / Header -->
        <nav class="app-nav">
            <div class="logo">Focusly<span class="dot">.</span></div>
            <div class="nav-stats">
                <span id="streak-display">ðŸ”¥ 0</span>
                <button id="btn-settings" class="icon-btn" aria-label="Settings">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                        </path>
                    </svg>
                </button>
            </div>
        </nav>

        <!-- View: Onboarding / Setup -->
        <section id="view-setup" class="view active">
            <div class="setup-container">
                <h1 class="hero-title">Train Your <br><span class="highlight">Attention Span</span></h1>
                <p class="hero-desc">Adaptive focus training that reacts to your behavior.</p>

                <div class="session-config">
                    <label class="config-label">Intention</label>
                    <input type="text" id="input-intention" class="input-text" placeholder="What are you focusing on?"
                        autocomplete="off">

                    <label class="config-label">Duration</label>
                    <div class="duration-selector">
                        <button class="dur-btn" data-time="10">10m</button>
                        <button class="dur-btn active" data-time="20">20m</button>
                        <button class="dur-btn" data-time="30">30m</button>
                        <button class="dur-btn" data-time="45">45m</button>
                    </div>

                    <label class="config-label">Mode</label>
                    <div class="mode-selector">
                        <div class="mode-option" data-mode="normal">
                            <span class="mode-name">Flow</span>
                            <span class="mode-desc">Balanced adaptation</span>
                        </div>
                        <div class="mode-option active" data-mode="training">
                            <span class="mode-name">Training</span>
                            <span class="mode-desc">High sensitivity</span>
                        </div>
                    </div>
                </div>

                <div class="action-area">
                    <button id="btn-start" class="btn-primary">Begin Session</button>
                </div>
            </div>
        </section>

        <!-- View: Breathing Intro -->
        <section id="view-breathing" class="view">
            <div class="breathing-circle">
                <div class="breath-text" id="breath-instruction">Inhale</div>
            </div>
        </section>

        <!-- View: Active Session -->
        <section id="view-session" class="view">
            <div class="focus-meter-container">
                <div class="focus-ring-outer"></div>
                <div class="focus-ring-inner"></div>
                <div class="focus-score" id="session-score">100</div>
                <div class="focus-label">STABILITY</div>
            </div>

            <div class="timer-display" id="session-timer">20:00</div>

            <div class="live-status" id="live-feedback">Maintained Focus</div>
            <div class="live-intention" id="display-intention"></div>

            <!-- Focus Check Element -->
            <div id="focus-check" class="focus-check hidden">
                <div class="check-circle"></div>
                <span>TAP</span>
            </div>
        </section>

        <!-- View: Summary -->
        <section id="view-summary" class="view">
            <div class="summary-card">
                <h2>Session Complete</h2>
                <div class="main-stat">
                    <span class="stat-value" id="final-score">94</span>
                    <span class="stat-label">Stability Score</span>
                </div>

                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="label">Duration</span>
                        <span class="value" id="summary-duration">20m</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Interruptions</span>
                        <span class="value" id="summary-interruptions">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Focus Drops</span>
                        <span class="value" id="summary-drops">2</span>
                    </div>
                </div>

                <div class="chart-area" id="session-chart">
                    <!-- Simple CSS/JS rendered chart -->
                </div>

                <button id="btn-home" class="btn-secondary">Return Home</button>
            </div>
        </section>

        <!-- Settings Modal -->
        <div id="modal-settings" class="modal">
            <div class="modal-content">
                <h3>Settings</h3>
                <div class="setting-row">
                    <span>Sound Effects</span>
                    <input type="checkbox" id="setting-sound" checked>
                </div>
                <div class="setting-row">
                    <span>Strict Mode</span>
                    <input type="checkbox" id="setting-strict">
                </div>
                <button id="btn-close-settings" class="btn-text">Close</button>
            </div>
        </div>

    </div>

    <script src="js/state.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/behavior.js"></script>
    <script src="js/session.js"></script>
    <script src="js/ui.js"></script>
</body>

</html>