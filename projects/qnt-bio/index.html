<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUANTUM BIOLOGY ¬∑ photosynthesis ¬∑ magnetoreception ¬∑ tunneling</title>
    <!-- single file ¬∑ quantum effects in living systems + coherence + avian navigation -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0f1a;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Aeonik', 'Inter', system-ui, sans-serif;
            overflow: hidden;
        }

        .quantum-bio-lab {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at 40% 30%, #1a3a2a, #030a10);
            overflow: hidden;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: block;
        }

        #chloroplastCanvas {
            z-index: 1;
            filter: drop-shadow(0 0 15px #7fff7f);
        }

        #magnetosomeCanvas {
            z-index: 2;
            mix-blend-mode: screen;
            opacity: 0.6;
            pointer-events: none;
        }

        #enzymeCanvas {
            z-index: 3;
            pointer-events: none;
            mix-blend-mode: overlay;
        }

        .bio-panel {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            background: rgba(10, 30, 20, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 2px solid rgba(100, 255, 150, 0.7);
            border-radius: 60px 60px 30px 30px;
            padding: 1.5rem 3rem;
            display: flex;
            gap: 3rem;
            color: #a0ffb0;
            box-shadow: 0 0 80px #3fff8f, 0 20px 40px black;
            pointer-events: auto;
        }

        .bio-param {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
        }

        .param-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            opacity: 0.7;
            color: #8ff;
        }

        .param-value {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #8ff, #f8f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px #f6f;
        }

        .bio-slider {
            width: 200px;
            height: 6px;
            background: #1a3a2a;
            border-radius: 3px;
            position: relative;
            margin: 10px 0;
            cursor: pointer;
        }

        .slider-fill {
            height: 100%;
            width: 50%;
            background: linear-gradient(90deg, #6f6, #f6f);
            border-radius: 3px;
            box-shadow: 0 0 20px #6f6;
        }

        .slider-handle {
            width: 22px;
            height: 22px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 30px #9f9;
            border: 3px solid #6f6;
            cursor: grab;
        }

        .bio-badge {
            position: absolute;
            top: 40px;
            left: 40px;
            z-index: 10;
            background: rgba(0, 20, 10, 0.6);
            backdrop-filter: blur(8px);
            border: 2px solid #6f6;
            border-radius: 40px;
            padding: 1rem 2.5rem;
            color: white;
            font-size: 1.6rem;
            letter-spacing: 4px;
            box-shadow: 0 0 50px #3f6;
        }

        .bio-stats {
            position: absolute;
            top: 40px;
            right: 40px;
            z-index: 10;
            display: flex;
            gap: 2rem;
        }

        .stat-card {
            background: rgba(20, 50, 30, 0.7);
            backdrop-filter: blur(8px);
            border: 2px solid #8ff;
            border-radius: 30px;
            padding: 1.2rem 2rem;
            text-align: center;
            color: #c0ffc0;
            min-width: 140px;
        }

        .stat-number {
            font-size: 2.4rem;
            font-weight: 800;
            line-height: 1;
        }

        .efficiency-meter {
            position: absolute;
            bottom: 200px;
            left: 60px;
            z-index: 10;
            width: 300px;
            height: 30px;
            background: #1a2a1a;
            border-radius: 15px;
            border: 3px solid #6f6;
            overflow: hidden;
        }

        .meter-fill {
            height: 100%;
            width: 95%;
            background: linear-gradient(90deg, #6f6, #ff6, #f6f);
            border-radius: 12px;
            box-shadow: 0 0 30px #6f6;
        }

        .quantum-effect {
            position: absolute;
            bottom: 200px;
            right: 60px;
            z-index: 10;
            background: rgba(20, 50, 30, 0.8);
            backdrop-filter: blur(4px);
            padding: 1.2rem 2rem;
            border-radius: 40px;
            border-right: 8px solid #6f6;
            color: #c0ffc0;
            font-size: 1.2rem;
            max-width: 350px;
        }
    </style>
</head>
<body>
    <div class="quantum-bio-lab">
        <canvas id="chloroplastCanvas"></canvas>
        <canvas id="magnetosomeCanvas"></canvas>
        <canvas id="enzymeCanvas"></canvas>

        <!-- quantum biology control panel -->
        <div class="bio-panel">
            <div class="bio-param">
                <span class="param-label">COHERENCE</span>
                <div class="bio-slider" id="coherenceSlider">
                    <div class="slider-fill" id="coherenceFill" style="width: 80%;"></div>
                    <div class="slider-handle" id="coherenceHandle" style="left: 80%;"></div>
                </div>
                <span class="param-value" id="coherenceDisplay">0.8</span>
            </div>

            <div class="bio-param">
                <span class="param-label">TUNNELING</span>
                <div class="bio-slider" id="tunnelingSlider">
                    <div class="slider-fill" id="tunnelingFill" style="width: 45%;"></div>
                    <div class="slider-handle" id="tunnelingHandle" style="left: 45%;"></div>
                </div>
                <span class="param-value" id="tunnelingDisplay">0.45</span>
            </div>

            <div class="bio-param">
                <span class="param-label">MAGNETIC</span>
                <div class="bio-slider" id="magneticSlider">
                    <div class="slider-fill" id="magneticFill" style="width: 60%;"></div>
                    <div class="slider-handle" id="magneticHandle" style="left: 60%;"></div>
                </div>
                <span class="param-value" id="magneticDisplay">0.6</span>
            </div>
        </div>

        <div class="bio-badge">‚öõÔ∏è QUANTUM BIOLOGY ¬∑ living systems</div>
        
        <div class="bio-stats">
            <div class="stat-card">
                <div class="stat-number" id="efficiency">98%</div>
                <div>PHOTOSYNTHESIS</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="navigation">87%</div>
                <div>MAGNETORECEPTION</div>
            </div>
        </div>

        <div class="efficiency-meter">
            <div class="meter-fill" id="efficiencyMeter" style="width: 95%;"></div>
        </div>

        <div class="quantum-effect" id="effectDisplay">
            üçÉ quantum coherence in FMO complex
        </div>
    </div>

    <script>
        (function() {
            // ---------- QUANTUM BIOLOGY SIMULATOR ----------
            // Models quantum effects in photosynthesis, magnetoreception, and enzyme catalysis
            
            const chloroplastCanvas = document.getElementById('chloroplastCanvas');
            const magnetosomeCanvas = document.getElementById('magnetosomeCanvas');
            const enzymeCanvas = document.getElementById('enzymeCanvas');
            
            const ctxChloro = chloroplastCanvas.getContext('2d');
            const ctxMagneto = magnetosomeCanvas.getContext('2d');
            const ctxEnzyme = enzymeCanvas.getContext('2d');

            let width, height;
            let time = 0;

            // quantum biology parameters
            let coherence = 0.8;      // quantum coherence in photosynthesis
            let tunneling = 0.45;       // enzyme tunneling probability
            let magnetic = 0.6;         // magnetoreception sensitivity
            
            // photosynthetic complexes
            const complexes = [];
            const COMPLEX_COUNT = 36;
            
            // magnetosomes (magnetic nanoparticles)
            const magnetosomes = [];
            const MAGNETOSOME_COUNT = 24;

            // effect descriptions
            const effects = [
                "üçÉ quantum coherence in FMO complex",
                "üß¨ enzyme quantum tunneling",
                "üß≤ radical pair magnetoreception",
                "‚òÄÔ∏è 95% photosynthetic efficiency",
                "ü¶ã avian navigation via entanglement",
                "üå± zero-point energy in ATP synthase",
                "üß™ deuterium tunneling in enzymes",
                "üïäÔ∏è cryptochrome magnetic sensing"
            ];

            // UI elements
            const coherenceDisplay = document.getElementById('coherenceDisplay');
            const tunnelingDisplay = document.getElementById('tunnelingDisplay');
            const magneticDisplay = document.getElementById('magneticDisplay');
            const efficiencySpan = document.getElementById('efficiency');
            const navigationSpan = document.getElementById('navigation');
            const efficiencyMeter = document.getElementById('efficiencyMeter');
            const effectDisplay = document.getElementById('effectDisplay');
            
            // sliders
            const coherenceSlider = document.getElementById('coherenceSlider');
            const coherenceHandle = document.getElementById('coherenceHandle');
            const coherenceFill = document.getElementById('coherenceFill');
            
            const tunnelingSlider = document.getElementById('tunnelingSlider');
            const tunnelingHandle = document.getElementById('tunnelingHandle');
            const tunnelingFill = document.getElementById('tunnelingFill');
            
            const magneticSlider = document.getElementById('magneticSlider');
            const magneticHandle = document.getElementById('magneticHandle');
            const magneticFill = document.getElementById('magneticFill');

            // photosynthetic complex class
            class PhotosyntheticComplex {
                constructor(x, y) {
                    this.x = x;
                    this.y = y;
                    this.phase = Math.random() * Math.PI * 2;
                    this.energy = Math.random();
                    this.excited = false;
                    this.coherenceTime = 0;
                }
                
                update(coherence, time) {
                    // quantum coherence effects
                    this.coherenceTime += 0.02;
                    
                    // excitation by photons
                    if (Math.random() < 0.05) {
                        this.excited = true;
                        this.energy = 1.0;
                    }
                    
                    // energy transfer with quantum coherence
                    if (this.excited) {
                        this.energy *= (0.95 + coherence * 0.05);
                        if (this.energy < 0.1) {
                            this.excited = false;
                        }
                    }
                    
                    // quantum beating (coherence oscillation)
                    let beat = Math.sin(this.coherenceTime * 5 + this.phase) * coherence;
                    return beat;
                }
            }

            // magnetosome class
            class Magnetosome {
                constructor(x, y) {
                    this.x = x;
                    this.y = y;
                    this.spin = Math.random() * 2 - 1;
                    this.angle = Math.random() * Math.PI * 2;
                }
                
                update(magnetic, time) {
                    // spin precession in magnetic field
                    this.angle += magnetic * 0.1;
                    
                    // radical pair mechanism
                    this.spin = Math.sin(this.angle + time) * magnetic;
                    
                    return this.spin;
                }
            }

            // initialize components
            function initComponents() {
                complexes.length = 0;
                magnetosomes.length = 0;
                
                // photosynthetic complexes in grid
                let cols = 8;
                let rows = 6;
                
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < cols; x++) {
                        let nx = (x + 0.5) / cols;
                        let ny = (y + 0.5) / rows;
                        
                        // add jitter
                        nx += (Math.random() - 0.5) * 0.1;
                        ny += (Math.random() - 0.5) * 0.1;
                        
                        complexes.push(new PhotosyntheticComplex(nx, ny));
                    }
                }
                
                // magnetosomes
                for (let i = 0; i < MAGNETOSOME_COUNT; i++) {
                    magnetosomes.push(new Magnetosome(
                        Math.random(),
                        Math.random()
                    ));
                }
            }

            // resize
            function resizeCanvases() {
                width = window.innerWidth;
                height = window.innerHeight;
                chloroplastCanvas.width = width;
                chloroplastCanvas.height = height;
                magnetosomeCanvas.width = width;
                magnetosomeCanvas.height = height;
                enzymeCanvas.width = width;
                enzymeCanvas.height = height;
                
                initComponents();
            }
            window.addEventListener('resize', resizeCanvases);
            resizeCanvases();

            // slider interactions
            function setupSliders() {
                // coherence slider
                function updateCoherenceFromEvent(e) {
                    const rect = coherenceSlider.getBoundingClientRect();
                    let x = e.clientX - rect.left;
                    x = Math.max(0, Math.min(rect.width, x));
                    let val = x / rect.width;
                    
                    coherence = val;
                    coherenceDisplay.innerText = coherence.toFixed(2);
                    coherenceFill.style.width = (val * 100) + '%';
                    coherenceHandle.style.left = (val * 100) + '%';
                }
                
                coherenceHandle.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    const onMove = (e) => updateCoherenceFromEvent(e);
                    const onUp = () => {
                        document.removeEventListener('mousemove', onMove);
                        document.removeEventListener('mouseup', onUp);
                    };
                    document.addEventListener('mousemove', onMove);
                    document.addEventListener('mouseup', onUp);
                });
                
                coherenceSlider.addEventListener('click', (e) => {
                    updateCoherenceFromEvent(e);
                });
                
                // tunneling slider
                function updateTunnelingFromEvent(e) {
                    const rect = tunnelingSlider.getBoundingClientRect();
                    let x = e.clientX - rect.left;
                    x = Math.max(0, Math.min(rect.width, x));
                    let val = x / rect.width;
                    
                    tunneling = val;
                    tunnelingDisplay.innerText = tunneling.toFixed(2);
                    tunnelingFill.style.width = (val * 100) + '%';
                    tunnelingHandle.style.left = (val * 100) + '%';
                }
                
                tunnelingHandle.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    const onMove = (e) => updateTunnelingFromEvent(e);
                    const onUp = () => {
                        document.removeEventListener('mousemove', onMove);
                        document.removeEventListener('mouseup', onUp);
                    };
                    document.addEventListener('mousemove', onMove);
                    document.addEventListener('mouseup', onUp);
                });
                
                tunnelingSlider.addEventListener('click', (e) => {
                    updateTunnelingFromEvent(e);
                });
                
                // magnetic slider
                function updateMagneticFromEvent(e) {
                    const rect = magneticSlider.getBoundingClientRect();
                    let x = e.clientX - rect.left;
                    x = Math.max(0, Math.min(rect.width, x));
                    let val = x / rect.width;
                    
                    magnetic = val;
                    magneticDisplay.innerText = magnetic.toFixed(2);
                    magneticFill.style.width = (val * 100) + '%';
                    magneticHandle.style.left = (val * 100) + '%';
                }
                
                magneticHandle.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    const onMove = (e) => updateMagneticFromEvent(e);
                    const onUp = () => {
                        document.removeEventListener('mousemove', onMove);
                        document.removeEventListener('mouseup', onUp);
                    };
                    document.addEventListener('mousemove', onMove);
                    document.addEventListener('mouseup', onUp);
                });
                
                magneticSlider.addEventListener('click', (e) => {
                    updateMagneticFromEvent(e);
                });
            }
            setupSliders();

            // update simulation
            function updateSimulation() {
                let totalEnergy = 0;
                let totalSpin = 0;
                
                // update complexes
                for (let complex of complexes) {
                    let beat = complex.update(coherence, time);
                    totalEnergy += complex.energy;
                }
                
                // update magnetosomes
                for (let mag of magnetosomes) {
                    let spin = mag.update(magnetic, time);
                    totalSpin += spin;
                }
                
                // calculate efficiencies
                let photoEff = (totalEnergy / complexes.length) * (0.7 + 0.3 * coherence);
                let navEff = 0.5 + 0.5 * Math.abs(totalSpin / magnetosomes.length);
                
                efficiencySpan.innerText = Math.round(photoEff * 100) + '%';
                navigationSpan.innerText = Math.round(navEff * 100) + '%';
                efficiencyMeter.style.width = (photoEff * 100) + '%';
                
                // update effect description
                if (Math.floor(time * 2) % 40 === 0) {
                    let idx = Math.floor(Math.random() * effects.length);
                    effectDisplay.innerText = effects[idx];
                }
            }

            // draw photosynthetic complexes
            function drawChloroplast() {
                ctxChloro.clearRect(0, 0, width, height);
                
                // draw energy transfer network
                for (let i = 0; i < complexes.length; i++) {
                    for (let j = i + 1; j < complexes.length; j++) {
                        let c1 = complexes[i];
                        let c2 = complexes[j];
                        
                        let dx = c1.x - c2.x;
                        let dy = c1.y - c2.y;
                        let dist = Math.sqrt(dx*dx + dy*dy);
                        
                        if (dist < 0.2) {
                            let x1 = c1.x * width;
                            let y1 = c1.y * height;
                            let x2 = c2.x * width;
                            let y2 = c2.y * height;
                            
                            // quantum coherence enables long-range transfer
                            let alpha = coherence * (1 - dist) * 0.5;
                            
                            ctxChloro.beginPath();
                            ctxChloro.moveTo(x1, y1);
                            ctxChloro.lineTo(x2, y2);
                            ctxChloro.strokeStyle = `rgba(100, 255, 100, ${alpha})`;
                            ctxChloro.lineWidth = 1 + coherence * 2;
                            ctxChloro.shadowBlur = 10;
                            ctxChloro.shadowColor = '#6f6';
                            ctxChloro.stroke();
                        }
                    }
                }
                
                // draw complexes
                for (let complex of complexes) {
                    let x = complex.x * width;
                    let y = complex.y * height;
                    
                    // size based on energy
                    let size = 8 + complex.energy * 20;
                    
                    // quantum beating effect
                    let beat = Math.sin(time * 5 + complex.phase) * coherence * 5;
                    
                    ctxChloro.beginPath();
                    ctxChloro.arc(x, y, size + beat, 0, 2 * Math.PI);
                    
                    // color based on excitation
                    if (complex.excited) {
                        ctxChloro.fillStyle = `rgba(255, 255, 100, ${0.8})`;
                        ctxChloro.shadowColor = '#ff6';
                    } else {
                        let hue = 120 + complex.energy * 100;
                        ctxChloro.fillStyle = `hsla(${hue}, 80%, 60%, 0.7)`;
                        ctxChloro.shadowColor = '#6f6';
                    }
                    
                    ctxChloro.shadowBlur = 20;
                    ctxChloro.fill();
                    
                    // inner glow for quantum coherence
                    if (coherence > 0.6) {
                        ctxChloro.beginPath();
                        ctxChloro.arc(x, y, size * 0.3, 0, 2 * Math.PI);
                        ctxChloro.fillStyle = '#ffffff80';
                        ctxChloro.shadowBlur = 30;
                        ctxChloro.fill();
                    }
                }
            }

            // draw magnetosomes
            function drawMagnetosomes() {
                ctxMagneto.clearRect(0, 0, width, height);
                
                // draw magnetic field lines
                for (let i = 0; i < 10; i++) {
                    let y = height * (i + 1) / 11;
                    
                    ctxMagneto.beginPath();
                    for (let x = 0; x < width; x += 20) {
                        let nx = x / width;
                        let field = Math.sin(nx * 10 + time) * magnetic * 50;
                        
                        if (x === 0) ctxMagneto.moveTo(x, y + field);
                        else ctxMagneto.lineTo(x, y + field);
                    }
                    ctxMagneto.strokeStyle = `rgba(100, 200, 255, ${0.1})`;
                    ctxMagneto.lineWidth = 1;
                    ctxMagneto.stroke();
                }
                
                // draw magnetosomes
                for (let mag of magnetosomes) {
                    let x = mag.x * width;
                    let y = mag.y * height;
                    
                    // spin visualization
                    let spinDir = mag.spin * 20;
                    
                    ctxMagneto.beginPath();
                    ctxMagneto.ellipse(x, y, 15, 8, mag.angle, 0, 2 * Math.PI);
                    ctxMagneto.fillStyle = `rgba(100, 150, 255, ${0.5 + Math.abs(mag.spin)*0.3})`;
                    ctxMagneto.shadowColor = '#8cf';
                    ctxMagneto.shadowBlur = 15;
                    ctxMagneto.fill();
                    
                    // spin arrow
                    ctxMagneto.beginPath();
                    ctxMagneto.moveTo(x, y);
                    ctxMagneto.lineTo(x + spinDir * Math.cos(mag.angle), 
                                     y + spinDir * Math.sin(mag.angle));
                    ctxMagneto.strokeStyle = '#fff';
                    ctxMagneto.lineWidth = 2;
                    ctxMagneto.stroke();
                }
            }

            // draw enzyme tunneling
            function drawEnzymeTunneling() {
                ctxEnzyme.clearRect(0, 0, width, height);
                
                // draw enzyme active sites
                for (let i = 0; i < 8; i++) {
                    let x = width * (0.3 + 0.4 * Math.sin(i + time));
                    let y = height * (0.3 + 0.4 * Math.cos(i * 2 + time));
                    
                    // enzyme protein
                    ctxEnzyme.beginPath();
                    ctxEnzyme.arc(x, y, 40, 0, 2 * Math.PI);
                    ctxEnzyme.fillStyle = `rgba(150, 100, 200, ${0.2})`;
                    ctxEnzyme.shadowColor = '#f6f';
                    ctxEnzyme.shadowBlur = 30;
                    ctxEnzyme.fill();
                    
                    // tunneling particle
                    if (Math.random() < tunneling) {
                        let tx = x + 30 * Math.sin(time * 3 + i);
                        let ty = y + 30 * Math.cos(time * 3 + i);
                        
                        ctxEnzyme.beginPath();
                        ctxEnzyme.arc(tx, ty, 8, 0, 2 * Math.PI);
                        ctxEnzyme.fillStyle = '#ff0';
                        ctxEnzyme.shadowColor = '#ff6';
                        ctxEnzyme.shadowBlur = 20;
                        ctxEnzyme.fill();
                        
                        // tunneling path
                        ctxEnzyme.beginPath();
                        ctxEnzyme.moveTo(x, y);
                        ctxEnzyme.lineTo(tx, ty);
                        ctxEnzyme.strokeStyle = '#ff080';
                        ctxEnzyme.lineWidth = 2;
                        ctxEnzyme.setLineDash([5, 5]);
                        ctxEnzyme.stroke();
                        ctxEnzyme.setLineDash([]);
                    }
                }
                
                // draw zero-point energy fluctuations
                for (let i = 0; i < 20; i++) {
                    let x = Math.random() * width;
                    let y = Math.random() * height;
                    
                    ctxEnzyme.beginPath();
                    ctxEnzyme.arc(x, y, 2 + Math.random() * 5, 0, 2 * Math.PI);
                    ctxEnzyme.fillStyle = `rgba(255, 255, 255, ${0.1})`;
                    ctxEnzyme.fill();
                }
            }

            // animation loop
            function animate() {
                time += 0.02;
                
                updateSimulation();
                drawChloroplast();
                drawMagnetosomes();
                drawEnzymeTunneling();
                
                requestAnimationFrame(animate);
            }
            animate();
        })();
    </script>
</div>
</body>
</html>