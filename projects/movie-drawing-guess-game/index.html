<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Sketch & Guess üé¨</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 20px;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            border: 2px solid #ff6b6b;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.3);
        }

        h1 {
            font-size: 3rem;
            color: #ff6b6b;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.7);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #4ecdc4;
            margin-bottom: 20px;
        }

        .game-area {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 30px;
        }

        .panel {
            background: rgba(30, 30, 50, 0.8);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .left-panel {
            flex: 1;
            min-width: 300px;
        }

        .right-panel {
            flex: 1;
            min-width: 300px;
        }

        .movie-title {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            border: 2px dashed #ff6b6b;
        }

        .movie-title h3 {
            color: #ffd166;
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .movie-title p {
            color: #aaa;
            font-size: 0.9rem;
        }

        .timer {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            border: 2px solid #4ecdc4;
        }

        .timer h3 {
            color: #4ecdc4;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        #time {
            font-size: 3rem;
            font-weight: bold;
            color: #ffd166;
        }

        .canvas-container {
            background: #0f1525;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 20px;
            border: 2px solid #4ecdc4;
        }

        canvas {
            display: block;
            background: white;
            border-radius: 5px;
            cursor: crosshair;
            width: 100%;
            height: 300px;
        }

        .tools {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tool-btn {
            flex: 1;
            min-width: 70px;
            background: #2a2d43;
            border: none;
            border-radius: 10px;
            color: white;
            padding: 12px 5px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.3s;
            font-size: 0.8rem;
        }

        .tool-btn:hover {
            background: #3a3f5d;
            transform: translateY(-3px);
        }

        .tool-btn.active {
            background: #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.7);
        }

        .tool-btn i {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .colors {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .color {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: transform 0.2s;
        }

        .color:hover {
            transform: scale(1.2);
        }

        .color.active {
            border: 2px solid white;
            transform: scale(1.2);
        }

        .guess-area {
            margin-bottom: 20px;
        }

        .guess-area h3 {
            color: #ffd166;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        #guess-input {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #4ecdc4;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        #guess-btn {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(to right, #ff6b6b, #ff8e53);
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        #guess-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .guesses {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            height: 200px;
            overflow-y: auto;
            margin-bottom: 20px;
            border: 1px solid #333;
        }

        .guess-message {
            padding: 8px;
            margin-bottom: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
        }

        .guess-message.correct {
            background: rgba(46, 204, 113, 0.3);
            border-left: 4px solid #2ecc71;
        }

        .players {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .player {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            min-width: 120px;
            border: 2px solid transparent;
        }

        .player.active {
            border-color: #ff6b6b;
        }

        .player-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #4ecdc4;
        }

        .player-score {
            font-size: 1.5rem;
            color: #ffd166;
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .control-btn {
            padding: 15px 30px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(to right, #4ecdc4, #2a9d8f);
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
        }

        .control-btn.reset {
            background: linear-gradient(to right, #ff8e53, #ff6b6b);
        }

        .result-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            border: 3px solid #ff6b6b;
            box-shadow: 0 0 30px rgba(255, 107, 107, 0.5);
        }

        .modal-content h2 {
            color: #ff6b6b;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .correct-answer {
            font-size: 2rem;
            color: #ffd166;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
        }

        .next-round {
            padding: 15px 30px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(to right, #4ecdc4, #2a9d8f);
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .next-round:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
        }

        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .tool-btn {
                min-width: 60px;
                padding: 10px 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-film"></i> Movie Sketch & Guess</h1>
            <p class="subtitle">Draw the movie, guess the title! A Pictionary-style game for movie lovers.</p>
        </header>

        <div class="game-area">
            <div class="left-panel panel">
                <div class="movie-title">
                    <h3>Your Movie to Draw:</h3>
                    <p id="movie-text">The movie title will appear here when you start drawing</p>
                </div>

                <div class="timer">
                    <h3>Time Remaining</h3>
                    <div id="time">60</div>
                </div>

                <div class="canvas-container">
                    <canvas id="drawing-canvas" width="600" height="300"></canvas>
                </div>

                <div class="tools">
                    <button class="tool-btn active" id="draw-btn">
                        <i class="fas fa-paint-brush"></i>
                        <span>Draw</span>
                    </button>
                    <button class="tool-btn" id="erase-btn">
                        <i class="fas fa-eraser"></i>
                        <span>Erase</span>
                    </button>
                    <button class="tool-btn" id="undo-btn">
                        <i class="fas fa-undo"></i>
                        <span>Undo</span>
                    </button>
                    <button class="tool-btn" id="clear-btn">
                        <i class="fas fa-trash-alt"></i>
                        <span>Clear</span>
                    </button>
                </div>

                <div class="colors">
                    <div class="color active" style="background-color: #000000;" data-color="#000000"></div>
                    <div class="color" style="background-color: #ff6b6b;" data-color="#ff6b6b"></div>
                    <div class="color" style="background-color: #4ecdc4;" data-color="#4ecdc4"></div>
                    <div class="color" style="background-color: #ffd166;" data-color="#ffd166"></div>
                    <div class="color" style="background-color: #2a9d8f;" data-color="#2a9d8f"></div>
                    <div class="color" style="background-color: #9b5de5;" data-color="#9b5de5"></div>
                    <div class="color" style="background-color: #00bbf9;" data-color="#00bbf9"></div>
                    <div class="color" style="background-color: #f15bb5;" data-color="#f15bb5"></div>
                </div>
            </div>

            <div class="right-panel panel">
                <div class="guess-area">
                    <h3>Guess the Movie!</h3>
                    <input type="text" id="guess-input" placeholder="Type your guess here...">
                    <button id="guess-btn">Submit Guess</button>
                </div>

                <div class="guesses" id="guesses-container">
                    <div class="guess-message">Welcome to Movie Sketch & Guess! Start drawing and guessing.</div>
                    <div class="guess-message">Player1 guessed: <span style="color:#ffd166">Titanic</span></div>
                    <div class="guess-message correct">üéâ Player2 guessed correctly: <span style="color:#ffd166">The Lion King</span></div>
                </div>

                <div class="players">
                    <div class="player active">
                        <div class="player-name">You (Drawer)</div>
                        <div class="player-score">150</div>
                    </div>
                    <div class="player">
                        <div class="player-name">Player2</div>
                        <div class="player-score">120</div>
                    </div>
                    <div class="player">
                        <div class="player-name">Player3</div>
                        <div class="player-score">95</div>
                    </div>
                    <div class="player">
                        <div class="player-name">Player4</div>
                        <div class="player-score">80</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="game-controls">
            <button class="control-btn" id="start-btn">Start New Game</button>
            <button class="control-btn reset" id="new-round-btn">New Round</button>
        </div>
    </div>

    <div class="result-modal" id="result-modal">
        <div class="modal-content">
            <h2>Time's Up! ‚è∞</h2>
            <p>The correct movie was:</p>
            <div class="correct-answer" id="correct-movie">The Lion King</div>
            <p>No one guessed it correctly this time!</p>
            <button class="next-round" id="next-round-btn">Next Round</button>
        </div>
    </div>

    <script>
        // Game variables
        let movieList = [
            "The Lion King", "Titanic", "Jurassic Park", "The Avengers", "Harry Potter",
            "Star Wars", "The Matrix", "Finding Nemo", "Toy Story", "Frozen",
            "Spider-Man", "The Dark Knight", "The Godfather", "Pulp Fiction", "Forrest Gump",
            "Inception", "The Shawshank Redemption", "Back to the Future", "Jaws", "ET"
        ];
        let currentMovie = "";
        let timeLeft = 60;
        let timerInterval;
        let isDrawing = true;
        let isDrawer = true; // In a real game, this would toggle between players
        let score = 150;
        let currentColor = "#000000";
        let drawingHistory = [];
        let historyIndex = -1;

        // DOM Elements
        const canvas = document.getElementById('drawing-canvas');
        const ctx = canvas.getContext('2d');
        const movieText = document.getElementById('movie-text');
        const timeDisplay = document.getElementById('time');
        const guessInput = document.getElementById('guess-input');
        const guessBtn = document.getElementById('guess-btn');
        const guessesContainer = document.getElementById('guesses-container');
        const startBtn = document.getElementById('start-btn');
        const newRoundBtn = document.getElementById('new-round-btn');
        const resultModal = document.getElementById('result-modal');
        const correctMovieDisplay = document.getElementById('correct-movie');
        const nextRoundBtn = document.getElementById('next-round-btn');

        // Tool buttons
        const drawBtn = document.getElementById('draw-btn');
        const eraseBtn = document.getElementById('erase-btn');
        const undoBtn = document.getElementById('undo-btn');
        const clearBtn = document.getElementById('clear-btn');

        // Color pickers
        const colors = document.querySelectorAll('.color');

        // Set canvas background to white
        ctx.fillStyle = "white";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Initialize game
        function initGame() {
            // Set a random movie
            currentMovie = movieList[Math.floor(Math.random() * movieList.length)];
            
            if (isDrawer) {
                movieText.textContent = currentMovie;
                movieText.style.color = "#ffd166";
                movieText.innerHTML = `<strong>${currentMovie}</strong>`;
            } else {
                movieText.textContent = "You are guessing! Watch the drawing and guess the movie.";
                movieText.style.color = "#4ecdc4";
            }
            
            // Reset timer
            timeLeft = 60;
            timeDisplay.textContent = timeLeft;
            timeDisplay.style.color = "#ffd166";
            
            // Clear guesses
            guessesContainer.innerHTML = '<div class="guess-message">New round started! Start guessing...</div>';
            
            // Clear canvas
            clearCanvas();
            
            // Reset drawing history
            drawingHistory = [];
            historyIndex = -1;
            saveCanvasState();
            
            // Start timer
            clearInterval(timerInterval);
            startTimer();
            
            // Hide result modal if visible
            resultModal.style.display = "none";
        }

        // Start the timer
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                timeDisplay.textContent = timeLeft;
                
                // Change color when time is running out
                if (timeLeft <= 10) {
                    timeDisplay.style.color = "#ff6b6b";
                    timeDisplay.style.animation = "pulse 0.5s infinite";
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    endRound();
                }
            }, 1000);
        }

        // End the round
        function endRound() {
            // Show result modal
            resultModal.style.display = "flex";
            correctMovieDisplay.textContent = currentMovie;
            
            // Update score (in a real game, this would be based on who guessed correctly)
            document.querySelector('.player.active .player-score').textContent = score;
        }

        // Clear the canvas
        function clearCanvas() {
            ctx.fillStyle = "white";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            drawingHistory = [];
            historyIndex = -1;
            saveCanvasState();
        }

        // Save canvas state to history
        function saveCanvasState() {
            // If we're not at the end of history, remove future states
            if (historyIndex < drawingHistory.length - 1) {
                drawingHistory = drawingHistory.slice(0, historyIndex + 1);
            }
            
            // Save current state
            drawingHistory.push(canvas.toDataURL());
            historyIndex++;
            
            // Update undo button state
            undoBtn.disabled = historyIndex <= 0;
        }

        // Undo last drawing action
        function undoDrawing() {
            if (historyIndex > 0) {
                historyIndex--;
                const img = new Image();
                img.onload = function() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(img, 0, 0);
                };
                img.src = drawingHistory[historyIndex];
            }
        }

        // Drawing functionality
        let isDrawingMode = false;
        let lastX = 0;
        let lastY = 0;

        // Set up drawing events
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        // For touch devices
        canvas.addEventListener('touchstart', function(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousedown', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        });

        canvas.addEventListener('touchmove', function(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousemove', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        });

        canvas.addEventListener('touchend', function(e) {
            e.preventDefault();
            const mouseEvent = new MouseEvent('mouseup', {});
            canvas.dispatchEvent(mouseEvent);
        });

        function startDrawing(e) {
            if (!isDrawing) return;
            
            isDrawingMode = true;
            [lastX, lastY] = getMousePos(canvas, e);
            
            // Start a new path
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
        }

        function draw(e) {
            if (!isDrawingMode || !isDrawing) return;
            
            e.preventDefault();
            
            const [x, y] = getMousePos(canvas, e);
            
            ctx.lineTo(x, y);
            ctx.strokeStyle = currentColor;
            ctx.lineWidth = drawBtn.classList.contains('active') ? 5 : 20; // Thinner for draw, thicker for erase
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.stroke();
            
            [lastX, lastY] = [x, y];
        }

        function stopDrawing() {
            if (isDrawingMode) {
                isDrawingMode = false;
                saveCanvasState();
            }
        }

        function getMousePos(canvas, e) {
            const rect = canvas.getBoundingClientRect();
            let x, y;
            
            if (e.type.includes('touch')) {
                x = e.touches[0].clientX - rect.left;
                y = e.touches[0].clientY - rect.top;
            } else {
                x = e.clientX - rect.left;
                y = e.clientY - rect.top;
            }
            
            return [x, y];
        }

        // Handle tool buttons
        drawBtn.addEventListener('click', function() {
            drawBtn.classList.add('active');
            eraseBtn.classList.remove('active');
            isDrawing = true;
        });

        eraseBtn.addEventListener('click', function() {
            eraseBtn.classList.add('active');
            drawBtn.classList.remove('active');
            isDrawing = true;
            currentColor = "white";
        });

        undoBtn.addEventListener('click', function() {
            undoDrawing();
        });

        clearBtn.addEventListener('click', function() {
            clearCanvas();
            saveCanvasState();
        });

        // Handle color selection
        colors.forEach(color => {
            color.addEventListener('click', function() {
                colors.forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                currentColor = this.getAttribute('data-color');
                
                // Switch back to draw mode when selecting a color
                drawBtn.classList.add('active');
                eraseBtn.classList.remove('active');
                isDrawing = true;
            });
        });

        // Handle guess submission
        guessBtn.addEventListener('click', submitGuess);
        guessInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                submitGuess();
            }
        });

        function submitGuess() {
            const guess = guessInput.value.trim();
            if (!guess) return;
            
            // Create guess message
            const guessMessage = document.createElement('div');
            guessMessage.classList.add('guess-message');
            
            // Check if guess is correct (case-insensitive)
            if (guess.toLowerCase() === currentMovie.toLowerCase()) {
                guessMessage.classList.add('correct');
                guessMessage.innerHTML = `üéâ <strong>You</strong> guessed correctly: <span style="color:#ffd166">${currentMovie}</span>`;
                
                // Update score
                score += 50;
                document.querySelector('.player.active .player-score').textContent = score;
                
                // End the round early
                clearInterval(timerInterval);
                setTimeout(() => {
                    endRound();
                }, 1500);
            } else {
                guessMessage.innerHTML = `<strong>You</strong> guessed: <span style="color:#ffd166">${guess}</span>`;
            }
            
            // Add to guesses container
            guessesContainer.appendChild(guessMessage);
            
            // Scroll to bottom
            guessesContainer.scrollTop = guessesContainer.scrollHeight;
            
            // Clear input
            guessInput.value = "";
        }

        // Handle game control buttons
        startBtn.addEventListener('click', function() {
            // Reset score
            score = 150;
            document.querySelector('.player.active .player-score').textContent = score;
            
            // Randomly assign drawer (for demo purposes)
            isDrawer = Math.random() > 0.5;
            
            initGame();
        });

        newRoundBtn.addEventListener('click', function() {
            // Toggle drawer (in real game would rotate between players)
            isDrawer = !isDrawer;
            initGame();
        });

        nextRoundBtn.addEventListener('click', function() {
            // Toggle drawer for next round
            isDrawer = !isDrawer;
            resultModal.style.display = "none";
            initGame();
        });

        // Initialize the game on load
        window.addEventListener('load', function() {
            // Set initial color as active
            document.querySelector('.color.active').classList.remove('active');
            document.querySelector('.color[data-color="#000000"]').classList.add('active');
            currentColor = "#000000";
            
            // Start the game
            initGame();
        });

        // Make canvas responsive
        function resizeCanvas() {
            const canvasContainer = document.querySelector('.canvas-container');
            const containerWidth = canvasContainer.clientWidth - 20; // Account for padding
            
            canvas.style.width = containerWidth + 'px';
            canvas.style.height = (containerWidth * 0.5) + 'px'; // Maintain aspect ratio
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
    </script>
</body>
</html>