/**
 * LiquidInput - Particles Stylesheet
 * 
 * Particle-specific rendering styles, opacity, blur effects, and canvas overlay.
 * Handles visual appearance of particles in different states.
 */

/* ============================================================================
   Canvas Particle Rendering Base
   ========================================================================= */

.particle-canvas {
    image-rendering: auto;
    image-rendering: crisp-edges;
    image-rendering: -webkit-optimize-contrast;
}

/* ============================================================================
   Particle Visual States
   ========================================================================= */

/* Calm state particles - clear and readable */
.particle-calm {
    opacity: 1;
    filter: blur(0px);
    text-shadow:
        0 0 5px rgba(96, 165, 250, 0.5),
        0 0 10px rgba(96, 165, 250, 0.3);
}

/* Building pressure particles - slight motion blur */
.particle-building {
    opacity: 0.95;
    filter: blur(0.5px);
    text-shadow:
        0 0 8px rgba(245, 158, 11, 0.6),
        0 0 15px rgba(245, 158, 11, 0.4);
}

/* Critical pressure particles - increased blur */
.particle-critical {
    opacity: 0.9;
    filter: blur(1px);
    text-shadow:
        0 0 10px rgba(239, 68, 68, 0.8),
        0 0 20px rgba(239, 68, 68, 0.5);
    animation: particleVibrate 0.1s infinite;
}

@keyframes particleVibrate {

    0%,
    100% {
        transform: translate(0, 0);
    }

    25% {
        transform: translate(-1px, 0);
    }

    50% {
        transform: translate(1px, 0);
    }

    75% {
        transform: translate(0, -1px);
    }
}

/* Burst state particles - heavy motion blur */
.particle-burst {
    opacity: 0.85;
    filter: blur(2px);
    text-shadow:
        0 0 15px rgba(96, 165, 250, 0.9),
        0 0 30px rgba(96, 165, 250, 0.6);
}

/* Spilled particles - settling state */
.particle-spilled {
    opacity: 0.8;
    filter: blur(0.5px);
    text-shadow:
        0 0 8px rgba(96, 165, 250, 0.7),
        0 0 16px rgba(96, 165, 250, 0.4);
    transition: opacity 0.5s ease, filter 0.5s ease;
}

/* Settled particles - final resting state */
.particle-settled {
    opacity: 0.6;
    filter: blur(0px);
    text-shadow:
        0 0 5px rgba(96, 165, 250, 0.4),
        0 0 10px rgba(96, 165, 250, 0.2);
}

/* ============================================================================
   Particle Color Variations
   ========================================================================= */

/* Primary color - blue */
.particle-color-primary {
    color: #60a5fa;
    text-shadow:
        0 0 10px rgba(96, 165, 250, 0.8),
        0 0 20px rgba(96, 165, 250, 0.4);
}

/* Secondary color - purple */
.particle-color-secondary {
    color: #a78bfa;
    text-shadow:
        0 0 10px rgba(167, 139, 250, 0.8),
        0 0 20px rgba(167, 139, 250, 0.4);
}

/* Accent color - pink */
.particle-color-accent {
    color: #ec4899;
    text-shadow:
        0 0 10px rgba(236, 72, 153, 0.8),
        0 0 20px rgba(236, 72, 153, 0.4);
}

/* Warning color - orange (high pressure) */
.particle-color-warning {
    color: #f59e0b;
    text-shadow:
        0 0 10px rgba(245, 158, 11, 0.8),
        0 0 20px rgba(245, 158, 11, 0.4);
}

/* Danger color - red (critical pressure) */
.particle-color-danger {
    color: #ef4444;
    text-shadow:
        0 0 10px rgba(239, 68, 68, 0.8),
        0 0 20px rgba(239, 68, 68, 0.4);
}

/* ============================================================================
   Particle Size Variations
   ========================================================================= */

.particle-size-small {
    font-size: 1.25rem;
}

.particle-size-medium {
    font-size: 1.5rem;
}

.particle-size-large {
    font-size: 1.75rem;
}

/* ============================================================================
   Particle Trail Effects
   ========================================================================= */

/* Motion trail for fast-moving particles */
.particle-trail {
    position: relative;
}

.particle-trail::before {
    content: attr(data-char);
    position: absolute;
    top: 0;
    left: 0;
    color: inherit;
    opacity: 0.3;
    filter: blur(4px);
    transform: translateX(-5px);
}

.particle-trail::after {
    content: attr(data-char);
    position: absolute;
    top: 0;
    left: 0;
    color: inherit;
    opacity: 0.15;
    filter: blur(8px);
    transform: translateX(-10px);
}

/* ============================================================================
   Particle Glow Intensity
   ========================================================================= */

.particle-glow-low {
    text-shadow:
        0 0 5px currentColor,
        0 0 10px currentColor;
}

.particle-glow-medium {
    text-shadow:
        0 0 10px currentColor,
        0 0 20px currentColor,
        0 0 30px currentColor;
}

.particle-glow-high {
    text-shadow:
        0 0 15px currentColor,
        0 0 30px currentColor,
        0 0 45px currentColor,
        0 0 60px currentColor;
}

/* ============================================================================
   Particle Interaction States
   ========================================================================= */

/* Particle being created */
.particle-spawning {
    animation: particleSpawn 0.3s ease-out;
}

@keyframes particleSpawn {
    0% {
        transform: scale(0) rotate(0deg);
        opacity: 0;
    }

    50% {
        transform: scale(1.2) rotate(180deg);
        opacity: 0.8;
    }

    100% {
        transform: scale(1) rotate(360deg);
        opacity: 1;
    }
}

/* Particle being removed */
.particle-despawning {
    animation: particleDespawn 0.3s ease-in forwards;
}

@keyframes particleDespawn {
    0% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
    }

    100% {
        transform: scale(0) rotate(-360deg);
        opacity: 0;
    }
}

/* Particle collision flash */
.particle-collision {
    animation: collisionFlash 0.2s ease-out;
}

@keyframes collisionFlash {

    0%,
    100% {
        filter: brightness(1);
    }

    50% {
        filter: brightness(2);
    }
}

/* ============================================================================
   Liquid Particle Behavior
   ========================================================================= */

/* Floating in liquid - gentle bobbing */
.particle-floating {
    animation: liquidFloat 3s ease-in-out infinite;
}

@keyframes liquidFloat {

    0%,
    100% {
        transform: translateY(0) translateX(0);
    }

    25% {
        transform: translateY(-2px) translateX(1px);
    }

    50% {
        transform: translateY(0) translateX(2px);
    }

    75% {
        transform: translateY(2px) translateX(1px);
    }
}

/* Swirling in liquid - circular motion */
.particle-swirling {
    animation: liquidSwirl 4s linear infinite;
}

@keyframes liquidSwirl {
    0% {
        transform: rotate(0deg) translateX(3px) rotate(0deg);
    }

    100% {
        transform: rotate(360deg) translateX(3px) rotate(-360deg);
    }
}

/* Sinking in liquid - downward drift */
.particle-sinking {
    animation: liquidSink 2s ease-in infinite;
}

@keyframes liquidSink {
    0% {
        transform: translateY(0);
        opacity: 1;
    }

    100% {
        transform: translateY(10px);
        opacity: 0.8;
    }
}

/* ============================================================================
   Special Effects
   ========================================================================= */

/* Particle ripple effect on spawn */
.particle-ripple::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    border: 2px solid currentColor;
    border-radius: 50%;
    opacity: 0;
    animation: rippleExpand 0.6s ease-out;
}

@keyframes rippleExpand {
    0% {
        width: 100%;
        height: 100%;
        opacity: 0.8;
    }

    100% {
        width: 300%;
        height: 300%;
        opacity: 0;
    }
}

/* Particle shimmer effect */
.particle-shimmer {
    animation: shimmerEffect 2s ease-in-out infinite;
}

@keyframes shimmerEffect {

    0%,
    100% {
        filter: brightness(1);
    }

    50% {
        filter: brightness(1.5);
    }
}

/* ============================================================================
   Performance Optimizations
   ========================================================================= */

/* Optimize rendering for particles */
.spilled-particle,
.particle-canvas {
    will-change: transform, opacity;
    transform: translateZ(0);
    backface-visibility: hidden;
}

/* ============================================================================
   Responsive Particle Styles
   ========================================================================= */

@media (max-width: 768px) {
    .particle-size-small {
        font-size: 1rem;
    }

    .particle-size-medium {
        font-size: 1.25rem;
    }

    .particle-size-large {
        font-size: 1.5rem;
    }

    /* Reduce glow intensity on mobile for performance */
    .particle-glow-high {
        text-shadow:
            0 0 10px currentColor,
            0 0 20px currentColor;
    }
}

@media (max-width: 480px) {
    .particle-size-small {
        font-size: 0.875rem;
    }

    .particle-size-medium {
        font-size: 1rem;
    }

    .particle-size-large {
        font-size: 1.25rem;
    }

    /* Minimal glow on small screens */
    .particle-glow-medium,
    .particle-glow-high {
        text-shadow:
            0 0 5px currentColor,
            0 0 10px currentColor;
    }
}

/* ============================================================================
   Accessibility
   ========================================================================= */

@media (prefers-reduced-motion: reduce) {

    .particle-floating,
    .particle-swirling,
    .particle-sinking,
    .particle-spawning,
    .particle-despawning,
    .particle-shimmer {
        animation: none !important;
    }

    .particle-trail::before,
    .particle-trail::after {
        display: none;
    }
}