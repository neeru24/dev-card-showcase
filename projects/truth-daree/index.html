<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Truth or Dare Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            max-width: 1000px;
            width: 100%;
            background-color: white;
            border-radius: 30px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            position: relative;
        }

        .player-section {
            padding: 30px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .player-input {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .player-name-input {
            flex: 1;
            min-width: 250px;
            padding: 15px 20px;
            font-size: 1.1rem;
            border: 3px solid #e9ecef;
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .player-name-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .add-player-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .add-player-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .players-list {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }

        .player-tag {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: popIn 0.3s ease;
        }

        @keyframes popIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .remove-player {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1rem;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .remove-player:hover {
            opacity: 1;
        }

        .game-main {
            padding: 30px;
            background-color: white;
        }

        .current-player {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2rem;
            color: #2d3748;
            font-weight: 700;
        }

        .current-player span {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 10px 30px;
            border-radius: 50px;
            display: inline-block;
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.2);
        }

        .challenge-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 30px;
            padding: 40px;
            margin: 30px 0;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .challenge-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            animation: rotate 15s linear infinite;
        }

        .challenge-type {
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: #667eea;
            font-weight: 600;
            margin-bottom: 20px;
            position: relative;
        }

        .challenge-text {
            font-size: 2.2rem;
            color: #2d3748;
            font-weight: 700;
            line-height: 1.4;
            margin-bottom: 30px;
            position: relative;
            max-width: 600px;
        }

        .difficulty-badge {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-top: 15px;
            position: relative;
        }

        .difficulty-easy {
            background-color: #4CAF50;
            color: white;
        }

        .difficulty-medium {
            background-color: #FF9800;
            color: white;
        }

        .difficulty-hard {
            background-color: #f44336;
            color: white;
        }

        .difficulty-extreme {
            background-color: #9C27B0;
            color: white;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 18px 40px;
            border: none;
            border-radius: 60px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            min-width: 200px;
            justify-content: center;
        }

        .truth-btn {
            background: linear-gradient(135deg, #4A90E2, #357ABD);
            color: white;
            box-shadow: 0 10px 20px rgba(74, 144, 226, 0.3);
        }

        .truth-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(74, 144, 226, 0.4);
        }

        .dare-btn {
            background: linear-gradient(135deg, #E24A4A, #BD3535);
            color: white;
            box-shadow: 0 10px 20px rgba(226, 74, 74, 0.3);
        }

        .dare-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(226, 74, 74, 0.4);
        }

        .next-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 60px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }

        .next-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.3);
        }

        .settings-section {
            padding: 30px;
            background-color: #f8f9fa;
            border-radius: 20px;
            margin-top: 30px;
        }

        .settings-title {
            font-size: 1.5rem;
            color: #2d3748;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .difficulty-slider {
            margin: 20px 0;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: #4a5568;
        }

        input[type=range] {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: linear-gradient(90deg, #4CAF50, #FF9800, #f44336, #9C27B0);
            outline: none;
            -webkit-appearance: none;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 25px;
            height: 25px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            border: 3px solid #667eea;
        }

        .category-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
        }

        .category-filter {
            padding: 10px 25px;
            border: 2px solid #e9ecef;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: white;
        }

        .category-filter.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
        }

        .history-section {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 15px;
        }

        .history-title {
            font-size: 1.2rem;
            color: #2d3748;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .history-list {
            max-height: 150px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .history-item {
            padding: 10px;
            border-bottom: 1px solid #e9ecef;
            color: #4a5568;
            font-size: 0.95rem;
        }

        footer {
            text-align: center;
            padding: 20px;
            background-color: #f1f3f5;
            color: #6c757d;
            border-top: 1px solid #dee2e6;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .challenge-text {
                font-size: 1.5rem;
            }
            
            .action-btn {
                padding: 15px 30px;
                font-size: 1.1rem;
                min-width: 150px;
            }
            
            .player-input {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <header>
            <h1><i class="fas fa-dice-d20"></i> Smart Truth or Dare</h1>
            <p class="subtitle">AI-powered challenges that adapt to your group's comfort level</p>
        </header>

        <div class="player-section">
            <div class="player-input">
                <input type="text" class="player-name-input" id="playerNameInput" placeholder="Enter player name...">
                <button class="add-player-btn" id="addPlayerBtn">
                    <i class="fas fa-user-plus"></i> Add Player
                </button>
            </div>
            <div class="players-list" id="playersList">
                <!-- Players will appear here -->
            </div>
        </div>

        <div class="game-main">
            <div class="current-player" id="currentPlayer">
                <span>Add players to start!</span>
            </div>

            <div class="challenge-card" id="challengeCard">
                <div class="challenge-type" id="challengeType">Ready to play?</div>
                <div class="challenge-text" id="challengeText">Add at least 2 players and choose Truth or Dare!</div>
                <div class="difficulty-badge" id="difficultyBadge"></div>
            </div>

            <div class="action-buttons">
                <button class="action-btn truth-btn" id="truthBtn" disabled>
                    <i class="fas fa-comment"></i> Truth
                </button>
                <button class="action-btn dare-btn" id="dareBtn" disabled>
                    <i class="fas fa-skull"></i> Dare
                </button>
            </div>

            <div style="text-align: center;">
                <button class="next-btn" id="nextBtn" disabled>
                    <i class="fas fa-forward"></i> Next Player
                </button>
            </div>

            <div class="settings-section">
                <div class="settings-title">
                    <i class="fas fa-sliders-h"></i> Game Settings
                </div>
                
                <div class="difficulty-slider">
                    <div class="slider-label">
                        <span>PG <i class="fas fa-child"></i></span>
                        <span>Wild <i class="fas fa-fire"></i></span>
                    </div>
                    <input type="range" id="difficultySlider" min="1" max="4" value="2" step="1">
                </div>

                <div class="category-filters" id="categoryFilters">
                    <button class="category-filter active" data-category="all">All</button>
                    <button class="category-filter" data-category="funny">Funny</button>
                    <button class="category-filter" data-category="challenging">Challenging</button>
                    <button class="category-filter" data-category="creative">Creative</button>
                    <button class="category-filter" data-category="social">Social</button>
                </div>
            </div>

            <div class="history-section">
                <div class="history-title">
                    <i class="fas fa-history"></i> Recent Challenges
                </div>
                <div class="history-list" id="historyList">
                    <!-- History items will appear here -->
                </div>
            </div>
        </div>

        <footer>
            <p>Smart generator adapts to your group's comfort level. Play responsibly!</p>
        </footer>
    </div>

    <script>
        class SmartTruthOrDare {
            constructor() {
                this.players = [];
                this.currentPlayerIndex = 0;
                this.difficultyLevel = 2; // 1-4 (PG to Wild)
                this.selectedCategory = 'all';
                this.history = [];
                this.lastChallenge = null;
                
                // Truth questions database with categories and difficulties
                this.truths = [
                    // Level 1 - PG
                    { text: "What's the most embarrassing song you know all the lyrics to?", difficulty: 1, category: "funny" },
                    { text: "What's your biggest fear?", difficulty: 1, category: "personal" },
                    { text: "Who was your first celebrity crush?", difficulty: 1, category: "personal" },
                    { text: "What's the weirdest food you've ever eaten?", difficulty: 1, category: "funny" },
                    { text: "Have you ever fallen asleep in class?", difficulty: 1, category: "funny" },
                    
                    // Level 2 - Mild
                    { text: "What's the most embarrassing thing you've done in public?", difficulty: 2, category: "funny" },
                    { text: "Have you ever lied to your best friend? What about?", difficulty: 2, category: "personal" },
                    { text: "What's the worst date you've ever been on?", difficulty: 2, category: "social" },
                    { text: "What's a secret you've never told anyone?", difficulty: 2, category: "personal" },
                    { text: "Have you ever stolen something?", difficulty: 2, category: "challenging" },
                    
                    // Level 3 - Spicy
                    { text: "What's the most romantic thing you've ever done?", difficulty: 3, category: "social" },
                    { text: "Have you ever been in love? Tell us about it.", difficulty: 3, category: "personal" },
                    { text: "What's your biggest regret in a relationship?", difficulty: 3, category: "personal" },
                    { text: "Have you ever been rejected? How did it feel?", difficulty: 3, category: "challenging" },
                    { text: "What's the most attractive quality in a person?", difficulty: 3, category: "creative" },
                    
                    // Level 4 - Wild
                    { text: "What's your wildest fantasy?", difficulty: 4, category: "wild" },
                    { text: "Have you ever done something illegal?", difficulty: 4, category: "wild" },
                    { text: "What's the most scandalous thing you've done?", difficulty: 4, category: "wild" },
                    { text: "Tell us about your most embarrassing romantic experience.", difficulty: 4, category: "wild" },
                    { text: "What's a secret you'll take to your grave?", difficulty: 4, category: "wild" }
                ];

                // Dares database with categories and difficulties
                this.dares = [
                    // Level 1 - PG
                    { text: "Do your best animal impression", difficulty: 1, category: "funny" },
                    { text: "Sing the chorus of your favorite song", difficulty: 1, category: "creative" },
                    { text: "Do 10 jumping jacks", difficulty: 1, category: "challenging" },
                    { text: "Talk in a British accent for the next 3 rounds", difficulty: 1, category: "funny" },
                    { text: "Make a funny face and hold it for 10 seconds", difficulty: 1, category: "funny" },
                    
                    // Level 2 - Mild
                    { text: "Do a handstand against the wall for 10 seconds", difficulty: 2, category: "challenging" },
                    { text: "Call your mom and tell her you love her (on speaker)", difficulty: 2, category: "social" },
                    { text: "Post an embarrassing photo on social media", difficulty: 2, category: "social" },
                    { text: "Do an impression of another player", difficulty: 2, category: "funny" },
                    { text: "Let another player write something on your forehead", difficulty: 2, category: "creative" },
                    
                    // Level 3 - Spicy
                    { text: "Text your ex 'I miss you'", difficulty: 3, category: "wild" },
                    { text: "Do a shot (or drink) in one go", difficulty: 3, category: "challenging" },
                    { text: "Let the group look through your phone for 1 minute", difficulty: 3, category: "wild" },
                    { text: "Do a dare chosen by the group (within reason)", difficulty: 3, category: "creative" },
                    { text: "Share your most recent search history", difficulty: 3, category: "wild" },
                    
                    // Level 4 - Wild
                    { text: "Do a body shot off another player", difficulty: 4, category: "wild" },
                    { text: "Flash someone (be careful!)", difficulty: 4, category: "wild" },
                    { text: "Let someone give you a hickey", difficulty: 4, category: "wild" },
                    { text: "Do something that will get us kicked out of here", difficulty: 4, category: "wild" },
                    { text: "Truth or Dare roulette: spin a wheel of extreme challenges", difficulty: 4, category: "wild" }
                ];

                // DOM Elements
                this.playersListEl = document.getElementById('playersList');
                this.playerNameInput = document.getElementById('playerNameInput');
                this.addPlayerBtn = document.getElementById('addPlayerBtn');
                this.currentPlayerEl = document.getElementById('currentPlayer');
                this.challengeTypeEl = document.getElementById('challengeType');
                this.challengeTextEl = document.getElementById('challengeText');
                this.difficultyBadgeEl = document.getElementById('difficultyBadge');
                this.truthBtn = document.getElementById('truthBtn');
                this.dareBtn = document.getElementById('dareBtn');
                this.nextBtn = document.getElementById('nextBtn');
                this.difficultySlider = document.getElementById('difficultySlider');
                this.historyListEl = document.getElementById('historyList');
                
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.updatePlayersDisplay();
                this.loadFromStorage();
            }

            setupEventListeners() {
                this.addPlayerBtn.addEventListener('click', () => this.addPlayer());
                this.playerNameInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.addPlayer();
                });

                this.truthBtn.addEventListener('click', () => this.generateChallenge('truth'));
                this.dareBtn.addEventListener('click', () => this.generateChallenge('dare'));
                this.nextBtn.addEventListener('click', () => this.nextPlayer());

                this.difficultySlider.addEventListener('input', (e) => {
                    this.difficultyLevel = parseInt(e.target.value);
                    this.saveToStorage();
                });

                document.querySelectorAll('.category-filter').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.category-filter').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.selectedCategory = btn.dataset.category;
                        this.saveToStorage();
                    });
                });
            }

            addPlayer() {
                const name = this.playerNameInput.value.trim();
                if (name && this.players.length < 8) {
                    this.players.push({
                        name: name,
                        id: Date.now() + Math.random(),
                        score: 0
                    });
                    this.updatePlayersDisplay();
                    this.playerNameInput.value = '';
                    
                    if (this.players.length >= 2) {
                        this.enableGameControls();
                        if (this.players.length === 2 && !this.currentPlayerIndex) {
                            this.updateCurrentPlayer();
                        }
                    }
                    
                    this.saveToStorage();
                }
            }

            removePlayer(id) {
                this.players = this.players.filter(p => p.id !== id);
                if (this.currentPlayerIndex >= this.players.length) {
                    this.currentPlayerIndex = 0;
                }
                this.updatePlayersDisplay();
                
                if (this.players.length < 2) {
                    this.disableGameControls();
                }
                
                if (this.players.length > 0) {
                    this.updateCurrentPlayer();
                } else {
                    this.currentPlayerEl.innerHTML = '<span>Add players to start!</span>';
                }
                
                this.saveToStorage();
            }

            updatePlayersDisplay() {
                this.playersListEl.innerHTML = '';
                this.players.forEach(player => {
                    const playerTag = document.createElement('div');
                    playerTag.className = 'player-tag';
                    playerTag.innerHTML = `
                        <i class="fas fa-user"></i>
                        ${player.name}
                        <button class="remove-player" onclick="game.removePlayer(${player.id})">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                    this.playersListEl.appendChild(playerTag);
                });
            }

            updateCurrentPlayer() {
                if (this.players.length > 0) {
                    const player = this.players[this.currentPlayerIndex];
                    this.currentPlayerEl.innerHTML = `<span>${player.name}'s turn</span>`;
                }
            }

            nextPlayer() {
                if (this.players.length > 0) {
                    this.currentPlayerIndex = (this.currentPlayerIndex + 1) % this.players.length;
                    this.updateCurrentPlayer();
                    
                    // Reset challenge display
                    this.challengeTypeEl.textContent = "New turn!";
                    this.challengeTextEl.textContent = "Choose Truth or Dare!";
                    this.difficultyBadgeEl.innerHTML = '';
                }
            }

            generateChallenge(type) {
                const database = type === 'truth' ? this.truths : this.dares;
                
                // Filter by difficulty and category
                let availableChallenges = database.filter(c => 
                    c.difficulty <= this.difficultyLevel &&
                    (this.selectedCategory === 'all' || c.category === this.selectedCategory)
                );

                // Avoid repeating the last challenge
                if (this.lastChallenge) {
                    availableChallenges = availableChallenges.filter(c => c.text !== this.lastChallenge.text);
                }

                if (availableChallenges.length === 0) {
                    // Fallback to any challenge within difficulty
                    availableChallenges = database.filter(c => c.difficulty <= this.difficultyLevel);
                }

                const challenge = availableChallenges[Math.floor(Math.random() * availableChallenges.length)];
                this.lastChallenge = challenge;

                // Update display
                this.challengeTypeEl.textContent = type.toUpperCase();
                this.challengeTextEl.textContent = challenge.text;
                
                // Set difficulty badge
                const difficultyNames = ['PG', 'Mild', 'Spicy', 'Wild'];
                const difficultyClasses = ['difficulty-easy', 'difficulty-medium', 'difficulty-hard', 'difficulty-extreme'];
                this.difficultyBadgeEl.innerHTML = difficultyNames[challenge.difficulty - 1];
                this.difficultyBadgeEl.className = `difficulty-badge ${difficultyClasses[challenge.difficulty - 1]}`;

                // Add to history
                this.addToHistory(this.players[this.currentPlayerIndex].name, type, challenge);
                
                // Animate card
                this.animateCard();
            }

            animateCard() {
                const card = document.getElementById('challengeCard');
                card.style.animation = 'none';
                card.offsetHeight; // Trigger reflow
                card.style.animation = 'slideUp 0.5s ease';
            }

            addToHistory(playerName, type, challenge) {
                const historyItem = {
                    player: playerName,
                    type: type,
                    text: challenge.text,
                    difficulty: challenge.difficulty,
                    timestamp: new Date().toLocaleTimeString()
                };
                
                this.history.unshift(historyItem);
                if (this.history.length > 10) {
                    this.history.pop();
                }
                
                this.updateHistoryDisplay();
            }

            updateHistoryDisplay() {
                this.historyListEl.innerHTML = '';
                this.history.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    historyItem.innerHTML = `
                        <strong>${item.player}</strong> chose ${item.type.toUpperCase()}: 
                        "${item.text.substring(0, 50)}${item.text.length > 50 ? '...' : ''}"
                        <small style="color: #999; display: block;">${item.timestamp}</small>
                    `;
                    this.historyListEl.appendChild(historyItem);
                });
            }

            enableGameControls() {
                this.truthBtn.disabled = false;
                this.dareBtn.disabled = false;
                this.nextBtn.disabled = false;
            }

            disableGameControls() {
                this.truthBtn.disabled = true;
                this.dareBtn.disabled = true;
                this.nextBtn.disabled = true;
            }

            saveToStorage() {
                const gameState = {
                    players: this.players,
                    difficultyLevel: this.difficultyLevel,
                    selectedCategory: this.selectedCategory,
                    history: this.history
                };
                localStorage.setItem('truthOrDareGame', JSON.stringify(gameState));
            }

            loadFromStorage() {
                const saved = localStorage.getItem('truthOrDareGame');
                if (saved) {
                    const gameState = JSON.parse(saved);
                    this.players = gameState.players || [];
                    this.difficultyLevel = gameState.difficultyLevel || 2;
                    this.selectedCategory = gameState.selectedCategory || 'all';
                    this.history = gameState.history || [];
                    
                    // Update UI
                    this.updatePlayersDisplay();
                    this.updateHistoryDisplay();
                    this.difficultySlider.value = this.difficultyLevel;
                    
                    // Update category filter active state
                    document.querySelectorAll('.category-filter').forEach(btn => {
                        if (btn.dataset.category === this.selectedCategory) {
                            btn.classList.add('active');
                        } else {
                            btn.classList.remove('active');
                        }
                    });
                    
                    if (this.players.length >= 2) {
                        this.enableGameControls();
                        this.updateCurrentPlayer();
                    }
                }
            }
        }

        // Initialize the game
        const game = new SmartTruthOrDare();
    </script>
</body>
</html>