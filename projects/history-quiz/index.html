<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèõÔ∏è historical quizzes ¬∑ test your knowledge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #2d3e4f;
            background: radial-gradient(circle at 20% 30%, #4f665a, #1e2b30);
            font-family: 'Segoe UI', 'Roboto', system-ui, sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.2rem;
            color: #f0eee7;
        }

        .quiz-app {
            max-width: 1000px;
            width: 100%;
            background: rgba(28, 36, 45, 0.85);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-radius: 3.5rem;
            padding: 2.2rem 2.5rem 2.8rem;
            box-shadow: 0 35px 70px -15px #0f171e, 0 0 0 1px #6a7f8c inset, 0 0 0 2px rgba(230, 210, 160, 0.1);
            border: 1px solid #b8a77d;
        }

        /* header */
        .quiz-header {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2.2rem;
        }

        .title-section h1 {
            font-size: 2.8rem;
            font-weight: 600;
            letter-spacing: -0.5px;
            background: linear-gradient(145deg, #f7eac5, #d8cfb0);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .score-badge {
            background: #1f3c47;
            border: 2px solid #e1c491;
            padding: 0.6rem 2.2rem;
            border-radius: 60px;
            font-size: 1.6rem;
            font-weight: 700;
            color: #ffecb3;
            box-shadow: 0 6px 0 #0f262e;
        }

        /* era selector (horizontal) */
        .era-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-bottom: 2.2rem;
            justify-content: center;
            border-bottom: 1px dashed #6a7c72;
            padding-bottom: 1.5rem;
        }

        .era-btn {
            background: #2a404b;
            border: 1px solid #7f8f88;
            color: #eadbbf;
            padding: 0.7rem 1.8rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.1s;
        }

        .era-btn.active {
            background: #cfa668;
            border-color: #f7deaa;
            color: #1f2a27;
            box-shadow: 0 0 16px #ffd78c;
        }

        .era-btn:hover {
            background: #3f6372;
            color: white;
        }

        /* quiz card (question area) */
        .question-card {
            background: #2d3e44d9;
            border-radius: 3rem;
            padding: 2.2rem 2.5rem;
            border: 1px solid #b09763;
            box-shadow: 0 20px 30px -12px #09161c;
            margin-bottom: 2.5rem;
        }

        .progress-row {
            display: flex;
            justify-content: space-between;
            color: #cfc19e;
            margin-bottom: 1.2rem;
            font-size: 1rem;
        }

        .question-text {
            font-size: 1.9rem;
            font-weight: 600;
            line-height: 1.3;
            margin-bottom: 2.2rem;
            color: #fdf3de;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.2rem;
            margin-bottom: 2.2rem;
        }

        .option-btn {
            background: #1e3a42;
            border: 2px solid #5c6f6b;
            color: #f2e4ce;
            padding: 1.2rem 1rem;
            border-radius: 3rem;
            font-size: 1.2rem;
            font-weight: 500;
            cursor: pointer;
            transition: 0.1s;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .option-btn:hover:not(:disabled) {
            background: #2e5f6b;
            border-color: #e6c289;
            transform: scale(1.01);
        }

        .option-btn.selected-correct {
            background: #26734a;
            border-color: #c8f0b2;
            color: white;
        }

        .option-btn.selected-wrong {
            background: #a14d4d;
            border-color: #fbb5b5;
            color: white;
            text-decoration: line-through wavy #ffd2d2;
        }

        .option-btn.correct-highlight {
            background: #26734a;
            border-color: #b0e4a0;
        }

        .option-btn:disabled {
            opacity: 0.8;
            cursor: not-allowed;
        }

        .feedback-area {
            background: #1f313ab3;
            border-radius: 3rem;
            padding: 1.3rem 2rem;
            font-size: 1.2rem;
            border-left: 10px solid #cb9e5f;
            color: #f6e9d2;
            margin-top: 1rem;
        }

        /* next & reset */
        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
        }

        .next-btn, .reset-btn {
            background: #526e6b;
            border: none;
            color: #fcf2dc;
            font-size: 1.3rem;
            padding: 0.8rem 2.8rem;
            border-radius: 60px;
            font-weight: 700;
            cursor: pointer;
            border: 1px solid #dbb982;
            transition: 0.1s;
        }

        .next-btn:hover, .reset-btn:hover {
            background: #6a8d89;
            border-color: #fad393;
            color: white;
        }

        .reset-btn {
            background: #5f5240;
        }

        .quiz-footer {
            display: flex;
            justify-content: space-between;
            color: #b1aa92;
            margin-top: 2rem;
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <div class="quiz-app">
        <div class="quiz-header">
            <div class="title-section">
                <h1>
                    <span>üè∫</span> historical quizzes
                </h1>
            </div>
            <div class="score-badge" id="scoreDisplay">0/0</div>
        </div>

        <!-- era filter (topics) -->
        <div class="era-selector" id="eraContainer">
            <button class="era-btn active" data-era="all">üåç all eras</button>
            <button class="era-btn" data-era="ancient">üèõÔ∏è ancient</button>
            <button class="era-btn" data-era="medieval">‚öîÔ∏è medieval</button>
            <button class="era-btn" data-era="earlyModern">üé® early modern</button>
            <button class="era-btn" data-era="modern">üè≠ modern</button>
        </div>

        <!-- main quiz area -->
        <div class="question-card" id="quizCard">
            <div class="progress-row">
                <span id="questionIndex">question 1 / 5</span>
                <span id="eraTag">ancient</span>
            </div>
            <div class="question-text" id="questionText">Loading question...</div>
            <div class="options-grid" id="optionsContainer"></div>
            <div class="feedback-area" id="feedbackMessage">select an option above</div>
        </div>

        <!-- next & reset -->
        <div class="action-buttons">
            <button class="reset-btn" id="resetQuizBtn">‚ü≤ restart</button>
            <button class="next-btn" id="nextQuestionBtn">next ‚Üí</button>
        </div>

        <div class="quiz-footer">
            <span id="remainingCounter">5 questions left</span>
            <span id="correctCountSpan">‚úÖ 0 correct</span>
        </div>
    </div>

    <script>
        (function() {
            // ---------- HISTORICAL QUESTIONS DATASET ----------
            const questions = [
                // ancient
                { era: 'ancient', question: 'In which modern country is the ancient city of Babylon located?', options: ['Iran', 'Iraq', 'Syria', 'Egypt'], correct: 1, explanation: 'Babylon was in Mesopotamia, now central Iraq.' },
                { era: 'ancient', question: 'Which empire built Machu Picchu?', options: ['Aztec', 'Inca', 'Maya', 'Olmec'], correct: 1, explanation: 'Machu Picchu is a 15th-century Inca citadel in Peru.' },
                { era: 'ancient', question: 'Who was the first Roman emperor?', options: ['Julius Caesar', 'Augustus', 'Nero', 'Trajan'], correct: 1, explanation: 'Augustus (Octavian) became the first emperor in 27 BC.' },
                { era: 'ancient', question: 'The ancient Chinese philosophy of Daoism is attributed to:', options: ['Confucius', 'Laozi', 'Sun Tzu', 'Mencius'], correct: 1, explanation: 'Laozi is traditionally regarded as the author of the Tao Te Ching.' },
                // medieval
                { era: 'medieval', question: 'Which dynasty ruled England from 1154 to 1485?', options: ['Tudor', 'Plantagenet', 'Stuart', 'Norman'], correct: 1, explanation: 'The Plantagenets ruled from Henry II to Richard III.' },
                { era: 'medieval', question: 'What was the primary language of learning in medieval Europe?', options: ['Latin', 'Greek', 'Arabic', 'French'], correct: 0, explanation: 'Latin was the lingua franca of scholars and the Church.' },
                { era: 'medieval', question: 'The Battle of Hastings took place in which year?', options: ['1066', '1215', '1065', '1154'], correct: 0, explanation: 'William the Conqueror defeated Harold II in 1066.' },
                { era: 'medieval', question: 'Which city was the capital of the Byzantine Empire?', options: ['Rome', 'Athens', 'Constantinople', 'Antioch'], correct: 2, explanation: 'Constantinople (now Istanbul) fell in 1453.' },
                // early modern
                { era: 'earlyModern', question: 'Who painted the Sistine Chapel ceiling?', options: ['Leonardo da Vinci', 'Michelangelo', 'Raphael', 'Donatello'], correct: 1, explanation: 'Michelangelo painted it between 1508 and 1512.' },
                { era: 'earlyModern', question: 'The Spanish Armada was defeated in which year?', options: ['1588', '1603', '1568', '1642'], correct: 0, explanation: 'The English fleet defeated the Armada in 1588.' },
                { era: 'earlyModern', question: 'Which explorer first circumnavigated the globe?', options: ['Magellan', 'Columbus', 'Drake', 'da Gama'], correct: 0, explanation: 'Magellan led the expedition (though he died en route) in 1519‚Äì1522.' },
                { era: 'earlyModern', question: 'The Thirty Years\' War ended with which treaty?', options: ['Versailles', 'Westphalia', 'Utrecht', 'Tordesillas'], correct: 1, explanation: 'Peace of Westphalia (1648) ended the war.' },
                // modern
                { era: 'modern', question: 'Which year did the French Revolution begin?', options: ['1776', '1789', '1799', '1804'], correct: 1, explanation: 'Storming of the Bastille: 14 July 1789.' },
                { era: 'modern', question: 'Who was the US president during the Cuban Missile Crisis?', options: ['Truman', 'Eisenhower', 'Kennedy', 'Johnson'], correct: 2, explanation: 'John F. Kennedy in 1962.' },
                { era: 'modern', question: 'The first transcontinental railroad in the US was completed in:', options: ['1869', '1885', '1848', '1901'], correct: 0, explanation: 'The Golden Spike at Promontory Summit, 1869.' },
                { era: 'modern', question: 'Which empire collapsed after World War I?', options: ['British', 'Ottoman', 'Spanish', 'Portuguese'], correct: 1, explanation: 'The Ottoman Empire dissolved in 1922.' },
            ];

            // ----- DOM elements -----
            const eraBtns = document.querySelectorAll('.era-btn');
            const questionEl = document.getElementById('questionText');
            const optionsContainer = document.getElementById('optionsContainer');
            const feedbackEl = document.getElementById('feedbackMessage');
            const scoreDisplay = document.getElementById('scoreDisplay');
            const questionIndexSpan = document.getElementById('questionIndex');
            const eraTagSpan = document.getElementById('eraTag');
            const nextBtn = document.getElementById('nextQuestionBtn');
            const resetBtn = document.getElementById('resetQuizBtn');
            const remainingSpan = document.getElementById('remainingCounter');
            const correctCountSpan = document.getElementById('correctCountSpan');

            // ----- state -----
            let currentEra = 'all';
            let filteredQuestions = [...questions]; // initially all
            let currentIndex = 0; // index within filteredQuestions
            let userAnswers = [];   // track selected option index per question (or -1 if not answered)
            let score = 0;           // number of correct answers in this filtered set (recalc each time)
            let quizCompleted = false;

            // ----- helper functions -----
            function shuffleArray(arr) {
                for (let i = arr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [arr[i], arr[j]] = [arr[j], arr[i]];
                }
                return arr;
            }

            // filter by era, then shuffle, limit to 5 (or fewer)
            function applyFilterAndReset(era) {
                let newList = era === 'all' ? [...questions] : questions.filter(q => q.era === era);
                // shuffle to keep game fresh
                newList = shuffleArray(newList);
                // take up to 5
                if (newList.length > 5) newList = newList.slice(0, 5);
                filteredQuestions = newList;
                currentIndex = 0;
                userAnswers = new Array(filteredQuestions.length).fill(-1); // -1 = unanswered
                quizCompleted = false;
                updateScoreAndCounters();
                renderQuestion();
            }

            // update score (count correct based on userAnswers)
            function recalcScore() {
                let correctCount = 0;
                for (let i = 0; i < filteredQuestions.length; i++) {
                    if (userAnswers[i] === filteredQuestions[i].correct) {
                        correctCount++;
                    }
                }
                score = correctCount;
                return correctCount;
            }

            function updateScoreAndCounters() {
                const correct = recalcScore();
                const total = filteredQuestions.length;
                scoreDisplay.textContent = `${correct}/${total}`;
                correctCountSpan.innerHTML = `‚úÖ ${correct} correct`;
                const remaining = total - (userAnswers.filter(a => a !== -1).length);
                remainingSpan.textContent = `${remaining} question${remaining !==1?'s':''} left`;
            }

            // render current question (at currentIndex)
            function renderQuestion() {
                if (filteredQuestions.length === 0) {
                    questionEl.textContent = 'No questions for this era.';
                    optionsContainer.innerHTML = '';
                    feedbackEl.textContent = 'Try another era.';
                    nextBtn.disabled = true;
                    return;
                }

                const q = filteredQuestions[currentIndex];
                questionEl.textContent = q.question;
                eraTagSpan.textContent = q.era;

                // build options
                let htmlStr = '';
                q.options.forEach((opt, idx) => {
                    let extraClass = '';
                    const answered = userAnswers[currentIndex] !== -1;
                    const selectedIdx = userAnswers[currentIndex];
                    // if question answered: apply styles
                    if (answered) {
                        if (idx === q.correct) extraClass = ' correct-highlight';
                        if (idx === selectedIdx && selectedIdx === q.correct) extraClass = ' selected-correct';
                        else if (idx === selectedIdx && selectedIdx !== q.correct) extraClass = ' selected-wrong';
                    }
                    const disabledAttr = answered ? 'disabled' : '';
                    htmlStr += `<button class="option-btn${extraClass}" data-opt-index="${idx}" ${disabledAttr}><span>${String.fromCharCode(65+idx)}.</span> ${opt}</button>`;
                });
                optionsContainer.innerHTML = htmlStr;

                // attach listeners to active (non-disabled) buttons
                if (userAnswers[currentIndex] === -1) {
                    document.querySelectorAll('.option-btn').forEach(btn => {
                        if (!btn.disabled) {
                            btn.addEventListener('click', optionClickHandler);
                        }
                    });
                    feedbackEl.textContent = 'select an option above';
                } else {
                    // already answered, show explanation
                    const selectedIdx = userAnswers[currentIndex];
                    const isCorrect = (selectedIdx === q.correct);
                    feedbackEl.innerHTML = isCorrect 
                        ? `‚úÖ correct! ${q.explanation}` 
                        : `‚ùå nope. the correct answer is "${q.options[q.correct]}". ${q.explanation}`;
                }

                questionIndexSpan.textContent = `question ${currentIndex+1} / ${filteredQuestions.length}`;
                nextBtn.disabled = filteredQuestions.length === 0;
            }

            // option click handler
            function optionClickHandler(e) {
                const btn = e.currentTarget;
                const selectedIndex = parseInt(btn.dataset.optIndex, 10);
                const q = filteredQuestions[currentIndex];

                // record answer
                userAnswers[currentIndex] = selectedIndex;

                // re-render question to reflect correct/wrong styles
                renderQuestion();
                updateScoreAndCounters();

                // auto-show explanation
                const isCorrect = (selectedIndex === q.correct);
                feedbackEl.innerHTML = isCorrect 
                    ? `‚úÖ correct! ${q.explanation}` 
                    : `‚ùå the correct answer is "${q.options[q.correct]}". ${q.explanation}`;
            }

            // next question
            function goToNext() {
                if (filteredQuestions.length === 0) return;
                // if current unanswered, maybe prevent? but we allow skip, but we'll not force answer.
                if (currentIndex < filteredQuestions.length - 1) {
                    currentIndex++;
                    renderQuestion();
                } else {
                    // end of quiz
                    quizCompleted = true;
                    const totalCorrect = recalcScore();
                    feedbackEl.innerHTML = `üèÅ quiz finished! you got ${totalCorrect} out of ${filteredQuestions.length} correct.`;
                    nextBtn.disabled = true;
                }
                updateScoreAndCounters();
            }

            // reset (current era)
            function resetQuiz() {
                applyFilterAndReset(currentEra);
            }

            // era switch
            function setEra(era) {
                currentEra = era;
                eraBtns.forEach(btn => {
                    if (btn.dataset.era === era) btn.classList.add('active');
                    else btn.classList.remove('active');
                });
                applyFilterAndReset(era);
            }

            // ----- event listeners -----
            eraBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    setEra(btn.dataset.era);
                });
            });

            nextBtn.addEventListener('click', goToNext);

            resetBtn.addEventListener('click', resetQuiz);

            // initialization: all eras (active = all)
            setEra('all');
        })();
    </script>
</body>
</html>