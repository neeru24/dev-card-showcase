:root {
	--none: 0;
	--xxxs: 0.125em;
	--xxs: 0.25em;
	--xs: 0.5em;
	--sm: 0.75em;
	--md: 1em;
	--lg: 1.25em;
	--xl: 1.5em;
	--xxl: 1.75em;
	--full: 100%;
	--screen: 100vh;

	--header-h: 4em;
	--nav-w: 4.5em;
	--lib-w: 18em;
	--pipe-w: 25em;

	--border: 2px;
	--radius: 0.5em;
	--radius-lg: 1em;
	--radius-full: 50%;

	--black: 14, 16, 20;
	--charcoal: 30, 35, 45;
	--gunmetal: 25, 28, 36;
	--white: 255, 255, 255;
	--silver: 240, 240, 240;
	--grey: 153, 153, 153;

	--green: 28, 187, 58;
	--red: 255, 91, 91;
	--yellow: 255, 215, 0;

	--alpha-low: 0.05;
	--alpha-mid: 0.35;
	--alpha-high: 0.65;
	--alpha-border: 0.08;

	--blur: 10px;

	--font-ui: "Mulish", sans-serif;
	--font-code: "JetBrains Mono", monospace;
}

* {
	margin: var(--none);
	padding: var(--none);
	box-sizing: border-box;
	font-family: var(--font-ui);
	outline: none;
	-webkit-tap-highlight-color: transparent;
	&,
	&::before,
	&::after {
		user-select: none;
		transition: all 1s cubic-bezier(0.34, 1.56, 0.64, 1);
	}
}
::selection {
	background-color: rgb(var(--green));
	color: rgb(var(--charcoal));
	box-shadow: 0 0 1em rgba(var(--green), 0.4);
}

::-moz-selection {
	background-color: rgb(var(--green));
	color: rgb(var(--charcoal));
	box-shadow: 0 0 1em rgba(var(--green), 0.4);
}
::-webkit-scrollbar {
	width: var(--xs);
	height: var(--xs);
	background: rgba(var(--charcoal), var(--alpha-mid));
}

::-webkit-scrollbar-track {
	background: rgba(var(--charcoal), var(--alpha-mid));
}

::-webkit-scrollbar-thumb {
	background: rgba(var(--green), var(--alpha-mid));
	border-radius: var(--xxs);
	border: var(--border) solid rgba(var(--charcoal), 1);
}

::-webkit-scrollbar-thumb:hover {
	background: rgb(var(--green));
	box-shadow: 0 0 1em rgba(var(--green), 0.4);
}

body {
	background-color: rgb(var(--black));
	background-image: radial-gradient(
			circle at 10% 20%,
			rgba(var(--yellow), 0.05) 0%,
			transparent 40%
		),
		radial-gradient(
			circle at 90% 80%,
			rgba(var(--green), 0.15) 0%,
			transparent 40%
		);
	color: rgb(var(--silver));
	height: var(--screen);
	width: var(--full);
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

.glass-panel {
	background: rgba(var(--charcoal), var(--alpha-high));
	backdrop-filter: blur(var(--blur));
	-webkit-backdrop-filter: blur(var(--blur));
	border-right: var(--border) solid rgba(var(--white), var(--alpha-border));
}

.glass-btn {
	background: transparent;
	border: var(--border) solid rgba(var(--white), var(--alpha-border));
	color: rgb(var(--silver));
	padding: var(--xs) var(--md);
	border-radius: var(--radius);
	cursor: pointer;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: var(--xs);
	font-size: 0.9em;
	font-weight: 600;
	white-space: nowrap;

	&:hover {
		background: rgba(var(--white), var(--alpha-low));
		border-color: rgb(var(--green));
		text-shadow: 0 0 0.5em rgba(var(--green), 0.6);
		box-shadow: 0 0 1em rgba(var(--green), 0.4);
	}

	&:active {
		transform: translateY(2px);
		box-shadow: 0 0 1em rgba(var(--green), 0.4);
	}

	&.btn-cta {
		background: rgb(var(--green));
		border-color: rgb(var(--green));
		color: rgb(var(--white));
		box-shadow: 0 0 1em rgba(var(--green), 0.4);

		&:hover {
			box-shadow: 0 0 1.5em rgba(var(--green), 0.6);
			background: rgb(var(--white));
			color: rgb(var(--green));
		}
	}

	&.btn-danger:hover {
		border-color: rgb(var(--red));
		color: rgb(var(--red));
		box-shadow: 0 0 0.8em rgba(var(--red), 0.3);
	}
}

.glass-input,
.glass-text,
.p-select,
.p-input {
	width: var(--full);
	background: rgba(var(--black), 0.4);
	border: var(--border) solid rgba(var(--white), var(--alpha-border));
	color: rgb(var(--silver));
	padding: var(--xs);
	border-radius: var(--radius);
	font-family: var(--font-ui);
	font-size: 0.85em;

	&:focus {
		border-color: rgb(var(--green));
		box-shadow: 0 0 0.6em rgba(var(--green), 0.3);
	}
}

.glass-text {
	padding: var(--md);
	resize: none;
	line-height: 1.6;
	font-family: var(--font-code);
}

header {
	height: var(--header-h);
	flex-shrink: 0;
	border-bottom: var(--border) solid rgba(var(--white), var(--alpha-border));
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 0 var(--lg);
	z-index: 100;
	background: rgba(var(--charcoal), var(--alpha-high));
	backdrop-filter: blur(var(--blur));

	& .brand-group {
		display: flex;
		flex-direction: column;
		justify-content: center;

		& .brand-title {
			font-size: 1.4em;
			font-weight: 800;
			display: flex;
			align-items: center;
			gap: var(--xs);
			color: rgb(var(--silver));
			margin: 0;

			& i {
				color: rgb(var(--green));
				filter: drop-shadow(0 0 0.5em rgba(var(--green), 0.6));
			}
		}

		& .slogan-text {
			display: none;
		}
	}

	& .header-actions {
		display: flex;
		gap: var(--xs);
		align-items: center;
	}

	@media (max-width: 900px) {
		padding: 0 var(--xs);
		gap: var(--xs);

		& .brand-group {
			flex-shrink: 0;
		}

		& .brand-title span {
			display: none;
		}

		& .brand-title i {
			font-size: 1.5rem;
			margin: 0;
		}

		& .header-actions {
			flex: 1;
			width: 100%;
			justify-content: space-between;
			gap: 0;

			& .glass-btn {
				padding: 0;
				height: 2.5em;
				flex: 1;
				display: flex;
				justify-content: center;
				border: none;

				& .text {
					display: none;
				}

				& i {
					font-size: 1.2rem;
					margin: 0;
				}
			}

			& .sep-v {
				display: none;
			}
		}
	}
}

.sep-v {
	width: 2px;
	height: 1.5em;
	background: rgba(var(--white), var(--alpha-border));
	margin: 0 var(--xxs);
}

.sep-h {
	width: 50%;
	height: 2px;
	background: rgba(var(--white), var(--alpha-border));
	margin: var(--xs) 0;
	flex-shrink: 0;
}

.main-grid {
	display: grid;
	grid-template-columns: var(--nav-w) var(--lib-w) var(--pipe-w) 1fr;
	height: var(--full);
	overflow: hidden;

	@media (max-width: 1200px) {
		grid-template-columns: var(--nav-w) 16em 20em 1fr;
	}

	@media (max-width: 1024px) {
		grid-template-columns: var(--nav-w) 20em 1fr;
		& .panel-lib {
			display: none;
		}
	}

	@media (max-width: 900px) {
		grid-template-columns: var(--nav-w) 1fr;
		overflow-y: auto;
		height: calc(var(--screen) - var(--header-h));
		grid-auto-rows: min-content;

		& .panel {
			grid-column: 2;
			height: auto;
			min-height: 50vh;
			border-right: none;
			border-bottom: var(--border) solid rgba(var(--white), var(--alpha-border));
			overflow: visible;
		}

		& .panel-nav {
			grid-column: 1;
			grid-row: 1 / 10;
			height: auto;
			min-height: 100%;
			position: sticky;
			top: 0;
			align-self: start;
			border-right: var(--border) solid rgba(var(--white), var(--alpha-border));
			border-bottom: none;
		}

		& .panel-lib {
			display: flex !important;
		}
	}
}

.panel {
	display: flex;
	flex-direction: column;
	overflow: hidden;
	height: var(--full);
	position: relative;
}

.panel-nav {
	background: rgba(var(--gunmetal), 0.95);
	align-items: center;
	padding-top: var(--lg);
	gap: var(--md);
	z-index: 10;
	border-right: var(--border) solid rgba(var(--white), var(--alpha-border));
	display: flex;
	flex-direction: column;

	& .nav-item {
		width: 3em;
		height: 3em;
		border-radius: var(--radius-full);
		display: flex;
		align-items: center;
		justify-content: center;
		color: rgb(var(--grey));
		cursor: pointer;
		border: 2px solid transparent;
		font-size: 1.1em;
		text-decoration: none;
		background: transparent;
		border: var(--border) solid rgba(var(--white), var(--alpha-border));
		flex-shrink: 0;

		& span {
			display: none;
		}

		&:hover {
			background: rgba(var(--white), var(--alpha-low));
			color: rgb(var(--silver));
			border-color: rgba(var(--white), 0.2);
		}

		&.active {
			background: rgba(var(--green), 0.15);
			color: rgb(var(--green));
			border-color: rgb(var(--green));
			box-shadow: 0 0 1em rgba(var(--green), 0.5);
		}
	}
}

.panel-lib {
	& .search-area {
		padding: var(--md);
		border-bottom: var(--border) solid rgba(var(--white), var(--alpha-border));
	}

	& .scroll-zone {
		flex: 1;
		overflow-y: auto;
		padding: var(--md);
		padding-bottom: 5em;
	}
}

.acc-item {
	margin-bottom: var(--xs);

	&.active .acc-header {
		color: rgb(var(--silver));
		background: rgba(var(--white), 0.03);
		border-color: rgba(var(--white), var(--alpha-border));

		& i {
			color: rgb(var(--green));
			transform: rotate(180deg);
		}
	}

	&.active .acc-body {
		display: block;
		animation: fade 0.2s ease;
	}
}

.acc-header {
	padding: var(--sm);
	color: rgb(var(--grey));
	font-size: 0.9em;
	font-weight: 600;
	cursor: pointer;
	display: flex;
	justify-content: space-between;
	align-items: center;
	gap: var(--xs);
	border-radius: var(--radius);
	border: 1px solid transparent;

	&:hover {
		color: rgb(var(--silver));
		background: rgba(var(--white), var(--alpha-low));
	}
}

.acc-body {
	display: none;
	padding: var(--xs) 0 var(--md) 0;
}

.tool-card {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: var(--xs) var(--sm);
	margin-bottom: var(--xxs);
	border-radius: var(--radius);
	cursor: grab;
	border: var(--border) solid rgba(var(--white), var(--alpha-border));
	background: rgba(var(--white), 0.03);

	&:hover {
		background: rgba(var(--white), 0.08);
		transform: translateX(3px);
	}

	&.is-active,
	&.in-use {
		border-left: 3px solid rgb(var(--green));
		background: linear-gradient(
			90deg,
			rgba(var(--green), 0.15) 0%,
			transparent 100%
		);
	}

	& .tool-info {
		display: flex;
		align-items: center;
		gap: var(--xs);
		flex: 1;
	}

	& .tool-name {
		font-size: 0.85em;
		color: rgb(var(--grey));
	}

	&:hover .tool-name {
		color: rgb(var(--silver));
	}

	& .tool-actions {
		display: flex;
		flex-direction: row;
		align-items: center;
		gap: var(--xxs);
		flex-shrink: 0;
	}
}

.fav-star {
	color: rgb(var(--grey));
	padding: var(--xxs);
	cursor: pointer;

	&:hover {
		transform: scale(1.2);
		color: rgb(var(--white));
	}

	&.active {
		color: rgb(var(--yellow));
		text-shadow: 0 0 0.5em rgba(var(--yellow), 0.6);
	}
}

.panel-pipe {
	background: rgba(var(--black), 0.6);

	& .panel-head {
		padding: var(--md);
		border-bottom: var(--border) solid rgba(var(--white), var(--alpha-border));
		display: flex;
		justify-content: space-between;
		align-items: center;
		background: rgba(var(--black), 0.1);
		flex-wrap: wrap;
		gap: var(--xs);

		& .head-title {
			color: rgb(var(--silver));
			font-weight: 700;
		}

		& .badge {
			background: rgb(var(--green));
			color: rgb(var(--black));
			padding: var(--xxs) var(--xs);
			border-radius: var(--radius);
			font-size: 0.75em;
			font-weight: 700;
			box-shadow: 0 0 0.5em rgba(var(--green), 0.6);
			margin-left: var(--xs);
		}
	}

	& .scroll-zone {
		flex: 1;
		overflow-y: auto;
		padding: var(--md);
	}

	& .panel-foot {
		border-top: var(--border) solid rgba(var(--white), var(--alpha-border));
		padding: var(--md);
		background: rgba(var(--black), 0.2);
		display: flex;
		gap: var(--xs);
	}
}

.pipe-card {
	background: rgba(var(--white), 0.06);
	border: var(--border) solid rgba(var(--white), var(--alpha-border));
	border-radius: var(--radius);
	padding: var(--md);
	margin-bottom: var(--sm);

	&.dragging {
		opacity: 0.5;
		border: var(--border) dashed rgb(var(--green));
	}
}

.card-top {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: var(--sm);
	font-weight: 700;
	color: rgb(var(--silver));
}

.card-ctrls {
	display: flex;
	gap: var(--xs);
	align-items: center;

	& button {
		background: transparent;
		border: none;
		color: rgb(var(--grey));
		cursor: pointer;
		font-size: 0.9em;
		padding: var(--xxs);
		display: flex;
		align-items: center;
		justify-content: center;

		&:hover {
			color: rgb(var(--silver));
		}

		&.del:hover {
			color: rgb(var(--red));
		}
	}
}

.msg-empty {
	text-align: center;
	color: rgb(var(--grey));
	margin-top: var(--xl);
	font-style: italic;
}

.p-row {
	display: flex;
	gap: var(--xs);
	align-items: center;
	margin-bottom: var(--xs);
	width: var(--full);

	& .p-label {
		font-size: 0.75em;
		color: rgb(var(--grey));
		flex: 1;
	}

	& .p-input,
	& .p-select {
		flex: 1;
		min-width: 0;
	}
}

.p-color {
	width: 2em;
	height: 2em;
	padding: 0;
	border: 1px solid rgba(var(--white), var(--alpha-border));
	border-radius: var(--radius);
	background: transparent;
	cursor: pointer;
}

.fa-square {
	color: rgb(var(--grey));
	font-size: 0.9em;
}

.toggle-btn {
	background: rgba(var(--charcoal), 0.5);
	border: 1px solid rgba(var(--white), var(--alpha-border));
	color: rgb(var(--grey));
	padding: var(--xxs) var(--xs);
	border-radius: var(--radius);
	font-size: 0.75em;
	cursor: pointer;
	width: var(--full);

	&:hover {
		color: rgb(var(--silver));
		border-color: rgba(var(--white), 0.3);
	}

	&.active {
		background: rgb(var(--green));
		color: rgb(var(--white));
		border-color: rgb(var(--green));
	}
}

.panel-edit {
	gap: var(--md);
	padding: var(--md);

	@media (max-width: 900px) {
		flex-direction: column-reverse;

		& .edit-container {
			min-height: 40vh;
		}
	}

	& .edit-container {
		display: flex;
		flex-direction: column;
		flex: 1;
		background: rgba(var(--charcoal), 0.4);
		border: var(--border) solid rgba(var(--white), var(--alpha-border));
		border-radius: var(--radius);
		overflow: hidden;
		box-shadow: 0 4px 6px rgba(var(--black), 0.1);

		& .edit-toolbar {
			padding: var(--xs) var(--md);
			background: rgba(var(--black), 0.2);
			border-bottom: var(--border) solid rgba(var(--white), var(--alpha-border));
			display: flex;
			justify-content: space-between;
			align-items: center;

			& .label-sm {
				font-size: 0.8em;
				letter-spacing: 0.1em;
				color: rgb(var(--grey));
				text-transform: uppercase;
				font-weight: 700;
			}
		}
	}
}

.sq-btn {
	width: 2em;
	height: 2em;
	border: var(--border) solid rgba(var(--white), var(--alpha-border));
	background: transparent;
	color: rgb(var(--silver));
	border-radius: var(--radius);
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;

	&:hover {
		background: rgba(var(--white), var(--alpha-low));
		border-color: rgb(var(--green));
		color: rgb(var(--green));
		box-shadow: 0 0 1em rgba(var(--green), 0.4);
	}

	&.active {
		background: rgb(var(--green));
		color: rgb(var(--white));
		border-color: rgb(var(--green));
		box-shadow: 0 0 1em rgba(var(--green), 0.4);
	}

	&.add {
		&:hover {
			background: rgb(var(--green));
			color: rgb(var(--white));
		}
	}

	&.run {
		&:hover {
			background: rgb(var(--green));
			color: rgb(var(--white));
		}
	}
}

.action-group {
	display: flex;
	gap: var(--xs);
}

.stats-pill {
	font-size: 0.75em;
	color: rgb(var(--grey));
	margin-left: var(--sm);
	background: rgba(var(--white), 0.05);
	padding: 2px 6px;
	border-radius: var(--radius);
}

.modal-box {
	position: fixed;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -45%);
	width: 500px;
	max-width: 90%;
	padding: 2.5em;
	background: rgba(var(--gunmetal), 0.95);
	border: var(--border) solid rgba(var(--white), var(--alpha-border));
	border-radius: var(--radius);
	opacity: 0;
	pointer-events: none;
	z-index: 2000;
	box-shadow: 0 20px 50px rgba(var(--black), 0.5);
	backdrop-filter: blur(20px);

	&.open {
		opacity: 1;
		pointer-events: all;
		transform: translate(-50%, -50%);
	}

	& .modal-head {
		font-size: 1.6em;
		color: rgb(var(--white));
		margin: 0 0 var(--md) 0;
	}

	& .cat-title {
		color: rgb(var(--green));
		margin-top: var(--lg);
		font-size: 0.85em;
		text-transform: uppercase;
		font-weight: 700;
		letter-spacing: 1px;
	}

	& .modal-intro,
	& .modal-body {
		color: rgb(var(--grey));
		margin-bottom: var(--md);
		line-height: 1.6;
		font-size: 0.95em;
	}

	& .legal-txt {
		margin-top: var(--lg);
		padding-top: var(--md);
		border-top: 1px solid rgba(var(--white), 0.1);
		font-size: 0.75em;
		color: rgb(var(--grey));
	}
}

.btn-full {
	width: var(--full);
	justify-content: center;
}

#toast-container {
	position: fixed;
	bottom: var(--lg);
	right: var(--lg);
	z-index: 99999;
	display: flex;
	flex-direction: column;
	gap: var(--md);
	pointer-events: none;

	& .toast {
		background: rgba(var(--gunmetal), 0.9);
		border: 1px solid rgba(var(--white), var(--alpha-border));
		backdrop-filter: blur(15px);
		padding: var(--md);
		border-radius: var(--radius);
		color: rgb(var(--silver));
		font-size: 0.9em;
		box-shadow: 0 10px 30px rgba(var(--black), 0.5);
		display: flex;
		align-items: center;
		gap: var(--md);
		animation: slideIn 0.3s forwards;
		border-left: 4px solid rgb(var(--green));
		pointer-events: all;

		& i {
			color: rgb(var(--green));
			font-size: 1.2em;
		}

		&.error {
			border-left-color: rgb(var(--red));
			& i {
				color: rgb(var(--red));
			}
		}
	}
}

@keyframes slideIn {
	from {
		transform: translateX(100%);
		opacity: 0;
	}
	to {
		transform: translateX(0);
		opacity: 1;
	}
}

@keyframes fade {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

.hidden-file {
	display: none;
}

.glow-text {
	color: rgb(var(--green));
	text-shadow: 0 0 10px rgba(var(--green), 0.6);
}
