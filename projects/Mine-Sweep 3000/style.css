/* ═══════════════════════════════════════════════════════════
   Mine-Sweep 3000 · style.css
   Cyberpunk / Dark Mode theme — Pure DOM, CSS Grid
   ═══════════════════════════════════════════════════════════ */

/* ────────────────────────────────────────────
   1. CSS RESET
   ──────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { font-size: 16px; }

body {
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  align-items: center;
  background: #070010;
  background-image:
    radial-gradient(ellipse 80% 40% at 50% 0%, rgba(0,229,255,0.06) 0%, transparent 60%),
    radial-gradient(ellipse 60% 30% at 80% 100%, rgba(255,0,255,0.05) 0%, transparent 55%);
  font-family: 'Space Mono', 'Courier New', monospace;
  color: #e8eaf6;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  overflow-x: hidden;
}

button { cursor: pointer; font-family: inherit; }

/* Visually hidden for screen readers */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0,0,0,0);
  white-space: nowrap;
  border-width: 0;
}

/* ────────────────────────────────────────────
   2. CSS CUSTOM PROPERTIES
   ──────────────────────────────────────────── */
:root {
  /* Base */
  --bg:           #070010;
  --surface:      #0f0020;
  --surface-2:    #160030;

  /* Neon accents */
  --cyan:         #00e5ff;
  --magenta:      #ff00ff;
  --green:        #39ff14;
  --red:          #ff3344;
  --yellow:       #ffe600;

  /* Cell states */
  --cell-unrevealed:  #1a0035;
  --cell-hover:       #240045;
  --cell-revealed:    #0d001f;
  --cell-border-out:  rgba(0,229,255,0.18);
  --cell-border-in:   rgba(0,0,0,0.5);

  /* Number colors (classic Minesweeper palette) */
  --num-1: #3b82f6;   /* Blue       */
  --num-2: #22c55e;   /* Green      */
  --num-3: #ef4444;   /* Red        */
  --num-4: #7c3aed;   /* Dark blue  */
  --num-5: #dc2626;   /* Dark red   */
  --num-6: #06b6d4;   /* Teal       */
  --num-7: #000;      /* Black (on light) → white on dark */
  --num-8: #6b7280;   /* Grey       */

  /* Glass */
  --glass-bg:     rgba(255,255,255,0.03);
  --glass-border: rgba(255,255,255,0.09);
  --glass-blur:   14px;

  /* Glows */
  --glow-cyan:    0 0 10px rgba(0,229,255,0.65), 0 0 30px rgba(0,229,255,0.25);

  /* Fonts */
  --font-display: 'Orbitron', monospace;
  --font-mono:    'Space Mono', 'Courier New', monospace;

  /* Radii */
  --r-sm:   5px;
  --r-md:   10px;
  --r-lg:   18px;
  --r-pill: 999px;

  /* Transitions */
  --t-fast: 120ms ease;
  --t-pop:  280ms cubic-bezier(0.34,1.56,0.64,1);
}

/* ────────────────────────────────────────────
   3. HEADER / HUD BAR
   ──────────────────────────────────────────── */
#app-header {
  width: 100%;
  max-width: 540px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 20px;
  background: var(--glass-bg);
  border-bottom: 1px solid var(--glass-border);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  position: sticky;
  top: 0;
  z-index: 30;
}

.hud-stat {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 80px;
}

.hud-icon { font-size: 1.1rem; }

.hud-num {
  font-family: var(--font-display);
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--cyan);
  text-shadow: var(--glow-cyan);
  letter-spacing: 0.04em;
  min-width: 3ch;
}

/* Reset (smiley) button */
.reset-btn {
  font-size: 1.6rem;
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 50%;
  transition: transform var(--t-pop), box-shadow var(--t-fast);
  line-height: 1;
}

.reset-btn:hover {
  transform: scale(1.15);
  box-shadow: 0 0 16px rgba(0,229,255,0.3);
  border-color: rgba(0,229,255,0.4);
}

.reset-btn:active { transform: scale(0.92); }

/* ────────────────────────────────────────────
   4. DIFFICULTY NAV
   ──────────────────────────────────────────── */
#diff-nav {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: center;
  padding: 12px 16px;
  width: 100%;
  max-width: 600px;
}

.diff-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 8px 18px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: var(--r-md);
  font-family: var(--font-display);
  font-size: 0.6rem;
  letter-spacing: 0.12em;
  color: rgba(232,234,246,0.5);
  transition: color var(--t-fast), border-color var(--t-fast), background var(--t-fast);
}

.diff-btn:hover, .diff-btn.active {
  color: var(--cyan);
  border-color: rgba(0,229,255,0.45);
  background: rgba(0,229,255,0.07);
}

.diff-sub {
  font-family: 'Space Mono', monospace;
  font-size: 0.52rem;
  opacity: 0.6;
  letter-spacing: 0.06em;
}

/* ────────────────────────────────────────────
   5. BOARD & GRID
   ──────────────────────────────────────────── */
#board-wrap {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
  overflow: auto;
  width: 100%;
}

#board {
  display: grid;
  /* grid-template-columns set by JS: repeat(cols, Xpx) */
  gap: 2px;
  background: rgba(0,229,255,0.05);
  border: 1px solid rgba(0,229,255,0.12);
  border-radius: var(--r-md);
  padding: 4px;
  box-shadow: 0 0 40px rgba(0,229,255,0.06), 0 8px 48px rgba(0,0,0,0.6);
}

/* ── CELL ─────────────────────────────────── */
.cell {
  /* Size set by JS via --cell-size var on #board */
  width:  var(--cell-size, 32px);
  height: var(--cell-size, 32px);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-mono);
  font-size: calc(var(--cell-size, 32px) * 0.42);
  font-weight: 700;
  border-radius: var(--r-sm);
  border: 1px solid;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  transition: background var(--t-fast), border-color var(--t-fast), transform var(--t-pop);

  /* Default: unrevealed */
  background: var(--cell-unrevealed);
  border-color: var(--cell-border-out);
}

.cell::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.06) 0%, transparent 60%);
  border-radius: inherit;
  pointer-events: none;
}

/* Hover (unrevealed only) */
.cell:not([data-state="revealed"]):not([data-state="mine"]):hover {
  background: var(--cell-hover);
  border-color: rgba(0,229,255,0.35);
  transform: scale(1.04);
}

/* ── REVEALED ──────────────────────────── */
.cell[data-state="revealed"] {
  background: var(--cell-revealed);
  border-color: var(--cell-border-in);
  cursor: default;
  transform: none;
}

.cell[data-state="revealed"]::before { display: none; }

/* Number colours via data-num */
.cell[data-num="1"] { color: var(--num-1); }
.cell[data-num="2"] { color: var(--num-2); }
.cell[data-num="3"] { color: var(--num-3); }
.cell[data-num="4"] { color: var(--num-4); }
.cell[data-num="5"] { color: var(--num-5); }
.cell[data-num="6"] { color: var(--num-6); }
.cell[data-num="7"] { color: rgba(232,234,246,0.5); }
.cell[data-num="8"] { color: var(--num-8); }

/* ── FLAGGED ──────────────────────────── */
.cell[data-state="flagged"] {
  background: rgba(255,0,255,0.1);
  border-color: rgba(255,0,255,0.4);
}

/* ── QUESTIONED ───────────────────────── */
.cell[data-state="questioned"] {
  background: rgba(255,230,0,0.07);
  border-color: rgba(255,230,0,0.35);
  color: var(--yellow);
}

/* ── MINE (loss reveal) ───────────────── */
.cell[data-state="mine"] {
  background: rgba(255,51,68,0.25);
  border-color: rgba(255,51,68,0.6);
  cursor: default;
  animation: mineReveal 400ms ease both;
}

/* The mine the player actually hit */
.cell[data-state="mine-hit"] {
  background: rgba(255,51,68,0.6);
  border-color: #ff3344;
  cursor: default;
  animation: mineHit 300ms ease both;
}

/* Flag on a mine at reveal (wrong flag) */
.cell[data-state="mine-wrong"] {
  background: rgba(255,51,68,0.15);
  border-color: rgba(255,51,68,0.4);
  cursor: default;
}

/* ── ANIMATIONS ───────────────────────── */
@keyframes mineReveal {
  0%   { transform: scale(0.5); opacity: 0; }
  60%  { transform: scale(1.15); }
  100% { transform: scale(1);   opacity: 1; }
}

@keyframes mineHit {
  0%,100% { transform: scale(1); }
  30%     { transform: scale(1.3); box-shadow: 0 0 20px #ff3344; }
}

@keyframes cellReveal {
  from { transform: scale(0.85); opacity: 0.5; }
  to   { transform: scale(1);    opacity: 1; }
}

.cell[data-state="revealed"] {
  animation: cellReveal 150ms ease both;
}

/* Win pulse on all revealed cells */
@keyframes winPulse {
  0%,100% { box-shadow: none; }
  50%     { box-shadow: 0 0 10px var(--cyan); border-color: rgba(0,229,255,0.5); }
}

.cell.win-pulse {
  animation: winPulse 800ms ease infinite;
}

/* ────────────────────────────────────────────
   6. RESULT OVERLAY
   ──────────────────────────────────────────── */
#overlay-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(7,0,16,0.72);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  z-index: 40;
}

#overlay-backdrop.hidden { display: none; }

#overlay {
  position: fixed;
  inset: 0;
  z-index: 50;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  animation: fadeIn 300ms both;
}

#overlay.hidden { display: none; }

.overlay-card {
  pointer-events: all;
  width: min(380px, 92vw);
  padding: 2.5rem 2rem;
  background: linear-gradient(135deg,rgba(255,255,255,0.055),rgba(255,255,255,0.012));
  border: 1px solid var(--glass-border);
  border-radius: var(--r-lg);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.09), 0 8px 60px rgba(0,0,0,0.7);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  text-align: center;
  animation: cardPop 450ms cubic-bezier(0.34,1.56,0.64,1) both;
}

.overlay-icon  { font-size: 3.2rem; line-height: 1; }

.overlay-title {
  font-family: var(--font-display);
  font-size: 1.5rem;
  font-weight: 900;
  color: var(--cyan);
  text-shadow: var(--glow-cyan);
  letter-spacing: 0.06em;
}

.overlay-msg {
  font-size: 0.85rem;
  color: rgba(232,234,246,0.55);
  line-height: 1.7;
}

.overlay-btn {
  margin-top: 0.5rem;
  padding: 0.65rem 2.2rem;
  font-family: var(--font-display);
  font-size: 0.7rem;
  font-weight: 700;
  letter-spacing: 0.18em;
  color: #070010;
  background: var(--cyan);
  border: none;
  border-radius: var(--r-pill);
  box-shadow: 0 0 18px rgba(0,229,255,0.5);
  transition: transform var(--t-pop), box-shadow var(--t-fast);
}

.overlay-btn:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 0 28px rgba(0,229,255,0.7);
}

.overlay-btn:active { transform: scale(0.97); }

/* ────────────────────────────────────────────
   7. ANIMATIONS
   ──────────────────────────────────────────── */
@keyframes fadeIn  { from{opacity:0;} to{opacity:1;} }
@keyframes cardPop { from{opacity:0;transform:scale(0.86) translateY(20px);} to{opacity:1;transform:scale(1) translateY(0);} }

/* ────────────────────────────────────────────
   8. RESPONSIVE
   ──────────────────────────────────────────── */
@media (max-width: 480px) {
  #app-header { padding: 8px 12px; }
  .hud-num { font-size: 0.9rem; }
  .reset-btn { font-size: 1.3rem; width: 40px; height: 40px; }
  .diff-btn { padding: 6px 10px; font-size: 0.52rem; }
  #board-wrap { padding: 8px; }
}

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}
