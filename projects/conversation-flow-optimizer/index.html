<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversation Flow Optimizer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1><i class="fas fa-comments"></i> Conversation Flow Optimizer</h1>
                    <p class="subtitle">Intelligent dialogue optimization for multi-turn interactions</p>
                </div>
                <div class="header-right">
                    <div class="status-indicator">
                        <span class="status-dot active"></span>
                        <span class="status-text">Optimizing</span>
                    </div>
                    <div class="last-update">Last optimized: <span id="last-update">Just now</span></div>
                </div>
            </div>
        </header>

        <div class="dashboard-grid">
            <!-- Overview Panel -->
            <div class="panel overview-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-chart-line"></i> Flow Overview</h2>
                    <div class="panel-controls">
                        <button id="refresh-overview" class="btn-secondary">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>
                <div class="overview-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="total-conversations">0</div>
                        <div class="stat-label">Total Conversations</div>
                        <div class="stat-trend" id="conversations-trend">
                            <i class="fas fa-arrow-up"></i> +15%
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="avg-turns">0</div>
                        <div class="stat-label">Avg Turns per Conversation</div>
                        <div class="stat-trend" id="turns-trend">
                            <i class="fas fa-arrow-down"></i> -8%
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="optimization-score">0%</div>
                        <div class="stat-label">Optimization Score</div>
                        <div class="stat-trend" id="score-trend">
                            <i class="fas fa-arrow-up"></i> +12%
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="success-rate">0%</div>
                        <div class="stat-label">Success Rate</div>
                        <div class="stat-trend" id="success-trend">
                            <i class="fas fa-arrow-up"></i> +5%
                        </div>
                    </div>
                </div>
            </div>

            <!-- Flow Visualization -->
            <div class="panel flow-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-project-diagram"></i> Conversation Flow</h2>
                    <div class="panel-controls">
                        <select id="flow-view">
                            <option value="tree">Tree View</option>
                            <option value="linear">Linear View</option>
                            <option value="circular">Circular View</option>
                        </select>
                        <button id="reset-flow" class="btn-secondary">
                            <i class="fas fa-undo"></i> Reset
                        </button>
                    </div>
                </div>
                <div class="flow-container">
                    <canvas id="flow-canvas" width="800" height="400"></canvas>
                    <div class="flow-controls">
                        <button id="zoom-in" class="btn-icon">
                            <i class="fas fa-plus"></i>
                        </button>
                        <button id="zoom-out" class="btn-icon">
                            <i class="fas fa-minus"></i>
                        </button>
                        <button id="fit-view" class="btn-icon">
                            <i class="fas fa-expand"></i>
                        </button>
                        <button id="toggle-labels" class="btn-icon">
                            <i class="fas fa-tag"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Optimization Controls -->
            <div class="panel controls-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-sliders-h"></i> Optimization Controls</h2>
                </div>
                <div class="controls-grid">
                    <div class="control-group">
                        <label for="efficiency-weight">Efficiency Weight</label>
                        <div class="slider-container">
                            <input type="range" id="efficiency-weight" min="0" max="100" value="40">
                            <span class="slider-value" id="efficiency-value">40%</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label for="clarity-weight">Clarity Weight</label>
                        <div class="slider-container">
                            <input type="range" id="clarity-weight" min="0" max="100" value="35">
                            <span class="slider-value" id="clarity-value">35%</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label for="engagement-weight">Engagement Weight</label>
                        <div class="slider-container">
                            <input type="range" id="engagement-weight" min="0" max="100" value="25">
                            <span class="slider-value" id="engagement-value">25%</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label for="complexity-threshold">Complexity Threshold</label>
                        <div class="slider-container">
                            <input type="range" id="complexity-threshold" min="1" max="10" value="5">
                            <span class="slider-value" id="complexity-value">5</span>
                        </div>
                    </div>
                </div>
                <div class="control-buttons">
                    <button id="run-optimization" class="btn-primary">
                        <i class="fas fa-play"></i> Run Optimization
                    </button>
                    <button id="auto-optimize" class="btn-accent">
                        <i class="fas fa-magic"></i> Auto-Optimize
                    </button>
                    <button id="reset-controls" class="btn-secondary">
                        <i class="fas fa-undo"></i> Reset
                    </button>
                </div>
            </div>

            <!-- Pattern Analysis -->
            <div class="panel patterns-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-search"></i> Pattern Analysis</h2>
                    <div class="panel-controls">
                        <select id="analysis-period">
                            <option value="1h">Last Hour</option>
                            <option value="24h" selected>Last 24 Hours</option>
                            <option value="7d">Last 7 Days</option>
                            <option value="30d">Last 30 Days</option>
                        </select>
                    </div>
                </div>
                <div class="patterns-content">
                    <div class="pattern-metrics">
                        <div class="metric">
                            <span class="metric-label">Common Paths</span>
                            <span class="metric-value" id="common-paths">12</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Dead Ends</span>
                            <span class="metric-value" id="dead-ends">3</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Loop Frequency</span>
                            <span class="metric-value" id="loop-frequency">8%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Branch Efficiency</span>
                            <span class="metric-value" id="branch-efficiency">87%</span>
                        </div>
                    </div>
                    <div class="top-patterns" id="top-patterns">
                        <!-- Top conversation patterns will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Conversation Simulator -->
            <div class="panel simulator-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-robot"></i> Conversation Simulator</h2>
                    <div class="panel-controls">
                        <button id="start-simulation" class="btn-primary">
                            <i class="fas fa-play"></i> Start
                        </button>
                        <button id="reset-simulation" class="btn-secondary">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>
                </div>
                <div class="simulator-content">
                    <div class="conversation-display" id="conversation-display">
                        <!-- Conversation messages will be displayed here -->
                    </div>
                    <div class="simulator-input">
                        <input type="text" id="user-input" placeholder="Type your message..." disabled>
                        <button id="send-message" class="btn-primary" disabled>
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    <div class="simulation-controls">
                        <label>
                            <input type="checkbox" id="auto-respond"> Auto-respond
                        </label>
                        <label>
                            <input type="checkbox" id="show-suggestions"> Show suggestions
                        </label>
                        <select id="response-speed">
                            <option value="fast">Fast</option>
                            <option value="normal" selected>Normal</option>
                            <option value="slow">Slow</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Optimization Suggestions -->
            <div class="panel suggestions-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-lightbulb"></i> Optimization Suggestions</h2>
                    <div class="panel-controls">
                        <button id="apply-suggestions" class="btn-primary">
                            <i class="fas fa-check"></i> Apply All
                        </button>
                    </div>
                </div>
                <div class="suggestions-list" id="suggestions-list">
                    <!-- Optimization suggestions will be populated here -->
                </div>
            </div>

            <!-- Performance Analytics -->
            <div class="panel analytics-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-chart-bar"></i> Performance Analytics</h2>
                </div>
                <div class="analytics-charts">
                    <div class="chart-container">
                        <canvas id="efficiency-chart" width="300" height="200"></canvas>
                    </div>
                    <div class="chart-container">
                        <canvas id="engagement-chart" width="300" height="200"></canvas>
                    </div>
                </div>
                <div class="analytics-metrics">
                    <div class="metric">
                        <span class="metric-label">Response Time</span>
                        <span class="metric-value" id="response-time">1.2s</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">User Satisfaction</span>
                        <span class="metric-value" id="user-satisfaction">94%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Completion Rate</span>
                        <span class="metric-value" id="completion-rate">89%</span>
                    </div>
                </div>
            </div>

            <!-- Flow Editor -->
            <div class="panel editor-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-edit"></i> Flow Editor</h2>
                    <div class="panel-controls">
                        <button id="add-node" class="btn-primary">
                            <i class="fas fa-plus"></i> Add Node
                        </button>
                        <button id="save-flow" class="btn-secondary">
                            <i class="fas fa-save"></i> Save
                        </button>
                    </div>
                </div>
                <div class="editor-content">
                    <div class="node-palette">
                        <div class="palette-item" data-type="message">
                            <i class="fas fa-comment"></i> Message
                        </div>
                        <div class="palette-item" data-type="question">
                            <i class="fas fa-question"></i> Question
                        </div>
                        <div class="palette-item" data-type="condition">
                            <i class="fas fa-code-branch"></i> Condition
                        </div>
                        <div class="palette-item" data-type="action">
                            <i class="fas fa-cogs"></i> Action
                        </div>
                    </div>
                    <div class="properties-panel" id="properties-panel">
                        <h4>Properties</h4>
                        <div class="properties-content">
                            <!-- Node properties will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Node Modal -->
        <div id="add-node-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-plus"></i> Add Conversation Node</h3>
                    <button class="close-modal" id="close-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="add-node-form">
                    <div class="form-group">
                        <label for="node-type">Node Type</label>
                        <select id="node-type" required>
                            <option value="message">Message</option>
                            <option value="question">Question</option>
                            <option value="condition">Condition</option>
                            <option value="action">Action</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="node-content">Content</label>
                        <textarea id="node-content" required placeholder="Enter node content..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="node-label">Label (Optional)</label>
                        <input type="text" id="node-label" placeholder="Node label">
                    </div>
                    <div class="form-actions">
                        <button type="button" id="cancel-add" class="btn-secondary">Cancel</button>
                        <button type="submit" class="btn-primary">Add Node</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>