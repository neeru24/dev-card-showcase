<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversation Replay Simulator</title>
    <link rel="stylesheet" href="conversation-replay-simulator.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-comments"></i>
                    <div>
                        <h1 class="header-title">Conversation Replay Simulator</h1>
                        <p class="header-subtitle">Advanced conversation analysis and simulation tool</p>
                    </div>
                </div>
                <div class="connection-status">
                    <span class="status-indicator"></span>
                    <span id="connectionStatus">Online</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav>
            <ul class="nav-list">
                <li class="nav-item">
                    <a href="#dashboard" class="nav-link active">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#recorder" class="nav-link">
                        <i class="fas fa-microphone"></i> Recorder
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#replay" class="nav-link">
                        <i class="fas fa-play-circle"></i> Replay
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#analytics" class="nav-link">
                        <i class="fas fa-chart-line"></i> Analytics
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#scenarios" class="nav-link">
                        <i class="fas fa-sitemap"></i> Scenarios
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#settings" class="nav-link">
                        <i class="fas fa-cog"></i> Settings
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <h2 class="section-title">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </h2>

            <!-- Metrics Grid -->
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="metric-content">
                        <h3 class="metric-title">Total Conversations</h3>
                        <div class="metric-value" id="totalConversationsValue">0</div>
                        <div class="metric-change positive" id="totalConversationsChange">+0%</div>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="metric-content">
                        <h3 class="metric-title">Avg. Duration</h3>
                        <div class="metric-value" id="avgDurationValue">0m</div>
                        <div class="metric-change" id="avgDurationChange">0%</div>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="metric-content">
                        <h3 class="metric-title">Active Participants</h3>
                        <div class="metric-value" id="activeParticipantsValue">0</div>
                        <div class="metric-change positive" id="activeParticipantsChange">+0%</div>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="metric-content">
                        <h3 class="metric-title">AI Confidence</h3>
                        <div class="metric-value" id="aiConfidenceValue">0%</div>
                        <div class="metric-change positive" id="aiConfidenceChange">+0%</div>
                    </div>
                </div>
            </div>

            <!-- Charts Container -->
            <div class="charts-container">
                <div class="chart-container">
                    <h3 class="chart-title">Conversation Trends</h3>
                    <canvas id="conversationTrendsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">Participant Activity</h3>
                    <canvas id="participantActivityChart"></canvas>
                </div>
            </div>

            <!-- Recent Conversations -->
            <div class="recent-conversations">
                <h3>Recent Conversations</h3>
                <div class="conversation-list" id="recentConversationsList">
                    <div class="empty-state">
                        <i class="fas fa-comments"></i>
                        <p>No conversations recorded yet</p>
                        <button class="btn btn-primary" onclick="switchSection('recorder')">
                            <i class="fas fa-plus"></i> Start Recording
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Recorder Section -->
        <section id="recorder" class="section">
            <h2 class="section-title">
                <i class="fas fa-microphone"></i> Conversation Recorder
            </h2>

            <div class="recorder-controls">
                <div class="control-group">
                    <label for="conversationTitle">Conversation Title</label>
                    <input type="text" id="conversationTitle" class="form-control" placeholder="Enter conversation title...">
                </div>

                <div class="control-group">
                    <label for="participantCount">Number of Participants</label>
                    <select id="participantCount" class="form-control">
                        <option value="2">2 Participants</option>
                        <option value="3">3 Participants</option>
                        <option value="4">4 Participants</option>
                        <option value="5">5 Participants</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="recordingMode">Recording Mode</label>
                    <select id="recordingMode" class="form-control">
                        <option value="manual">Manual Entry</option>
                        <option value="real-time">Real-time Chat</option>
                        <option value="import">Import Conversation</option>
                    </select>
                </div>
            </div>

            <div class="recording-interface">
                <div class="participants-panel">
                    <h3>Participants</h3>
                    <div class="participants-list" id="participantsList">
                        <!-- Participants will be dynamically added -->
                    </div>
                    <button class="btn btn-secondary" id="addParticipantBtn">
                        <i class="fas fa-plus"></i> Add Participant
                    </button>
                </div>

                <div class="conversation-panel">
                    <div class="conversation-header">
                        <h3 id="currentConversationTitle">New Conversation</h3>
                        <div class="recording-status">
                            <span class="status-indicator" id="recordingStatus"></span>
                            <span id="recordingStatusText">Ready to record</span>
                        </div>
                    </div>

                    <div class="conversation-messages" id="conversationMessages">
                        <div class="empty-state">
                            <i class="fas fa-comment-dots"></i>
                            <p>Start recording to see messages here</p>
                        </div>
                    </div>

                    <div class="message-input">
                        <select id="currentSpeaker" class="form-control">
                            <!-- Speakers will be populated -->
                        </select>
                        <input type="text" id="messageInput" class="form-control" placeholder="Type a message..." disabled>
                        <button class="btn btn-primary" id="sendMessageBtn" disabled>
                            <i class="fas fa-paper-plane"></i>
                        </button>
                        <button class="btn btn-success" id="startRecordingBtn">
                            <i class="fas fa-play"></i> Start
                        </button>
                        <button class="btn btn-danger" id="stopRecordingBtn" disabled>
                            <i class="fas fa-stop"></i> Stop
                        </button>
                    </div>
                </div>
            </div>

            <div class="recording-actions">
                <button class="btn btn-secondary" id="saveConversationBtn" disabled>
                    <i class="fas fa-save"></i> Save Conversation
                </button>
                <button class="btn btn-warning" id="clearConversationBtn">
                    <i class="fas fa-trash"></i> Clear
                </button>
                <button class="btn btn-info" id="exportConversationBtn" disabled>
                    <i class="fas fa-download"></i> Export
                </button>
            </div>
        </section>

        <!-- Replay Section -->
        <section id="replay" class="section">
            <h2 class="section-title">
                <i class="fas fa-play-circle"></i> Conversation Replay
            </h2>

            <div class="replay-controls">
                <div class="control-group">
                    <label for="conversationSelect">Select Conversation</label>
                    <select id="conversationSelect" class="form-control">
                        <option value="">Choose a conversation...</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="playbackSpeed">Playback Speed</label>
                    <select id="playbackSpeed" class="form-control">
                        <option value="0.5">0.5x</option>
                        <option value="1" selected>1x</option>
                        <option value="1.5">1.5x</option>
                        <option value="2">2x</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="replayMode">Replay Mode</label>
                    <select id="replayMode" class="form-control">
                        <option value="sequential">Sequential</option>
                        <option value="interactive">Interactive</option>
                        <option value="branching">Branching Analysis</option>
                    </select>
                </div>
            </div>

            <div class="replay-interface">
                <div class="timeline-panel">
                    <h3>Timeline</h3>
                    <div class="timeline" id="conversationTimeline">
                        <!-- Timeline will be populated -->
                    </div>
                    <div class="timeline-controls">
                        <button class="btn btn-secondary" id="playPauseBtn" disabled>
                            <i class="fas fa-play"></i> Play
                        </button>
                        <button class="btn btn-secondary" id="resetReplayBtn" disabled>
                            <i class="fas fa-undo"></i> Reset
                        </button>
                        <input type="range" id="timelineSlider" min="0" max="100" value="0" disabled>
                        <span id="currentTime">0:00</span>
                    </div>
                </div>

                <div class="replay-conversation">
                    <div class="conversation-header">
                        <h3 id="replayConversationTitle">Select a conversation to replay</h3>
                        <div class="replay-info">
                            <span id="replayDuration">Duration: 0:00</span>
                            <span id="replayParticipants">Participants: 0</span>
                        </div>
                    </div>

                    <div class="conversation-messages" id="replayMessages">
                        <div class="empty-state">
                            <i class="fas fa-play-circle"></i>
                            <p>Select a conversation and click play to start replay</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="replay-analysis">
                <h3>Replay Analysis</h3>
                <div class="analysis-grid">
                    <div class="analysis-card">
                        <h4>Key Moments</h4>
                        <div id="keyMomentsList" class="moments-list">
                            <!-- Key moments will be populated -->
                        </div>
                    </div>

                    <div class="analysis-card">
                        <h4>Conversation Flow</h4>
                        <div class="flow-visualization" id="conversationFlow">
                            <!-- Flow visualization will be shown -->
                        </div>
                    </div>

                    <div class="analysis-card">
                        <h4>Sentiment Analysis</h4>
                        <canvas id="sentimentChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Analytics Section -->
        <section id="analytics" class="section">
            <h2 class="section-title">
                <i class="fas fa-chart-line"></i> Analytics & Insights
            </h2>

            <div class="analytics-controls">
                <div class="control-group">
                    <label for="analyticsTimeframe">Time Frame</label>
                    <select id="analyticsTimeframe" class="form-control">
                        <option value="7d">Last 7 days</option>
                        <option value="30d">Last 30 days</option>
                        <option value="90d">Last 90 days</option>
                        <option value="1y">Last year</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="analyticsMetric">Primary Metric</label>
                    <select id="analyticsMetric" class="form-control">
                        <option value="count">Conversation Count</option>
                        <option value="duration">Average Duration</option>
                        <option value="participants">Participant Count</option>
                        <option value="sentiment">Sentiment Score</option>
                    </select>
                </div>

                <button class="btn btn-primary" id="refreshAnalyticsBtn">
                    <i class="fas fa-sync"></i> Refresh Analytics
                </button>
            </div>

            <div class="analytics-grid">
                <div class="chart-container full-width">
                    <h3 class="chart-title">Conversation Analytics Overview</h3>
                    <canvas id="analyticsOverviewChart"></canvas>
                </div>

                <div class="insights-panel">
                    <h3>Key Insights</h3>
                    <div class="insights-list" id="analyticsInsights">
                        <!-- Insights will be populated -->
                    </div>
                </div>

                <div class="chart-container">
                    <h3 class="chart-title">Top Conversation Topics</h3>
                    <canvas id="topicsChart"></canvas>
                </div>

                <div class="chart-container">
                    <h3 class="chart-title">Participant Engagement</h3>
                    <canvas id="engagementChart"></canvas>
                </div>
            </div>

            <div class="analytics-export">
                <h3>Export Analytics</h3>
                <div class="export-options">
                    <button class="btn btn-secondary" id="exportAnalyticsBtn">
                        <i class="fas fa-download"></i> Export Report
                    </button>
                    <button class="btn btn-secondary" id="shareAnalyticsBtn">
                        <i class="fas fa-share"></i> Share Insights
                    </button>
                </div>
            </div>
        </section>

        <!-- Scenarios Section -->
        <section id="scenarios" class="section">
            <h2 class="section-title">
                <i class="fas fa-sitemap"></i> Conversation Scenarios
            </h2>

            <div class="scenarios-controls">
                <button class="btn btn-primary" id="createScenarioBtn">
                    <i class="fas fa-plus"></i> Create New Scenario
                </button>
                <button class="btn btn-secondary" id="importScenarioBtn">
                    <i class="fas fa-upload"></i> Import Scenario
                </button>
            </div>

            <div class="scenarios-grid" id="scenariosGrid">
                <!-- Scenarios will be populated -->
                <div class="empty-state">
                    <i class="fas fa-sitemap"></i>
                    <p>No scenarios created yet</p>
                    <button class="btn btn-primary" onclick="createNewScenario()">
                        <i class="fas fa-plus"></i> Create Your First Scenario
                    </button>
                </div>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="section">
            <h2 class="section-title">
                <i class="fas fa-cog"></i> Settings
            </h2>

            <div class="settings-grid">
                <div class="setting-group">
                    <h3>General Settings</h3>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label class="setting-label">Auto-save Conversations</label>
                            <p class="setting-description">Automatically save conversations as you record them</p>
                        </div>
                        <div class="toggle-switch" id="autoSaveToggle" onclick="toggleSetting('autoSave')">
                            <div class="toggle-switch-inner"></div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label class="setting-label">Real-time Analysis</label>
                            <p class="setting-description">Enable real-time sentiment and topic analysis</p>
                        </div>
                        <div class="toggle-switch active" id="realTimeAnalysisToggle" onclick="toggleSetting('realTimeAnalysis')">
                            <div class="toggle-switch-inner"></div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label class="setting-label">Notification Alerts</label>
                            <p class="setting-description">Show notifications for important conversation events</p>
                        </div>
                        <div class="toggle-switch active" id="notificationsToggle" onclick="toggleSetting('notifications')">
                            <div class="toggle-switch-inner"></div>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <h3>Recording Settings</h3>

                    <div class="setting-item">
                        <label class="setting-label">Default Recording Mode</label>
                        <select id="defaultRecordingMode" class="form-control">
                            <option value="manual">Manual Entry</option>
                            <option value="real-time">Real-time Chat</option>
                            <option value="import">Import Conversation</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <label class="setting-label">Max Participants</label>
                        <input type="number" id="maxParticipantsInput" class="form-control" value="5" min="2" max="10">
                    </div>

                    <div class="setting-item">
                        <label class="setting-label">Auto-stop Recording (minutes)</label>
                        <input type="number" id="autoStopTimeInput" class="form-control" value="60" min="5" max="300">
                    </div>
                </div>

                <div class="setting-group">
                    <h3>Analysis Settings</h3>

                    <div class="setting-item">
                        <label class="setting-label">Sentiment Analysis Sensitivity</label>
                        <select id="sentimentSensitivity" class="form-control">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <label class="setting-label">Topic Detection Threshold</label>
                        <input type="number" id="topicThresholdInput" class="form-control" value="0.7" min="0.1" max="1.0" step="0.1">
                    </div>

                    <div class="setting-item">
                        <label class="setting-label">Language Model</label>
                        <select id="languageModel" class="form-control">
                            <option value="basic">Basic Analysis</option>
                            <option value="advanced" selected>Advanced AI</option>
                            <option value="custom">Custom Model</option>
                        </select>
                    </div>
                </div>

                <div class="setting-group">
                    <h3>Data Management</h3>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label class="setting-label">Local Storage</label>
                            <p class="setting-description">Store conversations locally in browser</p>
                        </div>
                        <div class="toggle-switch active" id="localStorageToggle" onclick="toggleSetting('localStorage')">
                            <div class="toggle-switch-inner"></div>
                        </div>
                    </div>

                    <div class="setting-actions">
                        <button class="btn btn-primary" id="saveSettingsBtn">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                        <button class="btn btn-secondary" id="resetSettingsBtn">
                            <i class="fas fa-undo"></i> Reset to Defaults
                        </button>
                        <button class="btn btn-danger" id="clearAllDataBtn">
                            <i class="fas fa-trash"></i> Clear All Data
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modals -->
    <div id="alertModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="alertTitle">Alert</h3>
                <span class="close" id="alertClose">&times;</span>
            </div>
            <div class="modal-body">
                <p id="alertMessage"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="alertOkBtn">OK</button>
            </div>
        </div>
    </div>

    <div id="scenarioModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="scenarioModalTitle">Create New Scenario</h3>
                <span class="close" id="scenarioModalClose">&times;</span>
            </div>
            <div class="modal-body">
                <div class="scenario-form">
                    <div class="form-group">
                        <label for="scenarioName">Scenario Name</label>
                        <input type="text" id="scenarioName" class="form-control" placeholder="Enter scenario name...">
                    </div>

                    <div class="form-group">
                        <label for="scenarioDescription">Description</label>
                        <textarea id="scenarioDescription" class="form-control" rows="3" placeholder="Describe the scenario..."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="scenarioType">Scenario Type</label>
                        <select id="scenarioType" class="form-control">
                            <option value="training">Training Scenario</option>
                            <option value="testing">Testing Scenario</option>
                            <option value="demo">Demo Scenario</option>
                            <option value="analysis">Analysis Scenario</option>
                        </select>
                    </div>

                    <div class="scenario-branches">
                        <h4>Conversation Branches</h4>
                        <div id="branchesList">
                            <!-- Branches will be added here -->
                        </div>
                        <button class="btn btn-secondary" id="addBranchBtn">
                            <i class="fas fa-plus"></i> Add Branch
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="scenarioCancelBtn">Cancel</button>
                <button class="btn btn-primary" id="scenarioSaveBtn">Save Scenario</button>
            </div>
        </div>
    </div>

    <script src="conversation-replay-simulator.js"></script>
</body>
</html>