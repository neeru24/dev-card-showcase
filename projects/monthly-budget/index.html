<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>monthly budget visualizer ¬∑ flow</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: linear-gradient(145deg, #e1eff7 0%, #d4e5f2 100%);
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
        }

        .budget-dashboard {
            max-width: 1300px;
            width: 100%;
            background: rgba(255,255,255,0.75);
            backdrop-filter: blur(12px);
            border-radius: 3rem;
            box-shadow: 0 30px 50px -20px #1f3e55, 0 8px 20px rgba(0,30,40,0.1);
            padding: 2.2rem 2rem;
            border: 1px solid rgba(255,255,255,0.6);
        }

        h1 {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            font-size: 2.2rem;
            letter-spacing: -0.02em;
            color: #113946;
            margin-bottom: 0.25rem;
            margin-left: 0.5rem;
        }
        h1 span {
            background: #2a5f7a;
            color: white;
            font-size: 1rem;
            padding: 0.2rem 1.2rem;
            border-radius: 40px;
            font-weight: 400;
        }

        .summary-cards {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin: 2rem 0 2rem;
        }

        .card {
            flex: 1 1 180px;
            background: white;
            border-radius: 2rem;
            padding: 1.5rem 1.2rem;
            box-shadow: 0 12px 20px -12px #2b5f7a4d;
            border: 1px solid #ffffff;
            transition: transform 0.1s;
        }
        .card.income { border-bottom: 6px solid #2f9e79; }
        .card.expense { border-bottom: 6px solid #c44545; }
        .card.balance { border-bottom: 6px solid #3a7ca5; }

        .card-label {
            font-size: 1rem;
            font-weight: 500;
            color: #4c667b;
            letter-spacing: 0.3px;
        }
        .card-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-top: 0.4rem;
            color: #1b4055;
        }
        .card-value small {
            font-size: 1rem;
            font-weight: 400;
            color: #6688a1;
        }

        .chart-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            margin: 2rem 0 1.8rem;
        }

        .chart-container {
            flex: 2 1 400px;
            background: #ffffffd9;
            border-radius: 2.2rem;
            padding: 1.5rem 1.5rem 1rem 1.5rem;
            box-shadow: inset 0 1px 5px #0000000c, 0 12px 20px -15px #264a60;
        }
        .chart-container h3 {
            font-weight: 500;
            color: #264e67;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }

        .breakdown-panel {
            flex: 1 1 260px;
            background: #ffffffd9;
            border-radius: 2.2rem;
            padding: 1.5rem;
            box-shadow: 0 12px 20px -15px #264a60;
            max-height: 360px;
            overflow-y: auto;
        }

        .breakdown-panel h3 {
            font-weight: 500;
            color: #1d4a64;
            border-bottom: 2px solid #c7dbea;
            padding-bottom: 0.8rem;
            margin-bottom: 1rem;
        }

        .category-item {
            display: flex;
            justify-content: space-between;
            padding: 0.6rem 0;
            border-bottom: 1px dashed #cbdae7;
            font-size: 1rem;
        }
        .cat-name {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }
        .cat-dot {
            width: 12px;
            height: 12px;
            border-radius: 20px;
            background: #3d8c9c;
        }
        .cat-amount {
            font-weight: 600;
            color: #1f4055;
        }

        .entry-form {
            background: white;
            border-radius: 2.2rem;
            padding: 1.5rem 2rem;
            display: flex;
            flex-wrap: wrap;
            align-items: flex-end;
            gap: 1rem 1.5rem;
            margin-top: 1.8rem;
            border: 1px solid rgba(255,255,255,0.8);
            box-shadow: 0 10px 20px -10px #23556d33;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
            min-width: 140px;
        }
        .form-group label {
            font-size: 0.8rem;
            font-weight: 600;
            color: #31647e;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        .form-group input, .form-group select {
            background: #eef5fa;
            border: 1px solid #b7d3e8;
            border-radius: 3rem;
            padding: 0.7rem 1.2rem;
            font-size: 1rem;
            outline: none;
            transition: 0.15s;
        }
        .form-group input:focus, .form-group select:focus {
            border-color: #3c86b4;
            box-shadow: 0 0 0 3px #a3cfec;
        }

        .btn {
            background: #2a6f94;
            border: none;
            color: white;
            font-weight: 600;
            padding: 0.8rem 2.2rem;
            border-radius: 3rem;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.1s;
            box-shadow: 0 6px 12px -6px #144154;
            border: 1px solid #7db9dc;
        }
        .btn:hover {
            background: #1f5c7e;
            transform: scale(0.98);
        }
        .btn.outline {
            background: transparent;
            color: #1f5979;
            box-shadow: none;
            border: 2px solid #81b9da;
        }

        .footer-notes {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1.5rem;
            color: #286684;
            font-weight: 500;
        }
    </style>
</head>
<body>
<div class="budget-dashboard">
    <h1>
        üìä monthly budget visualizer
        <span>live update</span>
    </h1>

    <!-- summary cards -->
    <div class="summary-cards">
        <div class="card income">
            <div class="card-label">üí∞ total income</div>
            <div class="card-value" id="totalIncome">$0</div>
        </div>
        <div class="card expense">
            <div class="card-label">üìâ total expenses</div>
            <div class="card-value" id="totalExpense">$0</div>
        </div>
        <div class="card balance">
            <div class="card-label">‚öñÔ∏è net balance</div>
            <div class="card-value" id="netBalance">$0</div>
        </div>
    </div>

    <!-- charts + breakdown -->
    <div class="chart-grid">
        <!-- left: bar chart canvas (simple bar representation) -->
        <div class="chart-container">
            <h3>üìã income vs expenses</h3>
            <canvas id="budgetBarChart" width="400" height="200" style="width:100%; height:auto; background: transparent;"></canvas>
        </div>
        <!-- right: category breakdown (expense categories) -->
        <div class="breakdown-panel" id="categoryBreakdown">
            <h3>üîπ expenses by category</h3>
            <div id="categoryList">loading...</div>
        </div>
    </div>

    <!-- add transaction form -->
    <div class="entry-form">
        <div class="form-group">
            <label>description</label>
            <input type="text" id="descInput" placeholder="groceries, salary..." value="groceries">
        </div>
        <div class="form-group">
            <label>amount ($)</label>
            <input type="number" id="amountInput" min="0.01" step="0.01" value="75.00">
        </div>
        <div class="form-group">
            <label>category</label>
            <select id="categorySelect">
                <option value="income">üí∞ income</option>
                <option value="housing">üè† housing</option>
                <option value="food">üçé food</option>
                <option value="transport">üöó transport</option>
                <option value="entertainment">üé¨ entertainment</option>
                <option value="utilities">üí° utilities</option>
                <option value="other">üì¶ other</option>
            </select>
        </div>
        <div class="form-group">
            <label>type</label>
            <select id="typeSelect">
                <option value="income">income</option>
                <option value="expense" selected>expense</option>
            </select>
        </div>
        <button class="btn" id="addTransactionBtn">‚ûï add entry</button>
        <button class="btn outline" id="resetDataBtn">‚ü≤ reset</button>
    </div>

    <div class="footer-notes">
        <span>üîπ click 'add' to update charts & breakdown</span>
        <span>üìÖ monthly view (demo data)</span>
    </div>
</div>

<script>
    (function() {
        // ----- sample transactions (initial) -----
        let transactions = [
            { id: 1, description: 'salary', amount: 3200, category: 'income', type: 'income' },
            { id: 2, description: 'rent', amount: 1200, category: 'housing', type: 'expense' },
            { id: 3, description: 'groceries', amount: 280, category: 'food', type: 'expense' },
            { id: 4, description: 'gas', amount: 95, category: 'transport', type: 'expense' },
            { id: 5, description: 'netflix', amount: 15.99, category: 'entertainment', type: 'expense' },
            { id: 6, description: 'electricity', amount: 78.50, category: 'utilities', type: 'expense' },
            { id: 7, description: 'internet', amount: 65, category: 'utilities', type: 'expense' },
            { id: 8, description: 'dining out', amount: 120, category: 'food', type: 'expense' },
            { id: 9, description: 'freelance', amount: 450, category: 'income', type: 'income' },
        ];

        // helper to generate ids
        let nextId = 100;

        // ----- DOM elements -----
        const totalIncomeSpan = document.getElementById('totalIncome');
        const totalExpenseSpan = document.getElementById('totalExpense');
        const netBalanceSpan = document.getElementById('netBalance');
        const categoryListDiv = document.getElementById('categoryList');
        const canvas = document.getElementById('budgetBarChart');
        const ctx = canvas.getContext('2d');

        // form inputs
        const descInput = document.getElementById('descInput');
        const amountInput = document.getElementById('amountInput');
        const categorySelect = document.getElementById('categorySelect');
        const typeSelect = document.getElementById('typeSelect');
        const addBtn = document.getElementById('addTransactionBtn');
        const resetBtn = document.getElementById('resetDataBtn');

        // ----- helper: calculate totals & category aggregates -----
        function calculateTotals() {
            let totalIncome = 0, totalExpense = 0;
            transactions.forEach(t => {
                if (t.type === 'income') totalIncome += t.amount;
                else totalExpense += t.amount;
            });
            return { totalIncome, totalExpense, balance: totalIncome - totalExpense };
        }

        // get expense breakdown by category (excluding income)
        function expenseByCategory() {
            const map = new Map(); // category -> amount
            transactions.filter(t => t.type === 'expense').forEach(exp => {
                const cat = exp.category;
                map.set(cat, (map.get(cat) || 0) + exp.amount);
            });
            return map;
        }

        // ----- update summary cards and category list -----
        function updateSummaryAndBreakdown() {
            const { totalIncome, totalExpense, balance } = calculateTotals();
            totalIncomeSpan.innerText = `$${totalIncome.toFixed(2)}`;
            totalExpenseSpan.innerText = `$${totalExpense.toFixed(2)}`;
            netBalanceSpan.innerText = `$${balance.toFixed(2)}`;

            // build category breakdown html
            const catMap = expenseByCategory();
            if (catMap.size === 0) {
                categoryListDiv.innerHTML = '<div class="category-item">no expenses</div>';
                return;
            }

            const sorted = Array.from(catMap.entries()).sort((a, b) => b[1] - a[1]);
            let htmlStr = '';
            sorted.forEach(([cat, amt]) => {
                // color dot based on category (soft colors)
                let dotColor = '#3d8c9c';
                if (cat === 'food') dotColor = '#c47a3c';
                else if (cat === 'housing') dotColor = '#2b6c8f';
                else if (cat === 'transport') dotColor = '#5e8b6c';
                else if (cat === 'entertainment') dotColor = '#9b6fa3';
                else if (cat === 'utilities') dotColor = '#b88b4b';
                else if (cat === 'other') dotColor = '#7f8c8d';
                htmlStr += `
                    <div class="category-item">
                        <span class="cat-name"><span class="cat-dot" style="background:${dotColor};"></span> ${cat}</span>
                        <span class="cat-amount">$${amt.toFixed(2)}</span>
                    </div>
                `;
            });
            categoryListDiv.innerHTML = htmlStr;
        }

        // ----- draw bar chart (income vs expense) -----
        function drawBarChart() {
            const { totalIncome, totalExpense } = calculateTotals();
            const maxVal = Math.max(totalIncome, totalExpense, 1000); // at least 1000 for scale

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const w = canvas.width;
            const h = canvas.height;
            const margin = 40;
            const chartTop = 30;
            const chartBottom = h - margin;
            const availableHeight = chartBottom - chartTop;

            // bars settings
            const barWidth = 70;
            const spacing = 60;
            const incomeX = 120;
            const expenseX = incomeX + barWidth + spacing;

            // scale factor
            const scale = (maxVal > 0) ? availableHeight / maxVal : 1;

            // draw income bar
            const incomeH = totalIncome * scale;
            ctx.fillStyle = '#2f9e79';
            ctx.shadowColor = '#1f4a3e';
            ctx.shadowBlur = 8;
            ctx.fillRect(incomeX, chartBottom - incomeH, barWidth, incomeH);
            // label
            ctx.shadowBlur = 0;
            ctx.font = 'bold 14px Inter, sans-serif';
            ctx.fillStyle = '#1b4d3b';
            ctx.fillText('income', incomeX, chartBottom + 20);
            ctx.fillStyle = '#145a40';
            ctx.fillText(`$${totalIncome.toFixed(0)}`, incomeX + 10, chartBottom - incomeH - 8);

            // expense bar
            const expenseH = totalExpense * scale;
            ctx.fillStyle = '#c44545';
            ctx.shadowBlur = 8;
            ctx.shadowColor = '#6b2b2b';
            ctx.fillRect(expenseX, chartBottom - expenseH, barWidth, expenseH);
            ctx.shadowBlur = 0;
            ctx.fillStyle = '#a13d3d';
            ctx.font = 'bold 14px Inter, sans-serif';
            ctx.fillText('expense', expenseX, chartBottom + 20);
            ctx.fillStyle = '#881e1e';
            ctx.fillText(`$${totalExpense.toFixed(0)}`, expenseX + 10, chartBottom - expenseH - 8);

            // faint grid line
            ctx.strokeStyle = '#c0d4e4';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(margin, chartTop);
            ctx.lineTo(w - margin, chartTop);
            ctx.stroke();

            ctx.fillStyle = '#325c77';
            ctx.font = '12px Inter';
            ctx.fillText(`max $${maxVal.toFixed(0)}`, 10, chartTop - 6);
        }

        // ----- full refresh UI -----
        function refreshVisuals() {
            updateSummaryAndBreakdown();
            drawBarChart();
        }

        // ----- add transaction from form -----
        function addTransactionFromForm() {
            const desc = descInput.value.trim();
            let amount = parseFloat(amountInput.value);
            if (isNaN(amount) || amount <= 0) {
                alert('enter a positive amount');
                return;
            }
            const category = categorySelect.value;
            const type = typeSelect.value;

            // if type is income, we might override category to 'income' for consistency
            const finalCategory = (type === 'income') ? 'income' : category;

            const newTransaction = {
                id: nextId++,
                description: desc || (type === 'income' ? 'income' : 'expense'),
                amount: amount,
                category: finalCategory,
                type: type
            };
            transactions.push(newTransaction);
            refreshVisuals();

            // optional reset form to defaults (keep description, but reset amount)
            amountInput.value = '';
            descInput.value = '';
            typeSelect.value = 'expense';  // default expense
            categorySelect.value = 'food';
        }

        // ----- reset to initial demo data -----
        function resetToDemo() {
            transactions = [
                { id: 1, description: 'salary', amount: 3200, category: 'income', type: 'income' },
                { id: 2, description: 'rent', amount: 1200, category: 'housing', type: 'expense' },
                { id: 3, description: 'groceries', amount: 280, category: 'food', type: 'expense' },
                { id: 4, description: 'gas', amount: 95, category: 'transport', type: 'expense' },
                { id: 5, description: 'netflix', amount: 15.99, category: 'entertainment', type: 'expense' },
                { id: 6, description: 'electricity', amount: 78.50, category: 'utilities', type: 'expense' },
                { id: 7, description: 'internet', amount: 65, category: 'utilities', type: 'expense' },
                { id: 8, description: 'dining out', amount: 120, category: 'food', type: 'expense' },
                { id: 9, description: 'freelance', amount: 450, category: 'income', type: 'income' },
            ];
            nextId = 100;
            refreshVisuals();
        }

        // ----- attach listeners -----
        addBtn.addEventListener('click', addTransactionFromForm);
        resetBtn.addEventListener('click', resetToDemo);

        // optional: adjust category if type changes (income forces category income)
        typeSelect.addEventListener('change', function(e) {
            if (typeSelect.value === 'income') {
                // set category to income and disable? better just hint
                categorySelect.value = 'income';
            } else {
                if (categorySelect.value === 'income') categorySelect.value = 'food';
            }
        });

        // initialize display
        refreshVisuals();

        // adjust canvas size for sharpness (retina friendly)
        function resizeCanvas() {
            const container = canvas.parentNode;
            const containerWidth = container.clientWidth;
            canvas.width = Math.min(500, containerWidth - 40);
            canvas.height = 200;
            drawBarChart(); // redraw after resize
        }
        window.addEventListener('resize', () => {
            resizeCanvas();
            refreshVisuals();
        });
        resizeCanvas();
    })();
</script>
</body>
</html>