<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allergy Trigger Tracker</title>
    <link rel="stylesheet" href="../assets/css/allergy-trigger-tracker.css">
</head>
<body>
    <div class="container">
        <h1>üß™ Allergy Trigger Tracker</h1>

        <div class="current-conditions">
            <h2>Current Environmental Factors</h2>
            <div class="env-factors">
                <div class="factor">
                    <span class="factor-icon">üåø</span>
                    <span>Pollen: <span id="pollenLevel">Low</span></span>
                </div>
                <div class="factor">
                    <span class="factor-icon">üí®</span>
                    <span>Air Quality: <span id="airQuality">Good</span></span>
                </div>
                <div class="factor">
                    <span class="factor-icon">üå°Ô∏è</span>
                    <span>Temperature: <span id="temperature">--¬∞C</span></span>
                </div>
                <div class="factor">
                    <span class="factor-icon">üíß</span>
                    <span>Humidity: <span id="humidity">--%</span></span>
                </div>
            </div>
            <button onclick="refreshEnvironment()">Refresh Data</button>
        </div>

        <div class="symptom-log-section">
            <h2>Log Allergy Symptoms</h2>
            <div class="inputs">
                <div>
                    <label>Symptom Severity (1-10)</label>
                    <input type="range" id="symptomSeverity" min="1" max="10" value="5" oninput="updateSeverityValue()">
                    <span id="severityValue">5</span>
                </div>
                <div>
                    <label>Primary Symptom</label>
                    <select id="primarySymptom">
                        <option value="sneezing">Sneezing</option>
                        <option value="runny-nose">Runny Nose</option>
                        <option value="itchy-eyes">Itchy Eyes</option>
                        <option value="coughing">Coughing</option>
                        <option value="skin-rash">Skin Rash</option>
                        <option value="headache">Headache</option>
                        <option value="fatigue">Fatigue</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div>
                    <label>Duration (hours)</label>
                    <input type="number" id="symptomDuration" min="0.5" max="24" step="0.5" placeholder="2">
                </div>
                <div>
                    <label>Date & Time</label>
                    <input type="datetime-local" id="symptomDateTime">
                </div>
            </div>

            <div class="triggers-section">
                <label>Suspected Triggers (select all that apply)</label>
                <div class="trigger-checkboxes">
                    <label><input type="checkbox" value="pollen"> Pollen</label>
                    <label><input type="checkbox" value="dust"> Dust Mites</label>
                    <label><input type="checkbox" value="pet-dander"> Pet Dander</label>
                    <label><input type="checkbox" value="mold"> Mold</label>
                    <label><input type="checkbox" value="food"> Food</label>
                    <label><input type="checkbox" value="insect-stings"> Insect Stings</label>
                    <label><input type="checkbox" value="medication"> Medication</label>
                    <label><input type="checkbox" value="chemicals"> Chemicals</label>
                    <label><input type="checkbox" value="perfume"> Perfume/Cologne</label>
                    <label><input type="checkbox" value="smoke"> Smoke</label>
                    <label><input type="checkbox" value="stress"> Stress</label>
                    <label><input type="checkbox" value="weather"> Weather Changes</label>
                </div>
            </div>

            <div class="medication-section">
                <label>Medications Taken</label>
                <div class="medication-inputs">
                    <input type="text" id="medicationName" placeholder="Medication name">
                    <input type="number" id="medicationDosage" placeholder="Dosage (mg)">
                    <select id="medicationTiming">
                        <option value="before">Before symptoms</option>
                        <option value="during">During symptoms</option>
                        <option value="after">After symptoms</option>
                    </select>
                </div>
            </div>

            <div class="textarea-container">
                <label>Additional Notes</label>
                <textarea id="notes" placeholder="Describe your symptoms in detail, environmental conditions, or anything else relevant..."></textarea>
            </div>
            <button class="log-btn" onclick="logSymptoms()">Log Symptoms</button>
        </div>

        <div class="analysis-section">
            <h2>Allergy Analysis</h2>
            <div class="analysis-grid">
                <div class="analysis-item">
                    <h3>Most Common Triggers</h3>
                    <div id="topTriggers"></div>
                </div>
                <div class="analysis-item">
                    <h3>Symptom Patterns</h3>
                    <div id="symptomPatterns"></div>
                </div>
                <div class="analysis-item">
                    <h3>Peak Symptom Times</h3>
                    <div id="peakTimes"></div>
                </div>
            </div>
        </div>

        <div class="alerts-section">
            <h2>Allergy Alerts</h2>
            <div id="alertsContainer"></div>
        </div>

        <div class="stats-section">
            <h2>Allergy Statistics</h2>
            <div class="stats">
                <div>Total Episodes: <span id="totalEpisodes">0</span></div>
                <div>Average Severity: <span id="avgSeverity">0</span>/10</div>
                <div>This Week: <span id="weeklyEpisodes">0</span> episodes</div>
                <div>Most Affected: <span id="mostAffected">None</span></div>
            </div>
            <canvas id="symptomChart" width="400" height="200"></canvas>
        </div>

        <div class="tips-section">
            <h2>Allergy Management Tips</h2>
            <div id="tip">Loading allergy tip...</div>
            <button onclick="getNewTip()">New Tip</button>
        </div>

        <div class="history-section">
            <h2>Recent Episodes</h2>
            <ul id="symptomHistory"></ul>
        </div>
    </div>

    <script src="../assets/js/allergy-trigger-tracker.js"></script>
</body>
</html>