<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stress Trigger Frequency Map</title>
    <link rel="stylesheet" href="../../style.css">
    <link rel="icon" type="image/png" href="../../Hall of Fame (1).png" />
    <link rel="icon" href="../../assets/favicon/favicon.ico" type="image/x-icon">
    <link rel="icon" href="../../assets/favicon/favicon.png" type="image/png">
    <link rel="apple-touch-icon" href="../../assets/favicon/apple-touch-icon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="stress-trigger-frequency-map.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
</head>
<body>
    <div id="navbar"></div>

    <div class="stress-container">
        <h1>ğŸ§  Stress Trigger Frequency Map</h1>
        <p>Identify and track recurring stress triggers through tag-based event logging. Visualize patterns with frequency heatmaps to help modify behavior and reduce stress.</p>

        <div class="log-section">
            <h2>Log Stress Event</h2>
            <div class="input-group">
                <label for="stressLevel">Stress Level (1-10):</label>
                <input type="range" id="stressLevel" min="1" max="10" value="5">
                <span id="stressValue">5</span>
            </div>
            <div class="input-group">
                <label for="triggerTags">Trigger Tags (comma-separated):</label>
                <input type="text" id="triggerTags" placeholder="work deadline, traffic, social media, family conflict, etc.">
            </div>
            <div class="input-group">
                <label for="eventDescription">Event Description:</label>
                <textarea id="eventDescription" placeholder="Describe what happened and how you felt..."></textarea>
            </div>
            <div class="input-group">
                <label for="copingStrategy">Coping Strategy Used:</label>
                <textarea id="copingStrategy" placeholder="What did you do to manage the stress?"></textarea>
            </div>
            <button class="log-btn" onclick="logStressEvent()">Log Stress Event</button>
        </div>

        <div class="stats-section">
            <h2>Stress Statistics</h2>
            <div class="stat-cards">
                <div class="stat-card">
                    <h3>Total Events</h3>
                    <div class="stat-value" id="totalEvents">0</div>
                    <p class="stat-desc">Stress events logged</p>
                </div>
                <div class="stat-card">
                    <h3>Average Stress Level</h3>
                    <div class="stat-value" id="avgStressLevel">0</div>
                    <p class="stat-desc">Mean stress intensity</p>
                </div>
                <div class="stat-card">
                    <h3>Most Common Trigger</h3>
                    <div class="stat-value" id="topTrigger">None</div>
                    <p class="stat-desc">Most frequent trigger</p>
                </div>
                <div class="stat-card">
                    <h3>Today's Events</h3>
                    <div class="stat-value" id="todayEvents">0</div>
                    <p class="stat-desc">Events logged today</p>
                </div>
            </div>
        </div>

        <div class="heatmap-section">
            <h2>Trigger Frequency Heatmap</h2>
            <div class="heatmap-controls">
                <select id="timeRange">
                    <option value="7">Last 7 days</option>
                    <option value="30">Last 30 days</option>
                    <option value="90">Last 90 days</option>
                </select>
                <button class="refresh-btn" onclick="updateHeatmap()">Refresh</button>
            </div>
            <div class="heatmap-container">
                <canvas id="triggerHeatmap"></canvas>
            </div>
        </div>

        <div class="trends-section">
            <h2>Stress Level Trends</h2>
            <canvas id="stressTrendsChart"></canvas>
        </div>

        <div class="insights-section">
            <h2>Pattern Insights</h2>
            <div id="insightsContainer">
                <div class="insight-card">
                    <h3>ğŸ” Top Triggers</h3>
                    <div id="topTriggersList">No data available</div>
                </div>
                <div class="insight-card">
                    <h3>ğŸ“Š Peak Stress Times</h3>
                    <div id="peakTimesList">No data available</div>
                </div>
                <div class="insight-card">
                    <h3>ğŸ’¡ Coping Effectiveness</h3>
                    <div id="copingInsights">No data available</div>
                </div>
            </div>
        </div>

        <div class="history-section">
            <h2>Event History</h2>
            <div class="history-filters">
                <button class="filter-btn active" data-filter="all" onclick="filterHistory('all')">All</button>
                <button class="filter-btn" data-filter="high" onclick="filterHistory('high')">High Stress (7-10)</button>
                <button class="filter-btn" data-filter="medium" onclick="filterHistory('medium')">Medium Stress (4-6)</button>
                <button class="filter-btn" data-filter="low" onclick="filterHistory('low')">Low Stress (1-3)</button>
            </div>
            <div id="eventHistory"></div>
        </div>
    </div>

    <div id="footer"></div>

    <script src="stress-trigger-frequency-map.js"></script>
    <script src="../../js/include.js"></script>
</body>
</html>