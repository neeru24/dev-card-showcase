<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß† ethics & morality ¬∑ philosophy quiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #233b44;
            background: radial-gradient(circle at 20% 30%, #4f6760, #1e2f2f);
            font-family: 'Georgia', 'Times New Roman', 'Palatino', serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.2rem;
            color: #efe7d9;
        }

        .ethics-app {
            max-width: 900px;
            width: 100%;
            background: rgba(30, 37, 40, 0.92);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 4rem;
            padding: 2.2rem 2.5rem 2.8rem;
            box-shadow: 0 35px 70px -20px #0a1419, 0 0 0 1px #949a7c inset, 0 0 0 2px rgba(220, 200, 150, 0.15);
            border: 1px solid #c1a57b;
        }

        /* header */
        .ethics-header {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2.2rem;
            border-bottom: 1px dashed #9e9176;
            padding-bottom: 1.2rem;
        }

        .title-section h1 {
            font-size: 2.6rem;
            font-weight: 500;
            letter-spacing: -0.5px;
            background: linear-gradient(145deg, #f0e2c5, #d6c29b);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .score-pill {
            background: #1f4a47;
            border: 2px solid #e6cd94;
            padding: 0.6rem 2.2rem;
            border-radius: 60px;
            font-size: 1.5rem;
            font-weight: 700;
            color: #f5e9c4;
            box-shadow: 0 6px 0 #0b2d2b;
        }

        /* topic filter */
        .topic-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 0.7rem;
            margin-bottom: 2.2rem;
            justify-content: center;
            border-bottom: 1px solid #5b6e62;
            padding-bottom: 1.5rem;
        }

        .topic-btn {
            background: #2d494b;
            border: 1px solid #919b81;
            color: #ecddc0;
            padding: 0.6rem 1.8rem;
            border-radius: 50px;
            font-size: 1.05rem;
            font-weight: 500;
            cursor: pointer;
            transition: 0.1s;
            font-family: inherit;
        }

        .topic-btn.active {
            background: #bd9f6e;
            border-color: #fae2af;
            color: #1f2a24;
            box-shadow: 0 0 14px #f5d286;
        }

        .topic-btn:hover {
            background: #3f676b;
            color: white;
        }

        /* main quiz card */
        .question-panel {
            background: #2c3b40e0;
            border-radius: 3.5rem;
            padding: 2rem 2.2rem;
            border: 1px solid #bc9f6d;
            box-shadow: 0 20px 30px -15px #0c1a1c;
            margin-bottom: 2.5rem;
        }

        .meta-row {
            display: flex;
            justify-content: space-between;
            color: #ccbfa3;
            margin-bottom: 1.2rem;
            font-size: 1.1rem;
        }

        .question-text {
            font-size: 1.9rem;
            font-weight: 500;
            line-height: 1.3;
            margin-bottom: 2.2rem;
            color: #fcf2e0;
        }

        .options-area {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .option-row {
            background: #1d3b3f;
            border: 2px solid #5f756d;
            border-radius: 60px;
            padding: 0.2rem 0.2rem 0.2rem 2rem;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: 0.1s;
        }

        .option-row:hover:not(.disabled-option) {
            background: #2b575c;
            border-color: #e6be7c;
        }

        .option-marker {
            background: #0d2d32;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.4rem;
            margin-right: 1.5rem;
            color: #eedbaa;
            border: 2px solid #948a6b;
        }

        .option-text {
            font-size: 1.3rem;
            color: #f2e5d2;
            flex: 1;
            padding: 0.8rem 0.5rem;
        }

        /* states for selected / correct / wrong */
        .option-row.selected-correct {
            background: #1c6d48;
            border-color: #cef0b0;
        }
        .option-row.selected-wrong {
            background: #9b4e4e;
            border-color: #ffbfbf;
            text-decoration: line-through wavy #ffc9c9;
        }
        .option-row.correct-highlight {
            background: #1c6d48;
            border-color: #bae89c;
        }
        .disabled-option {
            opacity: 0.9;
            cursor: not-allowed;
        }

        .explanation-box {
            background: #1a343ac0;
            border-radius: 2.5rem;
            padding: 1.5rem 2rem;
            font-size: 1.2rem;
            border-left: 8px solid #cfa45b;
            color: #f2e3cc;
            margin-top: 1rem;
        }

        /* next & reset */
        .action-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            margin-top: 1.5rem;
        }

        .next-btn, .reset-btn {
            background: #48655c;
            border: none;
            color: #fdf0da;
            font-size: 1.4rem;
            padding: 0.8rem 2.8rem;
            border-radius: 60px;
            font-weight: 600;
            cursor: pointer;
            border: 1px solid #e2c181;
            transition: 0.1s;
            font-family: inherit;
        }

        .next-btn:hover, .reset-btn:hover {
            background: #61867c;
            border-color: #ffdf9e;
            color: white;
        }

        .reset-btn {
            background: #5b5341;
        }

        .footer-stats {
            display: flex;
            justify-content: space-between;
            color: #b8ab8f;
            margin-top: 1.8rem;
            font-size: 1.1rem;
        }

        /* small */
        .pill {
            background: #1b4141;
            padding: 0.2rem 1rem;
            border-radius: 40px;
            border: 1px solid #9e946f;
        }
    </style>
</head>
<body>
    <div class="ethics-app">
        <div class="ethics-header">
            <div class="title-section">
                <h1>
                    <span>‚öñÔ∏è</span> ethics & morality
                </h1>
            </div>
            <div class="score-pill" id="scoreDisplay">0/0</div>
        </div>

        <!-- topic filters (ethical frameworks) -->
        <div class="topic-bar" id="topicContainer">
            <button class="topic-btn active" data-topic="all">üìö all</button>
            <button class="topic-btn" data-topic="classical">üèõÔ∏è classical</button>
            <button class="topic-btn" data-topic="dilemmas">üåâ dilemmas</button>
            <button class="topic-btn" data-topic="modern">üí° modern</button>
        </div>

        <!-- main quiz card -->
        <div class="question-panel" id="quizPanel">
            <div class="meta-row">
                <span id="questionIdx">question 1 / 5</span>
                <span class="pill" id="topicTag">classical</span>
            </div>
            <div class="question-text" id="questionText">Loading ethics question...</div>
            <div class="options-area" id="optionsContainer"></div>
            <div class="explanation-box" id="explanationBox">‚è≥ select an option to see explanation</div>
        </div>

        <!-- action buttons -->
        <div class="action-row">
            <button class="reset-btn" id="resetQuizBtn">‚Ü∫ restart</button>
            <button class="next-btn" id="nextBtn">next ‚Üí</button>
        </div>

        <div class="footer-stats">
            <span id="remainingCounter">5 left</span>
            <span id="correctCounter">‚úÖ 0 correct</span>
        </div>
    </div>

    <script>
        (function() {
            // ---------- ETHICS & MORALITY DATASET ----------
            const questions = [
                // classical
                { topic: 'classical', question: 'According to Aristotle, moral virtue is primarily a matter of:', options: ['Following divine commands', 'Finding the golden mean between extremes', 'Maximizing pleasure', 'Obeying the state'], correct: 1, explanation: 'Aristotle‚Äôs ethics focus on the "golden mean" ‚Äì the desirable middle between excess and deficiency.' },
                { topic: 'classical', question: 'The "Categorical Imperative" is central to the ethics of:', options: ['Plato', 'David Hume', 'Immanuel Kant', 'John Stuart Mill'], correct: 2, explanation: 'Kant‚Äôs categorical imperative commands actions that are universally binding, regardless of desire.' },
                { topic: 'classical', question: 'Which ancient school taught that "pleasure is the highest good"?', options: ['Stoicism', 'Epicureanism', 'Cynicism', 'Platonism'], correct: 1, explanation: 'Epicurus taught that pleasure (ataraxia) is the greatest good, but meant mental tranquility.' },
                // dilemmas
                { topic: 'dilemmas', question: 'In the classic "trolley problem", most people would pull the lever to save five workers but kill one. This choice reflects:', options: ['Utilitarianism', 'Deontology', 'Virtue ethics', 'Ethical egoism'], correct: 0, explanation: 'Utilitarianism (saving the greater number) typically justifies pulling the lever.' },
                { topic: 'dilemmas', question: 'A doctor has five dying patients who need organs, and one healthy visitor. Killing the visitor to save five would be rejected by most due to:', options: ['The doctrine of double effect', 'The principle of non-maleficence', 'Rule utilitarianism', 'All of the above'], correct: 3, explanation: 'Multiple principles forbid using a person as a mere means ‚Äì deontology, non-maleficence, and rule utilitarianism.' },
                { topic: 'dilemmas', question: 'The "ring of Gyges" thought experiment asks whether:', options: ['Justice is only good for its consequences', 'Pleasure is the only good', 'Knowledge is virtue', 'The unexamined life is worth living'], correct: 0, explanation: 'Plato‚Äôs ring of Gyges explores if anyone would stay moral if invisible ‚Äì suggesting justice is chosen for its rewards, not intrinsically.' },
                // modern
                { topic: 'modern', question: 'Which philosopher argued for "effective altruism" and believes we should donate to the most cost-effective charities?', options: ['Peter Singer', 'Judith Butler', 'Slavoj ≈Ωi≈æek', 'Martha Nussbaum'], correct: 0, explanation: 'Peter Singer‚Äôs utilitarian approach underpins effective altruism: maximize good with your resources.' },
                { topic: 'modern', question: 'The "veil of ignorance" is a method proposed by:', options: ['John Rawls', 'Robert Nozick', 'Karl Marx', 'Jean-Paul Sartre'], correct: 0, explanation: 'Rawls‚Äô veil of ignorance ensures impartiality in designing a just society.' },
                { topic: 'modern', question: 'Which ethical framework emphasizes care, relationships, and context over abstract rules?', options: ['Care ethics', 'Social contract theory', 'Natural law', 'Hedonism'], correct: 0, explanation: 'Care ethics (Gilligan, Noddings) focuses on interdependence and responsibility in relationships.' },
                // more dilemmas / classical mix
                { topic: 'classical', question: 'Stoicism teaches that we should:', options: ['Pursue honor above all', 'Focus only on what is within our control', 'Seek maximum pleasure', 'Follow tradition'], correct: 1, explanation: 'Epictetus and Marcus Aurelius emphasized controlling our judgments and desires.' },
                { topic: 'dilemmas', question: 'A runaway train: pushing a fat man off a bridge to save five workers is often rejected because:', options: ['It violates the distinction between action and inaction', 'It uses him as a mere means', 'Both A and B', 'It would not work'], correct: 2, explanation: 'The "personal" violation of pushing is seen as different from pulling a lever; deontology rejects using someone as a means.' },
                { topic: 'modern', question: 'Which term describes the view that moral standards vary across cultures?', options: ['Moral absolutism', 'Moral relativism', 'Moral skepticism', 'Moral realism'], correct: 1, explanation: 'Relativism holds that right/wrong depend on cultural context.' }
            ];

            // ----- DOM elements -----
            const topicBtns = document.querySelectorAll('.topic-btn');
            const questionText = document.getElementById('questionText');
            const optionsContainer = document.getElementById('optionsContainer');
            const explanationBox = document.getElementById('explanationBox');
            const scoreDisplay = document.getElementById('scoreDisplay');
            const questionIdxSpan = document.getElementById('questionIdx');
            const topicTag = document.getElementById('topicTag');
            const nextBtn = document.getElementById('nextBtn');
            const resetBtn = document.getElementById('resetQuizBtn');
            const remainingSpan = document.getElementById('remainingCounter');
            const correctCounter = document.getElementById('correctCounter');

            // ----- state -----
            let currentTopic = 'all';
            let activeQuestions = [];        // filtered list (shuffled, max 5)
            let currentIndex = 0;
            let userAnswers = [];             // index of selected option per question, -1 = unanswered
            let quizFinished = false;

            // ----- helper functions -----
            function shuffle(arr) {
                for (let i = arr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [arr[i], arr[j]] = [arr[j], arr[i]];
                }
                return arr;
            }

            // filter by topic, shuffle, limit to 5
            function buildQuestionList(topic) {
                let filtered = topic === 'all' ? [...questions] : questions.filter(q => q.topic === topic);
                if (filtered.length === 0) return [];
                filtered = shuffle(filtered);
                return filtered.slice(0, 5);
            }

            // reset state with new topic
            function setTopic(topic) {
                currentTopic = topic;
                activeQuestions = buildQuestionList(topic);
                currentIndex = 0;
                userAnswers = new Array(activeQuestions.length).fill(-1);
                quizFinished = false;
                updateScoreAndMeta();
                renderQuestion();
            }

            // update score and counters
            function recalcScore() {
                let correct = 0;
                for (let i = 0; i < activeQuestions.length; i++) {
                    if (userAnswers[i] === activeQuestions[i].correct) correct++;
                }
                return correct;
            }

            function updateScoreAndMeta() {
                const correct = recalcScore();
                const total = activeQuestions.length;
                scoreDisplay.textContent = `${correct}/${total}`;
                correctCounter.innerHTML = `‚úÖ ${correct} correct`;
                const answered = userAnswers.filter(a => a !== -1).length;
                const left = total - answered;
                remainingSpan.textContent = `${left} left`;
            }

            // render current question
            function renderQuestion() {
                if (!activeQuestions.length) {
                    questionText.textContent = 'No questions for this topic.';
                    optionsContainer.innerHTML = '';
                    explanationBox.textContent = 'Please choose another topic.';
                    nextBtn.disabled = true;
                    topicTag.textContent = '‚Äî';
                    questionIdxSpan.textContent = '0/0';
                    return;
                }

                const q = activeQuestions[currentIndex];
                questionText.textContent = q.question;
                topicTag.textContent = q.topic;
                questionIdxSpan.textContent = `question ${currentIndex+1} / ${activeQuestions.length}`;

                // build options
                let optionsHtml = '';
                const answered = userAnswers[currentIndex] !== -1;
                const selectedIdx = userAnswers[currentIndex];
                const correctIdx = q.correct;

                q.options.forEach((opt, idx) => {
                    let rowClass = 'option-row';
                    if (answered) {
                        if (idx === correctIdx) rowClass += ' correct-highlight';
                        if (idx === selectedIdx && idx === correctIdx) rowClass += ' selected-correct';
                        else if (idx === selectedIdx && idx !== correctIdx) rowClass += ' selected-wrong';
                    }
                    if (answered) rowClass += ' disabled-option';

                    const marker = String.fromCharCode(65 + idx); // A, B, C, D
                    optionsHtml += `
                        <div class="${rowClass}" data-opt-index="${idx}">
                            <div class="option-marker">${marker}</div>
                            <div class="option-text">${opt}</div>
                        </div>
                    `;
                });

                optionsContainer.innerHTML = optionsHtml;

                // attach event listeners if not answered
                if (!answered) {
                    document.querySelectorAll('.option-row').forEach(row => {
                        row.addEventListener('click', optionClickHandler);
                    });
                    explanationBox.textContent = '‚è≥ select an option to see explanation';
                } else {
                    // show explanation
                    if (selectedIdx === correctIdx) {
                        explanationBox.innerHTML = `‚úÖ <strong>correct.</strong> ${q.explanation}`;
                    } else {
                        const correctAns = q.options[correctIdx];
                        explanationBox.innerHTML = `‚ùå <strong>incorrect.</strong> The correct answer is "${correctAns}". ${q.explanation}`;
                    }
                }

                // enable/disable next
                nextBtn.disabled = false; // always enabled, but style
            }

            // option click handler
            function optionClickHandler(e) {
                const row = e.currentTarget;
                const selectedIdx = parseInt(row.dataset.optIndex, 10);
                const q = activeQuestions[currentIndex];

                // store answer
                userAnswers[currentIndex] = selectedIdx;

                // re-render question to show styles and explanation
                renderQuestion();
                updateScoreAndMeta();
            }

            // next question
            function goToNext() {
                if (!activeQuestions.length) return;
                if (currentIndex < activeQuestions.length - 1) {
                    currentIndex++;
                    renderQuestion();
                } else {
                    // end of quiz
                    const totalCorrect = recalcScore();
                    explanationBox.innerHTML = `üèÅ <strong>quiz finished!</strong> you got ${totalCorrect} out of ${activeQuestions.length} correct. revisit topics or restart.`;
                    nextBtn.disabled = true;
                    quizFinished = true;
                }
                updateScoreAndMeta();
            }

            // reset (same topic)
            function resetQuiz() {
                activeQuestions = buildQuestionList(currentTopic);
                currentIndex = 0;
                userAnswers = new Array(activeQuestions.length).fill(-1);
                quizFinished = false;
                nextBtn.disabled = false;
                updateScoreAndMeta();
                renderQuestion();
            }

            // ----- event listeners -----
            topicBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    topicBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    const topic = btn.dataset.topic;
                    setTopic(topic);
                });
            });

            nextBtn.addEventListener('click', goToNext);

            resetBtn.addEventListener('click', resetQuiz);

            // initialization: set default topic = all
            setTopic('all');
        })();
    </script>
</body>
</html>