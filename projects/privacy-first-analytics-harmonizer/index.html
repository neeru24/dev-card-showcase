<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privacy-First Analytics Harmonizer</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h1>üîí Privacy Analytics</h1>
                <span class="nav-subtitle">Privacy-First Data Harmonization & Analytics</span>
            </div>
            <div class="nav-controls">
                <button id="theme-toggle" class="nav-btn">üåô</button>
                <button id="privacy-mode-toggle" class="nav-btn privacy-active">üõ°Ô∏è</button>
                <button id="fullscreen-btn" class="nav-btn">‚õ∂</button>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <aside class="sidebar">
            <div class="sidebar-section">
                <h3>Navigation</h3>
                <button class="sidebar-btn active" data-view="dashboard">üìä Dashboard</button>
                <button class="sidebar-btn" data-view="consent">üìù Consent Management</button>
                <button class="sidebar-btn" data-view="data-flow">üîÑ Data Flow</button>
                <button class="sidebar-btn" data-view="analytics">üìà Analytics</button>
                <button class="sidebar-btn" data-view="compliance">‚öñÔ∏è Compliance</button>
                <button class="sidebar-btn" data-view="privacy">üîê Privacy Controls</button>
            </div>

            <div class="sidebar-section">
                <h3>Privacy Status</h3>
                <div class="privacy-metrics">
                    <div class="metric-item">
                        <span>Consent Rate:</span>
                        <span id="consent-rate">0%</span>
                    </div>
                    <div class="metric-item">
                        <span>Data Processed:</span>
                        <span id="data-processed">0</span>
                    </div>
                    <div class="metric-item">
                        <span>Privacy Score:</span>
                        <span id="privacy-score">0/100</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>Quick Actions</h3>
                <button id="anonymize-data-btn" class="action-btn">üîÑ Anonymize Data</button>
                <button id="export-privacy-report" class="action-btn">üìÑ Privacy Report</button>
                <button id="audit-log-btn" class="action-btn">üìã Audit Log</button>
                <button id="reset-privacy-settings" class="action-btn">üîÑ Reset Settings</button>
            </div>
        </aside>

        <main class="main-content">
            <!-- Dashboard View -->
            <div id="dashboard-view" class="view active">
                <div class="view-header">
                    <h2>Privacy Analytics Dashboard</h2>
                    <div class="view-controls">
                        <select id="privacy-level">
                            <option value="strict">Strict Privacy</option>
                            <option value="balanced" selected>Balanced</option>
                            <option value="permissive">Permissive</option>
                        </select>
                        <button id="refresh-dashboard" class="btn-secondary">üîÑ Refresh</button>
                    </div>
                </div>

                <div class="privacy-overview">
                    <div class="overview-card">
                        <h3>Privacy Compliance</h3>
                        <div class="compliance-score">
                            <div class="score-circle">
                                <span id="compliance-percentage">0%</span>
                            </div>
                            <div class="score-details">
                                <div>GDPR: <span id="gdpr-status">Compliant</span></div>
                                <div>CCPA: <span id="ccpa-status">Compliant</span></div>
                                <div>PIPEDA: <span id="pipeda-status">Compliant</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="overview-card">
                        <h3>Data Processing</h3>
                        <div class="processing-stats">
                            <div class="stat-item">
                                <span class="stat-label">Total Users:</span>
                                <span class="stat-value" id="total-users">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Active Consents:</span>
                                <span class="stat-value" id="active-consents">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Data Points:</span>
                                <span class="stat-value" id="data-points">0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-charts">
                    <div class="chart-container">
                        <h3>Consent Trends</h3>
                        <canvas id="consent-chart" width="600" height="200"></canvas>
                    </div>

                    <div class="chart-container">
                        <h3>Data Anonymization</h3>
                        <canvas id="anonymization-chart" width="600" height="200"></canvas>
                    </div>
                </div>

                <div class="recent-activity">
                    <h3>Recent Privacy Events</h3>
                    <div id="privacy-events-list" class="events-list">
                        <!-- Events will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Consent Management View -->
            <div id="consent-view" class="view">
                <div class="view-header">
                    <h2>Consent Management</h2>
                    <button id="create-consent-template" class="btn-primary">+ Create Template</button>
                </div>

                <div class="consent-templates" id="consent-templates">
                    <!-- Templates will be dynamically added -->
                </div>

                <div class="consent-requests">
                    <h3>Pending Consent Requests</h3>
                    <div id="consent-requests-list" class="requests-list">
                        <!-- Requests will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Data Flow View -->
            <div id="data-flow-view" class="view">
                <div class="view-header">
                    <h2>Data Flow Visualization</h2>
                    <div class="view-controls">
                        <button id="add-data-source" class="btn-primary">+ Add Data Source</button>
                        <button id="add-processing-step" class="btn-secondary">+ Processing Step</button>
                    </div>
                </div>

                <div class="data-flow-container">
                    <canvas id="data-flow-canvas" width="1000" height="600"></canvas>
                </div>

                <div class="flow-controls">
                    <div class="control-group">
                        <label>Flow Speed:</label>
                        <input type="range" id="flow-speed" min="1" max="10" value="5">
                        <span id="flow-speed-value">5x</span>
                    </div>
                    <div class="control-group">
                        <label>Show Anonymization:</label>
                        <input type="checkbox" id="show-anonymization" checked>
                    </div>
                    <div class="control-group">
                        <label>Show Encryption:</label>
                        <input type="checkbox" id="show-encryption" checked>
                    </div>
                </div>
            </div>

            <!-- Analytics View -->
            <div id="analytics-view" class="view">
                <div class="view-header">
                    <h2>Privacy-Preserving Analytics</h2>
                    <div class="view-controls">
                        <select id="analytics-timeframe">
                            <option value="1h">Last Hour</option>
                            <option value="24h" selected>Last 24 Hours</option>
                            <option value="7d">Last 7 Days</option>
                            <option value="30d">Last 30 Days</option>
                        </select>
                        <button id="generate-report" class="btn-secondary">üìä Generate Report</button>
                    </div>
                </div>

                <div class="analytics-grid">
                    <div class="analytics-panel">
                        <h3>User Behavior Patterns</h3>
                        <div class="pattern-visualization">
                            <canvas id="behavior-patterns" width="500" height="300"></canvas>
                        </div>
                        <div class="pattern-insights" id="pattern-insights">
                            <!-- Insights will be populated here -->
                        </div>
                    </div>

                    <div class="analytics-panel">
                        <h3>Privacy Impact Assessment</h3>
                        <div class="impact-metrics">
                            <div class="impact-item">
                                <span>Risk Level:</span>
                                <span id="risk-level" class="risk-low">Low</span>
                            </div>
                            <div class="impact-item">
                                <span>Data Sensitivity:</span>
                                <span id="data-sensitivity">Medium</span>
                            </div>
                            <div class="impact-item">
                                <span>Compliance Score:</span>
                                <span id="compliance-score">95/100</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="analytics-reports">
                    <h3>Generated Reports</h3>
                    <div id="reports-list" class="reports-list">
                        <!-- Reports will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Compliance View -->
            <div id="compliance-view" class="view">
                <div class="view-header">
                    <h2>Compliance Monitoring</h2>
                    <button id="run-compliance-check" class="btn-primary">üîç Run Check</button>
                </div>

                <div class="compliance-frameworks">
                    <div class="framework-card" data-framework="gdpr">
                        <h3>GDPR Compliance</h3>
                        <div class="framework-status">
                            <div class="status-indicator compliant"></div>
                            <span>Compliant</span>
                        </div>
                        <div class="framework-details">
                            <div>Last Audit: <span id="gdpr-last-audit">2024-02-25</span></div>
                            <div>Next Review: <span id="gdpr-next-review">2024-08-25</span></div>
                        </div>
                    </div>

                    <div class="framework-card" data-framework="ccpa">
                        <h3>CCPA Compliance</h3>
                        <div class="framework-status">
                            <div class="status-indicator compliant"></div>
                            <span>Compliant</span>
                        </div>
                        <div class="framework-details">
                            <div>Last Audit: <span id="ccpa-last-audit">2024-02-20</span></div>
                            <div>Next Review: <span id="ccpa-next-review">2024-08-20</span></div>
                        </div>
                    </div>

                    <div class="framework-card" data-framework="pipeda">
                        <h3>PIPEDA Compliance</h3>
                        <div class="framework-status">
                            <div class="status-indicator warning"></div>
                            <span>Review Needed</span>
                        </div>
                        <div class="framework-details">
                            <div>Last Audit: <span id="pipeda-last-audit">2024-01-15</span></div>
                            <div>Next Review: <span id="pipeda-next-review">2024-07-15</span></div>
                        </div>
                    </div>
                </div>

                <div class="compliance-violations">
                    <h3>Recent Violations</h3>
                    <div id="violations-list" class="violations-list">
                        <!-- Violations will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Privacy Controls View -->
            <div id="privacy-view" class="view">
                <div class="view-header">
                    <h2>Privacy Controls</h2>
                    <button id="save-privacy-settings" class="btn-primary">üíæ Save Settings</button>
                </div>

                <div class="privacy-settings">
                    <div class="settings-section">
                        <h3>Data Collection</h3>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="collect-behavioral-data" checked>
                                Collect Behavioral Data
                            </label>
                            <p class="setting-description">Track user interactions and navigation patterns</p>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="collect-demographic-data">
                                Collect Demographic Data
                            </label>
                            <p class="setting-description">Age, gender, location (anonymized)</p>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="collect-device-data" checked>
                                Collect Device Data
                            </label>
                            <p class="setting-description">Browser type, screen resolution, device type</p>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>Data Retention</h3>
                        <div class="setting-item">
                            <label>Data Retention Period:</label>
                            <select id="retention-period">
                                <option value="30">30 days</option>
                                <option value="90" selected>90 days</option>
                                <option value="365">1 year</option>
                                <option value="730">2 years</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="auto-delete-expired" checked>
                                Auto-delete expired data
                            </label>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>Anonymization</h3>
                        <div class="setting-item">
                            <label>Anonymization Level:</label>
                            <select id="anonymization-level">
                                <option value="basic">Basic (IP masking)</option>
                                <option value="standard" selected>Standard (Hashing)</option>
                                <option value="advanced">Advanced (Differential Privacy)</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="enable-differential-privacy">
                                Enable Differential Privacy
                            </label>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>User Rights</h3>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="enable-data-portability" checked>
                                Enable Data Portability
                            </label>
                            <p class="setting-description">Allow users to export their data</p>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="enable-right-to-erasure" checked>
                                Enable Right to Erasure
                            </label>
                            <p class="setting-description">Allow users to request data deletion</p>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="enable-consent-withdrawal" checked>
                                Enable Consent Withdrawal
                            </label>
                            <p class="setting-description">Allow users to withdraw consent anytime</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="consent-template-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create Consent Template</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="consent-template-form">
                    <div class="form-group">
                        <label for="template-name">Template Name:</label>
                        <input type="text" id="template-name" required>
                    </div>
                    <div class="form-group">
                        <label for="template-description">Description:</label>
                        <textarea id="template-description" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="consent-purpose">Purpose:</label>
                        <select id="consent-purpose">
                            <option value="analytics">Analytics</option>
                            <option value="marketing">Marketing</option>
                            <option value="personalization">Personalization</option>
                            <option value="research">Research</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="retention-period">Data Retention (days):</label>
                        <input type="number" id="retention-period" min="1" max="2555" value="90">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="require-explicit-consent">
                            Require Explicit Consent
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary modal-close">Cancel</button>
                <button class="btn-primary" id="save-consent-template">Save Template</button>
            </div>
        </div>
    </div>

    <div id="data-source-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Data Source</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="data-source-form">
                    <div class="form-group">
                        <label for="source-name">Source Name:</label>
                        <input type="text" id="source-name" required>
                    </div>
                    <div class="form-group">
                        <label for="source-type">Source Type:</label>
                        <select id="source-type">
                            <option value="website">Website</option>
                            <option value="mobile-app">Mobile App</option>
                            <option value="api">API</option>
                            <option value="third-party">Third Party</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="data-categories">Data Categories:</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" value="behavioral">Behavioral</label>
                            <label><input type="checkbox" value="demographic">Demographic</label>
                            <label><input type="checkbox" value="technical">Technical</label>
                            <label><input type="checkbox" value="location">Location</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="source-anonymized">
                            Data is Pre-anonymized
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary modal-close">Cancel</button>
                <button class="btn-primary" id="save-data-source">Save Source</button>
            </div>
        </div>
    </div>

    <div id="audit-log-modal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>Privacy Audit Log</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="audit-filters">
                    <select id="audit-filter-type">
                        <option value="all">All Events</option>
                        <option value="consent">Consent Events</option>
                        <option value="data-access">Data Access</option>
                        <option value="anonymization">Anonymization</option>
                        <option value="deletion">Data Deletion</option>
                    </select>
                    <input type="date" id="audit-start-date">
                    <input type="date" id="audit-end-date">
                    <button id="filter-audit-log" class="btn-secondary">Filter</button>
                </div>
                <div id="audit-entries" class="audit-entries">
                    <!-- Audit entries will be populated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="export-audit-log">üìÑ Export Log</button>
                <button class="btn-secondary modal-close">Close</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>